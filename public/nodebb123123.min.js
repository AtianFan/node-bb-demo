(function(global,factory){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:this,function(window,noGlobal){"use strict";var arr=[];var document=window.document;var getProto=Object.getPrototypeOf;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var fnToString=hasOwn.toString;var ObjectFunctionString=fnToString.call(Object);var support={};function DOMEval(code,doc){doc=doc||document;var script=doc.createElement("script");script.text=code;doc.head.appendChild(script).parentNode.removeChild(script)}var version="3.1.1",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,length:0,toArray:function(){return slice.call(this)},get:function(num){if(num==null){return slice.call(this)}return num<0?this[num+this.length]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;return ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){var type=jQuery.type(obj);return(type==="number"||type==="string")&&!isNaN(obj-parseFloat(obj))},isPlainObject:function(obj){var proto,Ctor;if(!obj||toString.call(obj)!=="[object Object]"){return false}proto=getProto(obj);if(!proto){return true}Ctor=hasOwn.call(proto,"constructor")&&proto.constructor;return typeof Ctor==="function"&&fnToString.call(Ctor)===ObjectFunctionString},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},type:function(obj){if(obj==null){return obj+""}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){DOMEval(code)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break}}}return obj},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]}jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true}return 0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i}}return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)},rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(ch,asCodePoint){if(asCodePoint){if(ch==="\0"){return"ï¿½"}return ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" "}return"\\"+ch},unloadHandler=function(){setDocument()},disabledAncestor=addCombinator(function(elem){return elem.disabled===true&&("form"in elem||"label"in elem)},{dir:"parentNode",next:"legend"});try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results}if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if(m=match[1]){if(nodeType===9){if(elem=context.getElementById(m)){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector}else if(context.nodeName.toLowerCase()!=="object"){if(nid=context.getAttribute("id")){nid=nid.replace(rcssescape,fcssescape)}else{context.setAttribute("id",nid=expando)}groups=tokenize(selector);i=groups.length;while(i--){groups[i]="#"+nid+" "+toSelector(groups[i])}newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id")}}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el)}catch(e){return false}finally{if(el.parentNode){el.parentNode.removeChild(el)}el=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&a.sourceIndex-b.sourceIndex;if(diff){return diff}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1}}}return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createDisabledPseudo(disabled){return function(elem){if("form"in elem){if(elem.parentNode&&elem.disabled===false){if("label"in elem){if("label"in elem.parentNode){return elem.parentNode.disabled===disabled}else{return elem.disabled===disabled}}return elem.isDisabled===disabled||elem.isDisabled!==!disabled&&disabledAncestor(elem)===disabled}return elem.disabled===disabled}else if("label"in elem){return elem.disabled===disabled}return false}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,subWindow,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if(preferredDoc!==document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow){if(subWindow.addEventListener){subWindow.addEventListener("unload",unloadHandler,false)}else if(subWindow.attachEvent){subWindow.attachEvent("onunload",unloadHandler)}}support.attributes=assert(function(el){el.className="i";return!el.getAttribute("className")});support.getElementsByTagName=assert(function(el){el.appendChild(document.createComment(""));return!el.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(el){docElem.appendChild(el).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length});if(support.getById){Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var elem=context.getElementById(id);return elem?[elem]:[]}}}else{Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId}};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem]}elems=context.getElementsByName(id);i=0;while(elem=elems[i++]){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem]}}}return[]}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag)}else if(support.qsa){return context.querySelectorAll(tag)}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(document.querySelectorAll)){assert(function(el){docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(el.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}if(!el.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!el.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=")}if(!el.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}if(!el.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]")}});assert(function(el){el.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden");el.appendChild(input).setAttribute("name","D");if(el.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")}if(el.querySelectorAll(":enabled").length!==2){rbuggyQSA.push(":enabled",":disabled")}docElem.appendChild(el).disabled=true;if(el.querySelectorAll(":disabled").length!==2){rbuggyQSA.push(":enabled",":disabled")}el.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)){assert(function(el){support.disconnectedMatch=matches.call(el,"*");matches.call(el,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1}if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1}return sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}else if(aup===bup){return siblingCheck(a,b)}cur=a;while(cur=cur.parentNode){ap.unshift(cur)}cur=b;while(cur=cur.parentNode){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.escape=function(sel){return(sel+"").replace(rcssescape,fcssescape)};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node)}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3]){Sizzle.error(match[0])}return match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null}if(match[3]){match[2]=match[4]||match[5]||""}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex}if(diff===false){while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff]}if(node===elem){break}}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:createDisabledPseudo(false),disabled:createDisabledPseudo(true),checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function(elem){return!Expr.pseudos["empty"](elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&key==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}return false}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if(skip&&skip===elem.nodeName.toLowerCase()){elem=elem[dir]||elem}else if((oldCache=uniqueCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2]}else{uniqueCache[key]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true}}}}}return false}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;
if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem)}}postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost){outermostContext=context===document||context||outermost}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML}while(matcher=elementMatchers[j++]){if(matcher(elem,context||document,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if(elem=!matcher&&elem){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector)}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}else if(compiled){context=context.parentNode}selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(el){return el.compareDocumentPosition(document.createElement("fieldset"))&1});if(!assert(function(el){el.innerHTML="<a href='#'></a>";return el.firstChild.getAttribute("href")==="#"})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)}})}if(!support.attributes||!assert(function(el){el.innerHTML="<input/>";el.firstChild.setAttribute("value","");return el.firstChild.getAttribute("value")===""})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue}})}if(!assert(function(el){return el.getAttribute("disabled")==null})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}})}return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;jQuery.escapeSelector=Sizzle.escape;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier!=="string"){return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not})}if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements);return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not&&elem.nodeType===1})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}if(elems.length===1&&elem.nodeType===1){return jQuery.find.matchesSelector(elem,expr)?[elem]:[]}return jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,ret,len=this.length,self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}ret=this.pushStack([]);for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}return len>1?jQuery.uniqueSort(ret):ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this}root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem){this[0]=elem;this.length=1}return this}}else if(!context||context.jquery){return(context||root).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery)}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],targets=typeof selectors!=="string"&&jQuery(selectors);if(!rneedsContext.test(selectors)){for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(targets?targets.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnothtmlwhite=/[^\x20\t\r\n\f]+/g;function createOptions(options){var object={};jQuery.each(options.match(rnothtmlwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false}}}if(!options.memory){memory=false}firing=false;if(locked){if(memory){list=[]}else{list=""}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory)}(function add(args){jQuery.each(args,function(_,arg){if(jQuery.isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&jQuery.type(arg)!=="string"){add(arg)}})})(arguments);if(memory&&!firing){fire()}}return this},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--}}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){if(list){list=[]}return this},disable:function(){locked=queue=[];list=memory="";return this},disabled:function(){return!list},lock:function(){locked=queue=[];if(!memory&&!firing){list=memory=""}return this},locked:function(){return!!locked},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire()}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};function Identity(v){return v}function Thrower(ex){throw ex}function adoptValue(value,resolve,reject){var method;try{if(value&&jQuery.isFunction(method=value.promise)){method.call(value).done(resolve).fail(reject)}else if(value&&jQuery.isFunction(method=value.then)){method.call(value,resolve,reject)}else{resolve.call(undefined,value)}}catch(value){reject.call(undefined,value)}}jQuery.extend({Deferred:function(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},catch:function(fn){return promise.then(null,fn)},pipe:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject)}else{newDefer[tuple[0]+"With"](this,fn?[returned]:arguments)}})});fns=null}).promise()},then:function(onFulfilled,onRejected,onProgress){var maxDepth=0;function resolve(depth,deferred,handler,special){return function(){var that=this,args=arguments,mightThrow=function(){var returned,then;if(depth<maxDepth){return}returned=handler.apply(that,args);if(returned===deferred.promise()){throw new TypeError("Thenable self-resolution")}then=returned&&(typeof returned==="object"||typeof returned==="function")&&returned.then;if(jQuery.isFunction(then)){if(special){then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special))}else{maxDepth++;then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith))}}else{if(handler!==Identity){that=undefined;args=[returned]}(special||deferred.resolveWith)(that,args)}},process=special?mightThrow:function(){try{mightThrow()}catch(e){if(jQuery.Deferred.exceptionHook){jQuery.Deferred.exceptionHook(e,process.stackTrace)}if(depth+1>=maxDepth){if(handler!==Thrower){that=undefined;args=[e]}deferred.rejectWith(that,args)}}};if(depth){process()}else{if(jQuery.Deferred.getStackHook){process.stackTrace=jQuery.Deferred.getStackHook()}window.setTimeout(process)}}}return jQuery.Deferred(function(newDefer){tuples[0][3].add(resolve(0,newDefer,jQuery.isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith));tuples[1][3].add(resolve(0,newDefer,jQuery.isFunction(onFulfilled)?onFulfilled:Identity));tuples[2][3].add(resolve(0,newDefer,jQuery.isFunction(onRejected)?onRejected:Thrower))}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[5];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[3-i][2].disable,tuples[0][2].lock)}list.add(tuple[3].fire);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?undefined:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(singleValue){var remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=slice.call(arguments),master=jQuery.Deferred(),updateFunc=function(i){return function(value){resolveContexts[i]=this;resolveValues[i]=arguments.length>1?slice.call(arguments):value;if(!--remaining){master.resolveWith(resolveContexts,resolveValues)}}};if(remaining<=1){adoptValue(singleValue,master.done(updateFunc(i)).resolve,master.reject);if(master.state()==="pending"||jQuery.isFunction(resolveValues[i]&&resolveValues[i].then)){return master.then()}}while(i--){adoptValue(resolveValues[i],updateFunc(i),master.reject)}return master.promise()}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(error,stack){if(window.console&&window.console.warn&&error&&rerrorNames.test(error.name)){window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,stack)}};jQuery.readyException=function(error){window.setTimeout(function(){throw error})};var readyList=jQuery.Deferred();jQuery.fn.ready=function(fn){readyList.then(fn).catch(function(error){jQuery.readyException(error)});return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery])}});jQuery.ready.then=readyList.then;function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready()}if(document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll){window.setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed)}var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}if(chainable){return elems}if(bulk){return fn.call(elems)}return len?fn(elems[0],key):emptyGet};var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1;Data.prototype={cache:function(owner){var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true})}}}return value},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[jQuery.camelCase(data)]=value}else{for(prop in data){cache[jQuery.camelCase(prop)]=data[prop]}}return cache},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][jQuery.camelCase(key)]},access:function(owner,key,value){if(key===undefined||key&&typeof key==="string"&&value===undefined){return this.get(owner,key)}this.set(owner,key,value);return value!==undefined?value:key},remove:function(owner,key){var i,cache=owner[this.expando];if(cache===undefined){return}if(key!==undefined){if(jQuery.isArray(key)){key=key.map(jQuery.camelCase)}else{key=jQuery.camelCase(key);key=key in cache?[key]:key.match(rnothtmlwhite)||[]}i=key.length;while(i--){delete cache[key[i]]}}if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined}else{delete owner[this.expando]}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache)}};var dataPriv=new Data;var dataUser=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function getData(data){if(data==="true"){return true}if(data==="false"){return false}if(data==="null"){return null}if(data===+data+""){return+data}if(rbrace.test(data)){return JSON.parse(data)}return data}function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=getData(data)}catch(e){}dataUser.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem)},data:function(elem,name,data){return dataUser.access(elem,name,data)},removeData:function(elem,name){dataUser.remove(elem,name)},_data:function(elem,name,data){return dataPriv.access(elem,name,data)},_removeData:function(elem,name){dataPriv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}dataPriv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){dataUser.set(this,key)})}return access(this,function(value){var data;if(elem&&value===undefined){data=dataUser.get(elem,key);if(data!==undefined){return data}data=dataAttr(elem,key);if(data!==undefined){return data}return}this.each(function(){dataUser.set(this,key,value)})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){dataUser.remove(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHiddenWithinTree=function(elem,el){elem=el||elem;return elem.style.display==="none"||elem.style.display===""&&jQuery.contains(elem.ownerDocument,elem)&&jQuery.css(elem,"display")==="none"};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3];valueParts=valueParts||[];initialInUnit=+initial||1;do{scale=scale||".5";initialInUnit=initialInUnit/scale;jQuery.style(elem,prop,initialInUnit+unit)}while(scale!==(scale=currentValue()/initial)&&scale!==1&&--maxIterations)}if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted}}return adjusted}var defaultDisplayMap={};function getDefaultDisplay(elem){var temp,doc=elem.ownerDocument,nodeName=elem.nodeName,display=defaultDisplayMap[nodeName];if(display){return display}temp=doc.body.appendChild(doc.createElement(nodeName));display=jQuery.css(temp,"display");temp.parentNode.removeChild(temp);if(display==="none"){display="block"}defaultDisplayMap[nodeName]=display;return display}function showHide(elements,show){var display,elem,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}display=elem.style.display;if(show){if(display==="none"){values[index]=dataPriv.get(elem,"display")||null;if(!values[index]){elem.style.display=""}}if(elem.style.display===""&&isHiddenWithinTree(elem)){values[index]=getDefaultDisplay(elem)}}else{if(display!=="none"){values[index]="none";dataPriv.set(elem,"display",display)}}}for(index=0;index<length;index++){if(values[index]!=null){elements[index].style.display=values[index]}}return elements}jQuery.fn.extend({show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHiddenWithinTree(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});var rcheckableType=/^(?:checkbox|radio)$/i;var rtagName=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var rscriptType=/^$|\/(?:java|ecma)script/i;var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret;if(typeof context.getElementsByTagName!=="undefined"){ret=context.getElementsByTagName(tag||"*")}else if(typeof context.querySelectorAll!=="undefined"){ret=context.querySelectorAll(tag||"*")}else{ret=[]}if(tag===undefined||tag&&jQuery.nodeName(context,tag)){return jQuery.merge([context],ret)}return ret}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"))}}var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem)}continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment}(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var documentElement=document.documentElement;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){on(elem,type,selector,data,types[type],one)}return elem}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return elem}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(selector){jQuery.find.matchesSelector(documentElement,selector)}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined;
}}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events")}},dispatch:function(nativeEvent){var event=jQuery.event.fix(nativeEvent);var i,j,ret,matched,handleObj,handlerQueue,args=new Array(arguments.length),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;for(i=1;i<arguments.length;i++){args[i]=arguments[i]}event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var i,handleObj,sel,matchedHandlers,matchedSelectors,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&!(event.type==="click"&&event.button>=1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&!(event.type==="click"&&cur.disabled===true)){matchedHandlers=[];matchedSelectors={};for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matchedSelectors[sel]===undefined){matchedSelectors[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length}if(matchedSelectors[sel]){matchedHandlers.push(handleObj)}}if(matchedHandlers.length){handlerQueue.push({elem:cur,handlers:matchedHandlers})}}}}cur=this;if(delegateCount<handlers.length){handlerQueue.push({elem:cur,handlers:handlers.slice(delegateCount)})}return handlerQueue},addProp:function(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:true,configurable:true,get:jQuery.isFunction(hook)?function(){if(this.originalEvent){return hook(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[name]}},set:function(value){Object.defineProperty(this,name,{enumerable:true,configurable:true,writable:true,value:value})}})},fix:function(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse;this.target=src.target&&src.target.nodeType===3?src.target.parentNode:src.target;this.currentTarget=src.currentTarget;this.relatedTarget=src.relatedTarget}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(event){var button=event.button;if(event.which==null&&rkeyEvent.test(event.type)){return event.charCode!=null?event.charCode:event.keyCode}if(!event.which&&button!==undefined&&rmouseEvent.test(event.type)){if(button&1){return 1}if(button&2){return 3}if(button&4){return 2}return 0}return event.which}},jQuery.event.addProp);jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){if(jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")){return elem.getElementsByTagName("tbody")[0]||elem}return elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur)}}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return collection.each(function(index){var self=collection.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}domManip(self,args,callback,ignored)})}if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(collection[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{DOMEval(node.textContent.replace(rcleanScript,""),doc)}}}}}}return collection}function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node))}if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"))}node.parentNode.removeChild(node)}}return elem}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}elem[dataPriv.expando]=undefined}if(elem[dataUser.expando]){elem[dataUser.expando]=undefined}}}}});jQuery.fn.extend({detach:function(selector){return remove(this,selector,true)},remove:function(selector){return remove(this,selector)},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this)}}},ignored)}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window}return view.getComputedStyle(elem)};(function(){function computeStyleTests(){if(!div){return}div.style.cssText="box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";div.innerHTML="";documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=divStyle.marginLeft==="2px";boxSizingReliableVal=divStyle.width==="4px";div.style.marginRight="50%";pixelMarginRightVal=divStyle.marginRight==="4px";documentElement.removeChild(container);div=null}var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";container.appendChild(div);jQuery.extend(support,{pixelPosition:function(){computeStyleTests();return pixelPositionVal},boxSizingReliable:function(){computeStyleTests();return boxSizingReliableVal},pixelMarginRight:function(){computeStyleTests();return pixelMarginRightVal},reliableMarginLeft:function(){computeStyleTests();return reliableMarginLeftVal}})})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}var rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name}var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name}}}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i,val=0;if(extra===(isBorderBox?"border":"content")){i=4}else{i=name==="width"?1:0}for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var val,valueIsBorderBox=true,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(elem.getClientRects().length){val=elem.getBoundingClientRect()[name]}if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number"}if(value==null||value!==value){return}if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&(!elem.getClientRects().length||!elem.getBoundingClientRect().width)?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles);if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[name]=value;value=jQuery.css(elem,name)}return setPositiveNumber(elem,value,subtract)}}});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}))+"px"}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function raf(){if(timerId){window.requestAnimationFrame(raf);jQuery.fx.tick()}}function createFxNow(){window.setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,display,isBox="width"in props||"height"in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}for(prop in props){value=props[prop];if(rfxtypes.test(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}}propTween=!jQuery.isEmptyObject(props);if(!propTween&&jQuery.isEmptyObject(orig)){return}if(isBox&&elem.nodeType===1){opts.overflow=[style.overflow,style.overflowX,style.overflowY];restoreDisplay=dataShow&&dataShow.display;if(restoreDisplay==null){restoreDisplay=dataPriv.get(elem,"display")}display=jQuery.css(elem,"display");if(display==="none"){if(restoreDisplay){display=restoreDisplay}else{showHide([elem],true);restoreDisplay=elem.style.display||restoreDisplay;display=jQuery.css(elem,"display");showHide([elem])}}if(display==="inline"||display==="inline-block"&&restoreDisplay!=null){if(jQuery.css(elem,"float")==="none"){if(!propTween){anim.done(function(){style.display=restoreDisplay});if(restoreDisplay==null){display=style.display;restoreDisplay=display==="none"?"":display}}style.display="inline-block"}}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}propTween=false;for(prop in orig){if(!propTween){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden}}else{dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay})}if(toggle){dataShow.hidden=!hidden}if(hidden){showHide([elem],true)}anim.done(function(){if(!hidden){showHide([elem])}dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}})}propTween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=propTween.start;if(hidden){propTween.end=propTween.start;propTween.start=0}}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(jQuery.isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)}return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween}]},tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.match(rnothtmlwhite)}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback)}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback)}else{Animation.prefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};if(jQuery.fx.off||document.hidden){
opt.duration=0}else{if(typeof opt.duration!=="number"){if(opt.duration in jQuery.fx.speeds){opt.duration=jQuery.fx.speeds[opt.duration]}else{opt.duration=jQuery.fx.speeds._default}}}if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start()}else{jQuery.timers.pop()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=window.requestAnimationFrame?window.requestAnimationFrame(raf):window.setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){if(window.cancelAnimationFrame){window.cancelAnimationFrame(timerId)}else{window.clearInterval(timerId)}timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:undefined)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return}if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}elem.setAttribute(name,value+"");return value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},removeAttr:function(elem,value){var name,i=0,attrNames=value&&value.match(rnothtmlwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){elem.removeAttribute(name)}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();if(!isXML){handle=attrHandle[lowercaseName];attrHandle[lowercaseName]=ret;ret=getter(elem,name,isXML)!=null?lowercaseName:null;attrHandle[lowercaseName]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}return elem[name]=value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}return elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");if(tabindex){return parseInt(tabindex,10)}if(rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});function stripAndCollapse(value){var tokens=value.match(rnothtmlwhite)||[];return tokens.join(" ")}function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||""}jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))})}if(typeof value==="string"&&value){classes=value.match(rnothtmlwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&" "+stripAndCollapse(curValue)+" ";if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof value==="string"&&value){classes=value.match(rnothtmlwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&" "+stripAndCollapse(curValue)+" ";if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>-1){cur=cur.replace(" "+clazz+" "," ")}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)})}return this.each(function(){var className,i,self,classNames;if(type==="string"){i=0;self=jQuery(this);classNames=value.match(rnothtmlwhite)||[];while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className)}if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"")}}})},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while(elem=this[i++]){if(elem.nodeType===1&&(" "+stripAndCollapse(getClass(elem))+" ").indexOf(className)>-1){return true}}return false}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;if(typeof ret==="string"){return ret.replace(rreturn,"")}return ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:stripAndCollapse(jQuery.text(elem))}},select:{get:function(elem){var value,option,i,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one",values=one?null:[],max=one?index+1:options.length;if(index<0){i=max}else{i=one?index:0}for(;i<max;i++){option=options[i];if((option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem)}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});jQuery.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});support.focusin="onfocusin"in window;if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}dataPriv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix)}else{dataPriv.access(doc,fix,attaches)}}}})}var location=window.location;var nonce=jQuery.now();var rquery=/\?/;jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null}try{xml=(new window.DOMParser).parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml};var rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,valueOrFunction){var value=jQuery.isFunction(valueOrFunction)?valueOrFunction():valueOrFunction;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value==null?"":value)};if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();if(val==null){return null}if(jQuery.isArray(val)){return jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}})}return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});var r20=/%20/g,rhash=/#.*$/,rantiCache=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnothtmlwhite)||[];if(jQuery.isFunction(func)){while(dataType=dataTypes[i++]){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport){return!(selected=dataTypeOrTransport)}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}}if(conv!==true){if(conv&&s.throws){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,completed,fireGlobals,i,uncached,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(completed){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return completed?responseHeadersString:null},setRequestHeader:function(name,value){if(completed==null){name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(completed==null){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(completed){jqXHR.always(map[jqXHR.status])}else{for(code in map){statusCode[code]=[statusCode[code],map[code]]}}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR);s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=(s.dataType||"*").toLowerCase().match(rnothtmlwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host}catch(e){s.crossDomain=true}}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(completed){return jqXHR}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url.replace(rhash,"");if(!s.hasContent){uncached=s.url.slice(cacheURL.length);if(s.data){cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false){cacheURL=cacheURL.replace(rantiCache,"$1");uncached=(rquery.test(cacheURL)?"&":"?")+"_="+nonce++ +uncached}s.url=cacheURL+uncached}else if(s.data&&s.processData&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0){s.data=s.data.replace(r20,"+")}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||completed)){return jqXHR.abort()}strAbort="abort";completeDeferred.add(s.complete);jqXHR.done(s.success);jqXHR.fail(s.error);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(completed){return jqXHR}if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{completed=false;transport.send(requestHeaders,done)}catch(e){if(completed){throw e}done(-1,e)}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(completed){return}completed=true;if(timeoutTimer){window.clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:true,async:false,global:false,throws:true})};jQuery.fn.extend({wrapAll:function(html){var wrap;if(this[0]){if(jQuery.isFunction(html)){html=html.call(this[0])}wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(selector){this.parent(selector).not("body").each(function(){jQuery(this).replaceWith(this.childNodes)});return this}});jQuery.expr.pseudos.hidden=function(elem){return!jQuery.expr.pseudos.visible(elem)};jQuery.expr.pseudos.visible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length)};jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort()}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error")}else{complete(xhr.status,xhr.statusText)}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders())}}}};xhr.onload=callback();errorCallback=xhr.onerror=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback()}})}}}callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback){throw e}}},abort:function(){if(callback){callback()}}}}});jQuery.ajaxPrefilter(function(s){if(s.crossDomain){s.contents.script=false}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function(){if(callback){callback()}
}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName)}else{window[callbackName]=overwritten}if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});support.createHTMLDocument=function(){var body=document.implementation.createHTMLDocument("").body;body.innerHTML="<form></form><form></form>";return body.childNodes.length===2}();jQuery.parseHTML=function(data,context,keepScripts){if(typeof data!=="string"){return[]}if(typeof context==="boolean"){keepScripts=context;context=false}var base,parsed,scripts;if(!context){if(support.createHTMLDocument){context=document.implementation.createHTMLDocument("");base=context.createElement("base");base.href=document.location.href;context.head.appendChild(base)}else{context=document}}parsed=rsingleTag.exec(data);scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=stripAndCollapse(url.slice(off));url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object"){type="POST"}if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})})}return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset))}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,rect,doc,elem=this[0];if(!elem){return}if(!elem.getClientRects().length){return{top:0,left:0}}rect=elem.getBoundingClientRect();if(rect.width||rect.height){doc=elem.ownerDocument;win=getWindow(doc);docElem=doc.documentElement;return{top:rect.top+win.pageYOffset-docElem.clientTop,left:rect.left+win.pageXOffset-docElem.clientLeft}}return rect},position:function(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset={top:parentOffset.top+jQuery.css(offsetParent[0],"borderTopWidth",true),left:parentOffset.left+jQuery.css(offsetParent[0],"borderLeftWidth",true)}}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent}return offsetParent||documentElement})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset)}else{elem[method]=val}},method,val,arguments.length)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return funcName.indexOf("outer")===0?elem["inner"+name]:elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable)}})});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});jQuery.parseJSON=JSON.parse;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(!noGlobal){window.jQuery=window.$=jQuery}return jQuery});(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define([],factory);else if(typeof exports==="object")exports["io"]=factory();else root["io"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var url=__webpack_require__(1);var parser=__webpack_require__(7);var Manager=__webpack_require__(17);var debug=__webpack_require__(3)("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};function lookup(uri,opts){if((typeof uri==="undefined"?"undefined":_typeof(uri))==="object"){opts=uri;uri=undefined}opts=opts||{};var parsed=url(uri);var source=parsed.source;var id=parsed.id;var path=parsed.path;var sameNamespace=cache[id]&&path in cache[id].nsps;var newConnection=opts.forceNew||opts["force new connection"]||false===opts.multiplex||sameNamespace;var io;if(newConnection){debug("ignoring socket cache for %s",source);io=Manager(source,opts)}else{if(!cache[id]){debug("new io instance for %s",source);cache[id]=Manager(source,opts)}io=cache[id]}if(parsed.query&&!opts.query){opts.query=parsed.query}else if(opts&&"object"===_typeof(opts.query)){opts.query=encodeQueryString(opts.query)}return io.socket(parsed.path,opts)}function encodeQueryString(obj){var str=[];for(var p in obj){if(obj.hasOwnProperty(p)){str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]))}}return str.join("&")}exports.protocol=parser.protocol;exports.connect=lookup;exports.Manager=__webpack_require__(17);exports.Socket=__webpack_require__(44)},function(module,exports,__webpack_require__){(function(global){"use strict";var parseuri=__webpack_require__(2);var debug=__webpack_require__(3)("socket.io-client:url");module.exports=url;function url(uri,loc){var obj=uri;loc=loc||global.location;if(null==uri)uri=loc.protocol+"//"+loc.host;if("string"===typeof uri){if("/"===uri.charAt(0)){if("/"===uri.charAt(1)){uri=loc.protocol+uri}else{uri=loc.host+uri}}if(!/^(https?|wss?):\/\//.test(uri)){debug("protocol-less url %s",uri);if("undefined"!==typeof loc){uri=loc.protocol+"//"+uri}else{uri="https://"+uri}}debug("parse %s",uri);obj=parseuri(uri)}if(!obj.port){if(/^(http|ws)$/.test(obj.protocol)){obj.port="80"}else if(/^(http|ws)s$/.test(obj.protocol)){obj.port="443"}}obj.path=obj.path||"/";var ipv6=obj.host.indexOf(":")!==-1;var host=ipv6?"["+obj.host+"]":obj.host;obj.id=obj.protocol+"://"+host+":"+obj.port;obj.href=obj.protocol+"://"+host+(loc&&loc.port===obj.port?"":":"+obj.port);return obj}}).call(exports,function(){return this}())},function(module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function parseuri(str){var src=str,b=str.indexOf("["),e=str.indexOf("]");if(b!=-1&&e!=-1){str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length)}var m=re.exec(str||""),uri={},i=14;while(i--){uri[parts[i]]=m[i]||""}if(b!=-1&&e!=-1){uri.source=src;uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":");uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":");uri.ipv6uri=true}return uri}},function(module,exports,__webpack_require__){(function(process){exports=module.exports=__webpack_require__(5);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return typeof document!=="undefined"&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{return exports.storage.debug}catch(e){}if(typeof process!=="undefined"&&"env"in process){return process.env.DEBUG}}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(exports,__webpack_require__(4))},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){exports=module.exports=debug.debug=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(6);exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});args=exports.formatArgs.apply(self,args);var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},function(module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>1e4){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},function(module,exports,__webpack_require__){var debug=__webpack_require__(8)("socket.io-parser");var json=__webpack_require__(11);var Emitter=__webpack_require__(13);var binary=__webpack_require__(14);var isBuf=__webpack_require__(16);exports.protocol=4;exports.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"];exports.CONNECT=0;exports.DISCONNECT=1;exports.EVENT=2;exports.ACK=3;exports.ERROR=4;exports.BINARY_EVENT=5;exports.BINARY_ACK=6;exports.Encoder=Encoder;exports.Decoder=Decoder;function Encoder(){}Encoder.prototype.encode=function(obj,callback){debug("encoding packet %j",obj);if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){encodeAsBinary(obj,callback)}else{var encoding=encodeAsString(obj);callback([encoding])}};function encodeAsString(obj){var str="";var nsp=false;str+=obj.type;if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){str+=obj.attachments;str+="-"}if(obj.nsp&&"/"!=obj.nsp){nsp=true;str+=obj.nsp}if(null!=obj.id){if(nsp){str+=",";nsp=false}str+=obj.id}if(null!=obj.data){if(nsp)str+=",";str+=json.stringify(obj.data)}debug("encoded %j as %s",obj,str);return str}function encodeAsBinary(obj,callback){function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData);var pack=encodeAsString(deconstruction.packet);var buffers=deconstruction.buffers;buffers.unshift(pack);callback(buffers)}binary.removeBlobs(obj,writeEncoding)}function Decoder(){this.reconstructor=null}Emitter(Decoder.prototype);Decoder.prototype.add=function(obj){var packet;if("string"==typeof obj){packet=decodeString(obj);if(exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type){this.reconstructor=new BinaryReconstructor(packet);if(this.reconstructor.reconPack.attachments===0){this.emit("decoded",packet)}}else{this.emit("decoded",packet)}}else if(isBuf(obj)||obj.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{packet=this.reconstructor.takeBinaryData(obj);if(packet){this.reconstructor=null;this.emit("decoded",packet)}}}else{throw new Error("Unknown type: "+obj)}};function decodeString(str){var p={};var i=0;p.type=Number(str.charAt(0));if(null==exports.types[p.type])return error();if(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){var buf="";while(str.charAt(++i)!="-"){buf+=str.charAt(i);if(i==str.length)break}if(buf!=Number(buf)||str.charAt(i)!="-"){throw new Error("Illegal attachments")}p.attachments=Number(buf)}if("/"==str.charAt(i+1)){p.nsp="";while(++i){var c=str.charAt(i);if(","==c)break;p.nsp+=c;if(i==str.length)break}}else{p.nsp="/"}var next=str.charAt(i+1);if(""!==next&&Number(next)==next){p.id="";while(++i){var c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}p.id+=str.charAt(i);if(i==str.length)break}p.id=Number(p.id)}if(str.charAt(++i)){p=tryParse(p,str.substr(i))}debug("decoded %s as %j",str,p);return p}function tryParse(p,str){try{p.data=json.parse(str)}catch(e){return error()}return p}Decoder.prototype.destroy=function(){if(this.reconstructor){this.reconstructor.finishedReconstruction()}};function BinaryReconstructor(packet){this.reconPack=packet;this.buffers=[]}BinaryReconstructor.prototype.takeBinaryData=function(binData){this.buffers.push(binData);if(this.buffers.length==this.reconPack.attachments){var packet=binary.reconstructPacket(this.reconPack,this.buffers);this.finishedReconstruction();return packet}return null};BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]};function error(data){return{type:exports.ERROR,data:"parser error"}}},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(9);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},function(module,exports,__webpack_require__){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(10);exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},function(module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},function(module,exports,__webpack_require__){(function(module,global){var define=false;(function(){var isLoader=typeof define==="function"&&define.amd;var objectTypes={function:true,object:true};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var root=objectTypes[typeof window]&&window||this,freeGlobal=freeExports&&objectTypes[typeof module]&&module&&!module.nodeType&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal["global"]===freeGlobal||freeGlobal["window"]===freeGlobal||freeGlobal["self"]===freeGlobal)){root=freeGlobal}function runInContext(context,exports){context||(context=root["Object"]());exports||(exports=root["Object"]());var Number=context["Number"]||root["Number"],String=context["String"]||root["String"],Object=context["Object"]||root["Object"],Date=context["Date"]||root["Date"],SyntaxError=context["SyntaxError"]||root["SyntaxError"],TypeError=context["TypeError"]||root["TypeError"],Math=context["Math"]||root["Math"],nativeJSON=context["JSON"]||root["JSON"];if(typeof nativeJSON=="object"&&nativeJSON){exports.stringify=nativeJSON.stringify;exports.parse=nativeJSON.parse}var objectProto=Object.prototype,getClass=objectProto.toString,isProperty,forEach,undef;var isExtended=new Date(-0xc782b5b800cec);try{isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708}catch(exception){}function has(name){if(has[name]!==undef){return has[name]}var isSupported;if(name=="bug-string-char-index"){isSupported="a"[0]!="a"}else if(name=="json"){isSupported=has("json-stringify")&&has("json-parse")}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=exports.stringify,stringifySupported=typeof stringify=="function"&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported=stringify(0)==="0"&&stringify(new Number)==="0"&&stringify(new String)=='""'&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undef])=="[null]"&&stringify(null)=="null"&&stringify([undef,getClass,null])=="[null,null,null]"&&stringify({a:[value,true,false,null,"\0\b\n\f\r\t"]})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(exception){stringifySupported=false}}isSupported=stringifySupported}if(name=="json-parse"){var parse=exports.parse;if(typeof parse=="function"){try{if(parse("0")===0&&!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){try{parseSupported=!parse('"\t"')}catch(exception){}
if(parseSupported){try{parseSupported=parse("01")!==1}catch(exception){}}if(parseSupported){try{parseSupported=parse("1.")!==1}catch(exception){}}}}}catch(exception){parseSupported=false}}isSupported=parseSupported}}return has[name]=!!isSupported}if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)}}if(!(isProperty=objectProto.hasOwnProperty)){isProperty=function(property){var members={},constructor;if((members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass){isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);this.__proto__=original;return result}}else{constructor=members.constructor;isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}}members=null;return isProperty.call(this,property)}}forEach=function(object,callback){var size=0,Properties,members,property;(Properties=function(){this.valueOf=0}).prototype.valueOf=0;members=new Properties;for(property in members){if(isProperty.call(members,property)){size++}}Properties=members=null;if(!size){members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&objectTypes[typeof object.hasOwnProperty]&&object.hasOwnProperty||isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property)}}for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}}else if(size==2){forEach=function(object,callback){var members={},isFunction=getClass.call(object)==functionClass,property;for(property in object){if(!(isFunction&&property=="prototype")&&!isProperty.call(members,property)&&(members[property]=1)&&isProperty.call(object,property)){callback(property)}}}}else{forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property)}}if(isConstructor||isProperty.call(object,property="constructor")){callback(property)}}}return forEach(object,callback)};if(!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)};var unicodePrefix="\\u00";var quote=function(value){var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||length>10;var symbols=useCharIndex&&(charIndexBuggy?value.split(""):value);for(;index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=useCharIndex?symbols[index]:value.charAt(index)}}return result+'"'};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if(typeof value=="object"&&value){className=getClass.call(value);if(className==dateClass&&!isProperty.call(value,"toJSON")){if(value>-1/0&&value<1/0){if(getDay){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3}else{year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds()}value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else{value=null}}else if(typeof value.toJSON=="function"&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))){value=value.toJSON(property)}}if(callback){value=callback.call(object,property,value)}if(value===null){return"null"}className=getClass.call(value);if(className==booleanClass){return""+value}else if(className==numberClass){return value>-1/0&&value<1/0?""+value:"null"}else if(className==stringClass){return quote(""+value)}if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError()}}stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undef?"null":element)}result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else{forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undef){results.push(quote(property)+":"+(whitespace?" ":"")+element)}});result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}stack.pop();return result}};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[typeof filter]&&filter){if((className=getClass.call(filter))==functionClass){callback=filter}else if(className==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;value=filter[index++],(className=getClass.call(value),className==stringClass||className==numberClass)&&(properties[value]=1));}}if(width){if((className=getClass.call(width))==numberClass){if((width-=width%1)>0){for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}}else if(className==stringClass){whitespace=width.length<=10?width:width.slice(0,10)}}return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError()};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort()}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort()}}value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}}else{if(charCode==34){break}charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index)}value+=source.slice(begin,Index)}}if(source.charCodeAt(Index)==34){Index++;return value}abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index)}if(charCode>=48&&charCode<=57){if(charCode==48&&(charCode=source.charCodeAt(Index+1),charCode>=48&&charCode<=57)){abort()}isSigned=false;for(;Index<length&&(charCode=source.charCodeAt(Index),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++}for(position=Index;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}return+source.slice(begin,Index)}if(isSigned){abort()}if(source.slice(Index,Index+4)=="true"){Index+=4;return true}else if(source.slice(Index,Index+5)=="false"){Index+=5;return false}else if(source.slice(Index,Index+4)=="null"){Index+=4;return null}abort()}}return"$"};var get=function(value){var results,hasMembers;if(value=="$"){abort()}if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1)}if(value=="["){results=[];for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="]"){break}if(hasMembers){if(value==","){value=lex();if(value=="]"){abort()}}else{abort()}}if(value==","){abort()}results.push(get(value))}return results}else if(value=="{"){results={};for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="}"){break}if(hasMembers){if(value==","){value=lex();if(value=="}"){abort()}}else{abort()}}if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort()}results[value.slice(1)]=get(lex())}return results}abort()}return value};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undef){delete source[property]}else{source[property]=element}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(value,length,callback)}}else{forEach(value,function(property){update(value,property,callback)})}}return callback.call(source,property,value)};exports.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort()}Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}exports["runInContext"]=runInContext;return exports}if(freeExports&&!isLoader){runInContext(root,freeExports)}else{var nativeJSON=root.JSON,previousJSON=root["JSON3"],isRestored=false;var JSON3=runInContext(root,root["JSON3"]={noConflict:function(){if(!isRestored){isRestored=true;root.JSON=nativeJSON;root["JSON3"]=previousJSON;nativeJSON=previousJSON=null}return JSON3}});root.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}if(isLoader){define(function(){return JSON3})}}).call(this)}).call(exports,__webpack_require__(12)(module),function(){return this}())},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];module.children=[];module.webpackPolyfill=1}return module}},function(module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports,__webpack_require__){(function(global){var isArray=__webpack_require__(15);var isBuf=__webpack_require__(16);exports.deconstructPacket=function(packet){var buffers=[];var packetData=packet.data;function _deconstructPacket(data){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:true,num:buffers.length};buffers.push(data);return placeholder}else if(isArray(data)){var newData=new Array(data.length);for(var i=0;i<data.length;i++){newData[i]=_deconstructPacket(data[i])}return newData}else if("object"==typeof data&&!(data instanceof Date)){var newData={};for(var key in data){newData[key]=_deconstructPacket(data[key])}return newData}return data}var pack=packet;pack.data=_deconstructPacket(packetData);pack.attachments=buffers.length;return{packet:pack,buffers:buffers}};exports.reconstructPacket=function(packet,buffers){var curPlaceHolder=0;function _reconstructPacket(data){if(data&&data._placeholder){var buf=buffers[data.num];return buf}else if(isArray(data)){for(var i=0;i<data.length;i++){data[i]=_reconstructPacket(data[i])}return data}else if(data&&"object"==typeof data){for(var key in data){data[key]=_reconstructPacket(data[key])}return data}return data}packet.data=_reconstructPacket(packet.data);packet.attachments=undefined;return packet};exports.removeBlobs=function(data,callback){function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if(global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader;fileReader.onload=function(){if(containingObject){containingObject[curKey]=this.result}else{bloblessData=this.result}if(!--pendingBlobs){callback(bloblessData)}};fileReader.readAsArrayBuffer(obj)}else if(isArray(obj)){for(var i=0;i<obj.length;i++){_removeBlobs(obj[i],i,obj)}}else if(obj&&"object"==typeof obj&&!isBuf(obj)){for(var key in obj){_removeBlobs(obj[key],key,obj)}}}var pendingBlobs=0;var bloblessData=data;_removeBlobs(bloblessData);if(!pendingBlobs){callback(bloblessData)}}}).call(exports,function(){return this}())},function(module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},function(module,exports){(function(global){module.exports=isBuf;function isBuf(obj){return global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var eio=__webpack_require__(18);var Socket=__webpack_require__(44);var Emitter=__webpack_require__(35);var parser=__webpack_require__(7);var on=__webpack_require__(46);var bind=__webpack_require__(47);var debug=__webpack_require__(3)("socket.io-client:manager");var indexOf=__webpack_require__(42);var Backoff=__webpack_require__(48);var has=Object.prototype.hasOwnProperty;module.exports=Manager;function Manager(uri,opts){if(!(this instanceof Manager))return new Manager(uri,opts);if(uri&&"object"===(typeof uri==="undefined"?"undefined":_typeof(uri))){opts=uri;uri=undefined}opts=opts||{};opts.path=opts.path||"/socket.io";this.nsps={};this.subs=[];this.opts=opts;this.reconnection(opts.reconnection!==false);this.reconnectionAttempts(opts.reconnectionAttempts||Infinity);this.reconnectionDelay(opts.reconnectionDelay||1e3);this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3);this.randomizationFactor(opts.randomizationFactor||.5);this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==opts.timeout?2e4:opts.timeout);this.readyState="closed";this.uri=uri;this.connecting=[];this.lastPing=null;this.encoding=false;this.packetBuffer=[];this.encoder=new parser.Encoder;this.decoder=new parser.Decoder;this.autoConnect=opts.autoConnect!==false;if(this.autoConnect)this.open()}Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)}}};Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].id=this.engine.id}}};Emitter(Manager.prototype);Manager.prototype.reconnection=function(v){if(!arguments.length)return this._reconnection;this._reconnection=!!v;return this};Manager.prototype.reconnectionAttempts=function(v){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=v;return this};Manager.prototype.reconnectionDelay=function(v){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=v;this.backoff&&this.backoff.setMin(v);return this};Manager.prototype.randomizationFactor=function(v){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=v;this.backoff&&this.backoff.setJitter(v);return this};Manager.prototype.reconnectionDelayMax=function(v){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=v;this.backoff&&this.backoff.setMax(v);return this};Manager.prototype.timeout=function(v){if(!arguments.length)return this._timeout;this._timeout=v;return this};Manager.prototype.maybeReconnectOnOpen=function(){if(!this.reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect()}};Manager.prototype.open=Manager.prototype.connect=function(fn,opts){debug("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri);this.engine=eio(this.uri,this.opts);var socket=this.engine;var self=this;this.readyState="opening";this.skipReconnect=false;var openSub=on(socket,"open",function(){self.onopen();fn&&fn()});var errorSub=on(socket,"error",function(data){debug("connect_error");self.cleanup();self.readyState="closed";self.emitAll("connect_error",data);if(fn){var err=new Error("Connection error");err.data=data;fn(err)}else{self.maybeReconnectOnOpen()}});if(false!==this._timeout){var timeout=this._timeout;debug("connect attempt will timeout after %d",timeout);var timer=setTimeout(function(){debug("connect attempt timed out after %d",timeout);openSub.destroy();socket.close();socket.emit("error","timeout");self.emitAll("connect_timeout",timeout)},timeout);this.subs.push({destroy:function destroy(){clearTimeout(timer)}})}this.subs.push(openSub);this.subs.push(errorSub);return this};Manager.prototype.onopen=function(){debug("open");this.cleanup();this.readyState="open";this.emit("open");var socket=this.engine;this.subs.push(on(socket,"data",bind(this,"ondata")));this.subs.push(on(socket,"ping",bind(this,"onping")));this.subs.push(on(socket,"pong",bind(this,"onpong")));this.subs.push(on(socket,"error",bind(this,"onerror")));this.subs.push(on(socket,"close",bind(this,"onclose")));this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded")))};Manager.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Manager.prototype.ondata=function(data){this.decoder.add(data)};Manager.prototype.ondecoded=function(packet){this.emit("packet",packet)};Manager.prototype.onerror=function(err){debug("error",err);this.emitAll("error",err)};Manager.prototype.socket=function(nsp,opts){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp,opts);this.nsps[nsp]=socket;var self=this;socket.on("connecting",onConnecting);socket.on("connect",function(){socket.id=self.engine.id});if(this.autoConnect){onConnecting()}}function onConnecting(){if(!~indexOf(self.connecting,socket)){self.connecting.push(socket)}}return socket};Manager.prototype.destroy=function(socket){var index=indexOf(this.connecting,socket);if(~index)this.connecting.splice(index,1);if(this.connecting.length)return;this.close()};Manager.prototype.packet=function(packet){debug("writing packet %j",packet);var self=this;if(packet.query&&packet.type===0)packet.nsp+="?"+packet.query;if(!self.encoding){self.encoding=true;this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++){self.engine.write(encodedPackets[i],packet.options)}self.encoding=false;self.processPacketQueue()})}else{self.packetBuffer.push(packet)}};Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack)}};Manager.prototype.cleanup=function(){debug("cleanup");var subsLength=this.subs.length;for(var i=0;i<subsLength;i++){var sub=this.subs.shift();sub.destroy()}this.packetBuffer=[];this.encoding=false;this.lastPing=null;this.decoder.destroy()};Manager.prototype.close=Manager.prototype.disconnect=function(){debug("disconnect");this.skipReconnect=true;this.reconnecting=false;if("opening"===this.readyState){this.cleanup()}this.backoff.reset();this.readyState="closed";if(this.engine)this.engine.close()};Manager.prototype.onclose=function(reason){debug("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",reason);if(this._reconnection&&!this.skipReconnect){this.reconnect()}};Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts){debug("reconnect failed");this.backoff.reset();this.emitAll("reconnect_failed");this.reconnecting=false}else{var delay=this.backoff.duration();debug("will wait %dms before reconnect attempt",delay);this.reconnecting=true;var timer=setTimeout(function(){if(self.skipReconnect)return;debug("attempting reconnect");self.emitAll("reconnect_attempt",self.backoff.attempts);self.emitAll("reconnecting",self.backoff.attempts);if(self.skipReconnect)return;self.open(function(err){if(err){debug("reconnect attempt error");self.reconnecting=false;self.reconnect();self.emitAll("reconnect_error",err.data)}else{debug("reconnect success");self.onreconnect()}})},delay);this.subs.push({destroy:function destroy(){clearTimeout(timer)}})}};Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=false;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",attempt)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(19)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(20);module.exports.parser=__webpack_require__(27)},function(module,exports,__webpack_require__){(function(global){var transports=__webpack_require__(21);var Emitter=__webpack_require__(35);var debug=__webpack_require__(3)("engine.io-client:socket");var index=__webpack_require__(42);var parser=__webpack_require__(27);var parseuri=__webpack_require__(2);var parsejson=__webpack_require__(43);var parseqs=__webpack_require__(36);module.exports=Socket;function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);opts=opts||{};if(uri&&"object"===typeof uri){opts=uri;uri=null}if(uri){uri=parseuri(uri);opts.hostname=uri.host;opts.secure=uri.protocol==="https"||uri.protocol==="wss";opts.port=uri.port;if(uri.query)opts.query=uri.query}else if(opts.host){opts.hostname=parseuri(opts.host).host}this.secure=null!=opts.secure?opts.secure:global.location&&"https:"===location.protocol;if(opts.hostname&&!opts.port){opts.port=this.secure?"443":"80"}this.agent=opts.agent||false;this.hostname=opts.hostname||(global.location?location.hostname:"localhost");this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80);this.query=opts.query||{};if("string"===typeof this.query)this.query=parseqs.decode(this.query);this.upgrade=false!==opts.upgrade;this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!opts.forceJSONP;this.jsonp=false!==opts.jsonp;this.forceBase64=!!opts.forceBase64;this.enablesXDR=!!opts.enablesXDR;this.timestampParam=opts.timestampParam||"t";this.timestampRequests=opts.timestampRequests;this.transports=opts.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.prevBufferLen=0;this.policyPort=opts.policyPort||843;this.rememberUpgrade=opts.rememberUpgrade||false;this.binaryType=null;this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades;this.perMessageDeflate=false!==opts.perMessageDeflate?opts.perMessageDeflate||{}:false;if(true===this.perMessageDeflate)this.perMessageDeflate={};if(this.perMessageDeflate&&null==this.perMessageDeflate.threshold){this.perMessageDeflate.threshold=1024}this.pfx=opts.pfx||null;this.key=opts.key||null;this.passphrase=opts.passphrase||null;this.cert=opts.cert||null;this.ca=opts.ca||null;this.ciphers=opts.ciphers||null;this.rejectUnauthorized=opts.rejectUnauthorized===undefined?null:opts.rejectUnauthorized;this.forceNode=!!opts.forceNode;var freeGlobal=typeof global==="object"&&global;if(freeGlobal.global===freeGlobal){if(opts.extraHeaders&&Object.keys(opts.extraHeaders).length>0){this.extraHeaders=opts.extraHeaders}if(opts.localAddress){this.localAddress=opts.localAddress}}this.id=null;this.upgrades=null;this.pingInterval=null;this.pingTimeout=null;this.pingIntervalTimer=null;this.pingTimeoutTimer=null;this.open()}Socket.priorWebsocketSuccess=false;Emitter(Socket.prototype);Socket.protocol=parser.protocol;Socket.Socket=Socket;Socket.Transport=__webpack_require__(26);Socket.transports=__webpack_require__(21);Socket.parser=__webpack_require__(27);Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol;query.transport=name;if(this.id)query.sid=this.id;var transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return transport};function clone(obj){var o={};for(var i in obj){if(obj.hasOwnProperty(i)){o[i]=obj[i]}}return o}Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1){transport="websocket"}else if(0===this.transports.length){var self=this;setTimeout(function(){self.emit("error","No transports available")},0);return}else{transport=this.transports[0]}this.readyState="opening";try{transport=this.createTransport(transport)}catch(e){this.transports.shift();this.open();return}transport.open();this.setTransport(transport)};Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name);var self=this;if(this.transport){debug("clearing existing transport %s",this.transport.name);this.transport.removeAllListeners()}this.transport=transport;transport.on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})};Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1});var failed=false;var self=this;Socket.priorWebsocketSuccess=false;function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary}if(failed)return;debug('probe transport "%s" opened',name);transport.send([{type:"ping",data:"probe"}]);transport.once("packet",function(msg){if(failed)return;if("pong"===msg.type&&"probe"===msg.data){debug('probe transport "%s" pong',name);self.upgrading=true;self.emit("upgrading",transport);if(!transport)return;Socket.priorWebsocketSuccess="websocket"===transport.name;debug('pausing current transport "%s"',self.transport.name);self.transport.pause(function(){if(failed)return;if("closed"===self.readyState)return;debug("changing transport and sending upgrade packet");cleanup();self.setTransport(transport);transport.send([{type:"upgrade"}]);self.emit("upgrade",transport);transport=null;self.upgrading=false;self.flush()})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name;self.emit("upgradeError",err)}})}function freezeTransport(){if(failed)return;failed=true;cleanup();transport.close();transport=null}function onerror(err){var error=new Error("probe error: "+err);error.transport=transport.name;freezeTransport();debug('probe transport "%s" failed because of error: %s',name,err);self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){if(transport&&to.name!==transport.name){debug('"%s" works - aborting "%s"',to.name,transport.name);freezeTransport()}}function cleanup(){transport.removeListener("open",onTransportOpen);transport.removeListener("error",onerror);transport.removeListener("close",onTransportClose);self.removeListener("close",onclose);self.removeListener("upgrading",onupgrade)}transport.once("open",onTransportOpen);transport.once("error",onerror);transport.once("close",onTransportClose);this.once("close",onclose);this.once("upgrading",onupgrade);transport.open()};Socket.prototype.onOpen=function(){debug("socket open");this.readyState="open";Socket.priorWebsocketSuccess="websocket"===this.transport.name;this.emit("open");this.flush();if("open"===this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;i<l;i++){this.probe(this.upgrades[i])}}};Socket.prototype.onPacket=function(packet){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){debug('socket receive: type "%s", data "%s"',packet.type,packet.data);this.emit("packet",packet);this.emit("heartbeat");switch(packet.type){case"open":this.onHandshake(parsejson(packet.data));break;case"pong":this.setPing();this.emit("pong");break;case"error":var err=new Error("server error");err.code=packet.data;this.onError(err);break;case"message":this.emit("data",packet.data);this.emit("message",packet.data);break}}else{debug('packet received with socket readyState "%s"',this.readyState)}};Socket.prototype.onHandshake=function(data){this.emit("handshake",data);this.id=data.sid;this.transport.query.sid=data.sid;this.upgrades=this.filterUpgrades(data.upgrades);
this.pingInterval=data.pingInterval;this.pingTimeout=data.pingTimeout;this.onOpen();if("closed"===this.readyState)return;this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){if("closed"===self.readyState)return;self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)};Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout)},self.pingInterval)};Socket.prototype.ping=function(){var self=this;this.sendPacket("ping",function(){self.emit("ping")})};Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(0===this.writeBuffer.length){this.emit("drain")}else{this.flush()}};Socket.prototype.flush=function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){debug("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};Socket.prototype.write=Socket.prototype.send=function(msg,options,fn){this.sendPacket("message",msg,options,fn);return this};Socket.prototype.sendPacket=function(type,data,options,fn){if("function"===typeof data){fn=data;data=undefined}if("function"===typeof options){fn=options;options=null}if("closing"===this.readyState||"closed"===this.readyState){return}options=options||{};options.compress=false!==options.compress;var packet={type:type,data:data,options:options};this.emit("packetCreate",packet);this.writeBuffer.push(packet);if(fn)this.once("flush",fn);this.flush()};Socket.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var self=this;if(this.writeBuffer.length){this.once("drain",function(){if(this.upgrading){waitForUpgrade()}else{close()}})}else if(this.upgrading){waitForUpgrade()}else{close()}}function close(){self.onClose("forced close");debug("socket closing - telling transport to close");self.transport.close()}function cleanupAndClose(){self.removeListener("upgrade",cleanupAndClose);self.removeListener("upgradeError",cleanupAndClose);close()}function waitForUpgrade(){self.once("upgrade",cleanupAndClose);self.once("upgradeError",cleanupAndClose)}return this};Socket.prototype.onError=function(err){debug("socket error %j",err);Socket.priorWebsocketSuccess=false;this.emit("error",err);this.onClose("transport error",err)};Socket.prototype.onClose=function(reason,desc){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",reason,desc);self.writeBuffer=[];self.prevBufferLen=0}};Socket.prototype.filterUpgrades=function(upgrades){var filteredUpgrades=[];for(var i=0,j=upgrades.length;i<j;i++){if(~index(this.transports,upgrades[i]))filteredUpgrades.push(upgrades[i])}return filteredUpgrades}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){var XMLHttpRequest=__webpack_require__(22);var XHR=__webpack_require__(24);var JSONP=__webpack_require__(39);var websocket=__webpack_require__(40);exports.polling=polling;exports.websocket=websocket;function polling(opts){var xhr;var xd=false;var xs=false;var jsonp=false!==opts.jsonp;if(global.location){var isSSL="https:"===location.protocol;var port=location.port;if(!port){port=isSSL?443:80}xd=opts.hostname!==location.hostname||port!==opts.port;xs=opts.secure!==isSSL}opts.xdomain=xd;opts.xscheme=xs;xhr=new XMLHttpRequest(opts);if("open"in xhr&&!opts.forceJSONP){return new XHR(opts)}else{if(!jsonp)throw new Error("JSONP disabled");return new JSONP(opts)}}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){var hasCORS=__webpack_require__(23);module.exports=function(opts){var xdomain=opts.xdomain;var xscheme=opts.xscheme;var enablesXDR=opts.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!xdomain||hasCORS)){return new XMLHttpRequest}}catch(e){}try{if("undefined"!==typeof XDomainRequest&&!xscheme&&enablesXDR){return new XDomainRequest}}catch(e){}if(!xdomain){try{return new(global[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}}).call(exports,function(){return this}())},function(module,exports){try{module.exports=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch(err){module.exports=false}},function(module,exports,__webpack_require__){(function(global){var XMLHttpRequest=__webpack_require__(22);var Polling=__webpack_require__(25);var Emitter=__webpack_require__(35);var inherit=__webpack_require__(37);var debug=__webpack_require__(3)("engine.io-client:polling-xhr");module.exports=XHR;module.exports.Request=Request;function empty(){}function XHR(opts){Polling.call(this,opts);this.requestTimeout=opts.requestTimeout;if(global.location){var isSSL="https:"===location.protocol;var port=location.port;if(!port){port=isSSL?443:80}this.xd=opts.hostname!==global.location.hostname||port!==opts.port;this.xs=opts.secure!==isSSL}else{this.extraHeaders=opts.extraHeaders}}inherit(XHR,Polling);XHR.prototype.supportsBinary=true;XHR.prototype.request=function(opts){opts=opts||{};opts.uri=this.uri();opts.xd=this.xd;opts.xs=this.xs;opts.agent=this.agent||false;opts.supportsBinary=this.supportsBinary;opts.enablesXDR=this.enablesXDR;opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;opts.requestTimeout=this.requestTimeout;opts.extraHeaders=this.extraHeaders;return new Request(opts)};XHR.prototype.doWrite=function(data,fn){var isBinary=typeof data!=="string"&&data!==undefined;var req=this.request({method:"POST",data:data,isBinary:isBinary});var self=this;req.on("success",fn);req.on("error",function(err){self.onError("xhr post error",err)});this.sendXhr=req};XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request();var self=this;req.on("data",function(data){self.onData(data)});req.on("error",function(err){self.onError("xhr poll error",err)});this.pollXhr=req};function Request(opts){this.method=opts.method||"GET";this.uri=opts.uri;this.xd=!!opts.xd;this.xs=!!opts.xs;this.async=false!==opts.async;this.data=undefined!==opts.data?opts.data:null;this.agent=opts.agent;this.isBinary=opts.isBinary;this.supportsBinary=opts.supportsBinary;this.enablesXDR=opts.enablesXDR;this.requestTimeout=opts.requestTimeout;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.extraHeaders=opts.extraHeaders;this.create()}Emitter(Request.prototype);Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts);var self=this;try{debug("xhr open %s: %s",this.method,this.uri);xhr.open(this.method,this.uri,this.async);try{if(this.extraHeaders){xhr.setDisableHeaderCheck(true);for(var i in this.extraHeaders){if(this.extraHeaders.hasOwnProperty(i)){xhr.setRequestHeader(i,this.extraHeaders[i])}}}}catch(e){}if(this.supportsBinary){xhr.responseType="arraybuffer"}if("POST"===this.method){try{if(this.isBinary){xhr.setRequestHeader("Content-type","application/octet-stream")}else{xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}}catch(e){}}try{xhr.setRequestHeader("Accept","*/*")}catch(e){}if("withCredentials"in xhr){xhr.withCredentials=true}if(this.requestTimeout){xhr.timeout=this.requestTimeout}if(this.hasXDR()){xhr.onload=function(){self.onLoad()};xhr.onerror=function(){self.onError(xhr.responseText)}}else{xhr.onreadystatechange=function(){if(4!==xhr.readyState)return;if(200===xhr.status||1223===xhr.status){self.onLoad()}else{setTimeout(function(){self.onError(xhr.status)},0)}}}debug("xhr data %s",this.data);xhr.send(this.data)}catch(e){setTimeout(function(){self.onError(e)},0);return}if(global.document){this.index=Request.requestsCount++;Request.requests[this.index]=this}};Request.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Request.prototype.onData=function(data){this.emit("data",data);this.onSuccess()};Request.prototype.onError=function(err){this.emit("error",err);this.cleanup(true)};Request.prototype.cleanup=function(fromError){if("undefined"===typeof this.xhr||null===this.xhr){return}if(this.hasXDR()){this.xhr.onload=this.xhr.onerror=empty}else{this.xhr.onreadystatechange=empty}if(fromError){try{this.xhr.abort()}catch(e){}}if(global.document){delete Request.requests[this.index]}this.xhr=null};Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if(contentType==="application/octet-stream"){data=this.xhr.response||this.xhr.responseText}else{if(!this.supportsBinary){data=this.xhr.responseText}else{try{data=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){var ui8Arr=new Uint8Array(this.xhr.response);var dataArray=[];for(var idx=0,length=ui8Arr.length;idx<length;idx++){dataArray.push(ui8Arr[idx])}data=String.fromCharCode.apply(null,dataArray)}}}}catch(e){this.onError(e)}if(null!=data){this.onData(data)}};Request.prototype.hasXDR=function(){return"undefined"!==typeof global.XDomainRequest&&!this.xs&&this.enablesXDR};Request.prototype.abort=function(){this.cleanup()};Request.requestsCount=0;Request.requests={};if(global.document){if(global.attachEvent){global.attachEvent("onunload",unloadHandler)}else if(global.addEventListener){global.addEventListener("beforeunload",unloadHandler,false)}}function unloadHandler(){for(var i in Request.requests){if(Request.requests.hasOwnProperty(i)){Request.requests[i].abort()}}}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var Transport=__webpack_require__(26);var parseqs=__webpack_require__(36);var parser=__webpack_require__(27);var inherit=__webpack_require__(37);var yeast=__webpack_require__(38);var debug=__webpack_require__(3)("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){var XMLHttpRequest=__webpack_require__(22);var xhr=new XMLHttpRequest({xdomain:false});return null!=xhr.responseType}();function Polling(opts){var forceBase64=opts&&opts.forceBase64;if(!hasXHR2||forceBase64){this.supportsBinary=false}Transport.call(this,opts)}inherit(Polling,Transport);Polling.prototype.name="polling";Polling.prototype.doOpen=function(){this.poll()};Polling.prototype.pause=function(onPause){var self=this;this.readyState="pausing";function pause(){debug("paused");self.readyState="paused";onPause()}if(this.polling||!this.writable){var total=0;if(this.polling){debug("we are currently polling - waiting to pause");total++;this.once("pollComplete",function(){debug("pre-pause polling complete");--total||pause()})}if(!this.writable){debug("we are currently writing - waiting to pause");total++;this.once("drain",function(){debug("pre-pause writing complete");--total||pause()})}}else{pause()}};Polling.prototype.poll=function(){debug("polling");this.polling=true;this.doPoll();this.emit("poll")};Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data);var callback=function(packet,index,total){if("opening"===self.readyState){self.onOpen()}if("close"===packet.type){self.onClose();return false}self.onPacket(packet)};parser.decodePayload(data,this.socket.binaryType,callback);if("closed"!==this.readyState){this.polling=false;this.emit("pollComplete");if("open"===this.readyState){this.poll()}else{debug('ignoring poll - transport state "%s"',this.readyState)}}};Polling.prototype.doClose=function(){var self=this;function close(){debug("writing close packet");self.write([{type:"close"}])}if("open"===this.readyState){debug("transport open - closing");close()}else{debug("transport not open - deferring close");this.once("open",close)}};Polling.prototype.write=function(packets){var self=this;this.writable=false;var callbackfn=function(){self.writable=true;self.emit("drain")};parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})};Polling.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"https":"http";var port="";if(false!==this.timestampRequests){query[this.timestampParam]=yeast()}if(!this.supportsBinary&&!query.sid){query.b64=1}query=parseqs.encode(query);if(this.port&&("https"===schema&&Number(this.port)!==443||"http"===schema&&Number(this.port)!==80)){port=":"+this.port}if(query.length){query="?"+query}var ipv6=this.hostname.indexOf(":")!==-1;return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query}},function(module,exports,__webpack_require__){var parser=__webpack_require__(27);var Emitter=__webpack_require__(35);module.exports=Transport;function Transport(opts){this.path=opts.path;this.hostname=opts.hostname;this.port=opts.port;this.secure=opts.secure;this.query=opts.query;this.timestampParam=opts.timestampParam;this.timestampRequests=opts.timestampRequests;this.readyState="";this.agent=opts.agent||false;this.socket=opts.socket;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.forceNode=opts.forceNode;this.extraHeaders=opts.extraHeaders;this.localAddress=opts.localAddress}Emitter(Transport.prototype);Transport.prototype.onError=function(msg,desc){var err=new Error(msg);err.type="TransportError";err.description=desc;this.emit("error",err);return this};Transport.prototype.open=function(){if("closed"===this.readyState||""===this.readyState){this.readyState="opening";this.doOpen()}return this};Transport.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.doClose();this.onClose()}return this};Transport.prototype.send=function(packets){if("open"===this.readyState){this.write(packets)}else{throw new Error("Transport not open")}};Transport.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet)};Transport.prototype.onPacket=function(packet){this.emit("packet",packet)};Transport.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},function(module,exports,__webpack_require__){(function(global){var keys=__webpack_require__(28);var hasBinary=__webpack_require__(29);var sliceBuffer=__webpack_require__(30);var after=__webpack_require__(31);var utf8=__webpack_require__(32);var base64encoder;if(global&&global.ArrayBuffer){base64encoder=__webpack_require__(33)}var isAndroid=typeof navigator!=="undefined"&&/Android/i.test(navigator.userAgent);var isPhantomJS=typeof navigator!=="undefined"&&/PhantomJS/i.test(navigator.userAgent);var dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=keys(packets);var err={type:"error",data:"parser error"};var Blob=__webpack_require__(34);exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){if("function"==typeof supportsBinary){callback=supportsBinary;supportsBinary=false}if("function"==typeof utf8encode){callback=utf8encode;utf8encode=null}var data=packet.data===undefined?undefined:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer){return encodeArrayBuffer(packet,supportsBinary,callback)}else if(Blob&&data instanceof global.Blob){return encodeBlob(packet,supportsBinary,callback)}if(data&&data.base64){return encodeBase64Object(packet,callback)}var encoded=packets[packet.type];if(undefined!==packet.data){encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data)}return callback(""+encoded)};function encodeBase64Object(packet,callback){var message="b"+exports.packets[packet.type]+packet.data.data;return callback(message)}function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}var data=packet.data;var contentArray=new Uint8Array(data);var resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++){resultBuffer[i+1]=contentArray[i]}return callback(resultBuffer.buffer)}function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}var fr=new FileReader;fr.onload=function(){packet.data=fr.result;exports.encodePacket(packet,supportsBinary,true,callback)};return fr.readAsArrayBuffer(packet.data)}function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}if(dontSendBlobs){return encodeBlobAsArrayBuffer(packet,supportsBinary,callback)}var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob)}exports.encodeBase64Packet=function(packet,callback){var message="b"+exports.packets[packet.type];if(Blob&&packet.data instanceof global.Blob){var fr=new FileReader;fr.onload=function(){var b64=fr.result.split(",")[1];callback(message+b64)};return fr.readAsDataURL(packet.data)}var b64data;try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){var typed=new Uint8Array(packet.data);var basic=new Array(typed.length);for(var i=0;i<typed.length;i++){basic[i]=typed[i]}b64data=String.fromCharCode.apply(null,basic)}message+=global.btoa(b64data);return callback(message)};exports.decodePacket=function(data,binaryType,utf8decode){if(data===undefined){return err}if(typeof data=="string"){if(data.charAt(0)=="b"){return exports.decodeBase64Packet(data.substr(1),binaryType)}if(utf8decode){data=tryDecode(data);if(data===false){return err}}var type=data.charAt(0);if(Number(type)!=type||!packetslist[type]){return err}if(data.length>1){return{type:packetslist[type],data:data.substring(1)}}else{return{type:packetslist[type]}}}var asArray=new Uint8Array(data);var type=asArray[0];var rest=sliceBuffer(data,1);if(Blob&&binaryType==="blob"){rest=new Blob([rest])}return{type:packetslist[type],data:rest}};function tryDecode(data){try{data=utf8.decode(data)}catch(e){return false}return data}exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!base64encoder){return{type:type,data:{base64:true,data:msg.substr(1)}}}var data=base64encoder.decode(msg.substr(1));if(binaryType==="blob"&&Blob){data=new Blob([data])}return{type:type,data:data}};exports.encodePayload=function(packets,supportsBinary,callback){if(typeof supportsBinary=="function"){callback=supportsBinary;supportsBinary=null}var isBinary=hasBinary(packets);if(supportsBinary&&isBinary){if(Blob&&!dontSendBlobs){return exports.encodePayloadAsBlob(packets,callback)}return exports.encodePayloadAsArrayBuffer(packets,callback)}if(!packets.length){return callback("0:")}function setLengthHeader(message){return message.length+":"+message}function encodeOne(packet,doneCallback){exports.encodePacket(packet,!isBinary?false:supportsBinary,true,function(message){doneCallback(null,setLengthHeader(message))})}map(packets,encodeOne,function(err,results){return callback(results.join(""))})};function map(ary,each,done){var result=new Array(ary.length);var next=after(ary.length,done);var eachWithIndex=function(i,el,cb){each(el,function(error,msg){result[i]=msg;cb(error,result)})};for(var i=0;i<ary.length;i++){eachWithIndex(i,ary[i],next)}}exports.decodePayload=function(data,binaryType,callback){if(typeof data!="string"){return exports.decodePayloadAsBinary(data,binaryType,callback)}if(typeof binaryType==="function"){callback=binaryType;binaryType=null}var packet;if(data==""){return callback(err,0,1)}var length="",n,msg;for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"!=chr){length+=chr}else{if(""==length||length!=(n=Number(length))){return callback(err,0,1)}msg=data.substr(i+1,n);if(length!=msg.length){return callback(err,0,1)}if(msg.length){packet=exports.decodePacket(msg,binaryType,true);if(err.type==packet.type&&err.data==packet.data){return callback(err,0,1)}var ret=callback(packet,i+n,l);if(false===ret)return}i+=n;length=""}}if(length!=""){return callback(err,0,1)}};exports.encodePayloadAsArrayBuffer=function(packets,callback){if(!packets.length){return callback(new ArrayBuffer(0))}function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(data){return doneCallback(null,data)})}map(packets,encodeOne,function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;if(typeof p==="string"){len=p.length}else{len=p.byteLength}return acc+len.toString().length+len+2},0);var resultArray=new Uint8Array(totalLength);var bufferIndex=0;encodedPackets.forEach(function(p){var isString=typeof p==="string";var ab=p;if(isString){var view=new Uint8Array(p.length);for(var i=0;i<p.length;i++){view[i]=p.charCodeAt(i)}ab=view.buffer}if(isString){resultArray[bufferIndex++]=0}else{resultArray[bufferIndex++]=1}var lenStr=ab.byteLength.toString();for(var i=0;i<lenStr.length;i++){resultArray[bufferIndex++]=parseInt(lenStr[i])}resultArray[bufferIndex++]=255;var view=new Uint8Array(ab);for(var i=0;i<view.length;i++){resultArray[bufferIndex++]=view[i]}});return callback(resultArray.buffer)})};exports.encodePayloadAsBlob=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(encoded){var binaryIdentifier=new Uint8Array(1);binaryIdentifier[0]=1;if(typeof encoded==="string"){var view=new Uint8Array(encoded.length);for(var i=0;i<encoded.length;i++){view[i]=encoded.charCodeAt(i)}encoded=view.buffer;binaryIdentifier[0]=0}var len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size;var lenStr=len.toString();var lengthAry=new Uint8Array(lenStr.length+1);for(var i=0;i<lenStr.length;i++){lengthAry[i]=parseInt(lenStr[i])}lengthAry[lenStr.length]=255;if(Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob)}})}map(packets,encodeOne,function(err,results){return callback(new Blob(results))})};exports.decodePayloadAsBinary=function(data,binaryType,callback){if(typeof binaryType==="function"){callback=binaryType;binaryType=null}var bufferTail=data;var buffers=[];var numberTooLong=false;while(bufferTail.byteLength>0){var tailArray=new Uint8Array(bufferTail);var isString=tailArray[0]===0;var msgLength="";for(var i=1;;i++){if(tailArray[i]==255)break;if(msgLength.length>310){numberTooLong=true;break}msgLength+=tailArray[i]}if(numberTooLong)return callback(err,0,1);bufferTail=sliceBuffer(bufferTail,2+msgLength.length);msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString){try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg);msg="";for(var i=0;i<typed.length;i++){msg+=String.fromCharCode(typed[i])}}}buffers.push(msg);bufferTail=sliceBuffer(bufferTail,msgLength)}var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,true),i,total)})}}).call(exports,function(){return this}())},function(module,exports){module.exports=Object.keys||function keys(obj){var arr=[];var has=Object.prototype.hasOwnProperty;for(var i in obj){if(has.call(obj,i)){arr.push(i)}}return arr}},function(module,exports,__webpack_require__){(function(global){var isArray=__webpack_require__(15);module.exports=hasBinary;function hasBinary(data){function _hasBinary(obj){if(!obj)return false;if(global.Buffer&&global.Buffer.isBuffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){return true}if(isArray(obj)){for(var i=0;i<obj.length;i++){if(_hasBinary(obj[i])){return true}}}else if(obj&&"object"==typeof obj){if(obj.toJSON&&"function"==typeof obj.toJSON){obj=obj.toJSON()}for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key])){return true}}}return false}return _hasBinary(data)}}).call(exports,function(){return this}())},function(module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;start=start||0;end=end||bytes;if(arraybuffer.slice){return arraybuffer.slice(start,end)}if(start<0){start+=bytes}if(end<0){end+=bytes}if(end>bytes){end=bytes}if(start>=bytes||start>=end||bytes===0){return new ArrayBuffer(0)}var abv=new Uint8Array(arraybuffer);var result=new Uint8Array(end-start);for(var i=start,ii=0;i<end;i++,ii++){result[ii]=abv[i]}return result.buffer}},function(module,exports){module.exports=after;function after(count,callback,err_cb){var bail=false;err_cb=err_cb||noop;proxy.count=count;return count===0?callback():proxy;function proxy(err,result){if(proxy.count<=0){throw new Error("after called too many times")}--proxy.count;if(err){bail=true;callback(err);callback=err_cb}else if(proxy.count===0&&!bail){callback(null,result)}}}function noop(){}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(module,global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){var length=array.length;var index=-1;var value;var output="";while(++index<length){value=array[index];if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value)}return output}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){if((codePoint&4294967168)==0){return stringFromCharCode(codePoint)}var symbol="";if((codePoint&4294965248)==0){symbol=stringFromCharCode(codePoint>>6&31|192)}else if((codePoint&4294901760)==0){symbol=stringFromCharCode(codePoint>>12&15|224);symbol+=createByte(codePoint,6)}else if((codePoint&4292870144)==0){symbol=stringFromCharCode(codePoint>>18&7|240);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6)}symbol+=stringFromCharCode(codePoint&63|128);return symbol}function wtf8encode(string){var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString="";while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint)}return byteString}function readContinuationByte(){if(byteIndex>=byteCount){throw Error("Invalid byte index")}var continuationByte=byteArray[byteIndex]&255;byteIndex++;if((continuationByte&192)==128){return continuationByte&63}throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount){throw Error("Invalid byte index")}if(byteIndex==byteCount){return false}byte1=byteArray[byteIndex]&255;byteIndex++;if((byte1&128)==0){return byte1}if((byte1&224)==192){var byte2=readContinuationByte();codePoint=(byte1&31)<<6|byte2;if(codePoint>=128){return codePoint}else{throw Error("Invalid continuation byte")}}if((byte1&240)==224){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=(byte1&15)<<12|byte2<<6|byte3;if(codePoint>=2048){return codePoint}else{throw Error("Invalid continuation byte")}}if((byte1&248)==240){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=(byte1&15)<<18|byte2<<12|byte3<<6|byte4;if(codePoint>=65536&&codePoint<=1114111){return codePoint}}throw Error("Invalid WTF-8 detected")}var byteArray;var byteCount;var byteIndex;function wtf8decode(byteString){byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while((tmp=decodeSymbol())!==false){codePoints.push(tmp)}return ucs2encode(codePoints)}var wtf8={version:"1.0.0",encode:wtf8encode,decode:wtf8decode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return wtf8}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=wtf8}else{var object={};var hasOwnProperty=object.hasOwnProperty;for(var key in wtf8){hasOwnProperty.call(wtf8,key)&&(freeExports[key]=wtf8[key])}}}else{root.wtf8=wtf8}})(this)}).call(exports,__webpack_require__(12)(module),function(){return this}())},function(module,exports){(function(){"use strict";var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var lookup=new Uint8Array(256);for(var i=0;i<chars.length;i++){lookup[chars.charCodeAt(i)]=i}exports.encode=function(arraybuffer){var bytes=new Uint8Array(arraybuffer),i,len=bytes.length,base64="";for(i=0;i<len;i+=3){base64+=chars[bytes[i]>>2];base64+=chars[(bytes[i]&3)<<4|bytes[i+1]>>4];base64+=chars[(bytes[i+1]&15)<<2|bytes[i+2]>>6];base64+=chars[bytes[i+2]&63]}if(len%3===2){base64=base64.substring(0,base64.length-1)+"="}else if(len%3===1){base64=base64.substring(0,base64.length-2)+"=="}return base64};exports.decode=function(base64){var bufferLength=base64.length*.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;if(base64[base64.length-1]==="="){bufferLength--;if(base64[base64.length-2]==="="){bufferLength--}}var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4){encoded1=lookup[base64.charCodeAt(i)];encoded2=lookup[base64.charCodeAt(i+1)];encoded3=lookup[base64.charCodeAt(i+2)];encoded4=lookup[base64.charCodeAt(i+3)];bytes[p++]=encoded1<<2|encoded2>>4;bytes[p++]=(encoded2&15)<<4|encoded3>>2;bytes[p++]=(encoded3&3)<<6|encoded4&63}return arraybuffer}})()},function(module,exports){(function(global){var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder;var blobSupported=function(){try{var a=new Blob(["hi"]);return a.size===2}catch(e){return false}}();var blobSupportsArrayBufferView=blobSupported&&function(){try{var b=new Blob([new Uint8Array([1,2])]);return b.size===2}catch(e){return false}}();var blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(ary){for(var i=0;i<ary.length;i++){var chunk=ary[i];if(chunk.buffer instanceof ArrayBuffer){var buf=chunk.buffer;if(chunk.byteLength!==buf.byteLength){var copy=new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength));buf=copy.buffer}ary[i]=buf}}}function BlobBuilderConstructor(ary,options){options=options||{};var bb=new BlobBuilder;mapArrayBufferViews(ary);for(var i=0;i<ary.length;i++){
bb.append(ary[i])}return options.type?bb.getBlob(options.type):bb.getBlob()}function BlobConstructor(ary,options){mapArrayBufferViews(ary);return new Blob(ary,options||{})}module.exports=function(){if(blobSupported){return blobSupportsArrayBufferView?global.Blob:BlobConstructor}else if(blobBuilderSupported){return BlobBuilderConstructor}else{return undefined}}()}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){if(true){module.exports=Emitter}function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports){exports.encode=function(obj){var str="";for(var i in obj){if(obj.hasOwnProperty(i)){if(str.length)str+="&";str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i])}}return str};exports.decode=function(qs){var qry={};var pairs=qs.split("&");for(var i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},function(module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn;a.prototype.constructor=a}},function(module,exports){"use strict";var alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0,prev;function encode(num){var encoded="";do{encoded=alphabet[num%length]+encoded;num=Math.floor(num/length)}while(num>0);return encoded}function decode(str){var decoded=0;for(i=0;i<str.length;i++){decoded=decoded*length+map[str.charAt(i)]}return decoded}function yeast(){var now=encode(+new Date);if(now!==prev)return seed=0,prev=now;return now+"."+encode(seed++)}for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode;yeast.decode=decode;module.exports=yeast},function(module,exports,__webpack_require__){(function(global){var Polling=__webpack_require__(25);var inherit=__webpack_require__(37);module.exports=JSONPPolling;var rNewline=/\n/g;var rEscapedNewline=/\\n/g;var callbacks;function empty(){}function JSONPPolling(opts){Polling.call(this,opts);this.query=this.query||{};if(!callbacks){if(!global.___eio)global.___eio=[];callbacks=global.___eio}this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)});this.query.j=this.index;if(global.document&&global.addEventListener){global.addEventListener("beforeunload",function(){if(self.script)self.script.onerror=empty},false)}}inherit(JSONPPolling,Polling);JSONPPolling.prototype.supportsBinary=false;JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null;this.iframe=null}Polling.prototype.doClose.call(this)};JSONPPolling.prototype.doPoll=function(){var self=this;var script=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}script.async=true;script.src=this.uri();script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];if(insertAt){insertAt.parentNode.insertBefore(script,insertAt)}else{(document.head||document.body).appendChild(script)}this.script=script;var isUAgecko="undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent);if(isUAgecko){setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)}};JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var form=document.createElement("form");var area=document.createElement("textarea");var id=this.iframeId="eio_iframe_"+this.index;var iframe;form.className="socketio";form.style.position="absolute";form.style.top="-1000px";form.style.left="-1000px";form.target=id;form.method="POST";form.setAttribute("accept-charset","utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.uri();function complete(){initIframe();fn()}function initIframe(){if(self.iframe){try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId;iframe.src="javascript:0"}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}initIframe();data=data.replace(rEscapedNewline,"\\\n");this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(self.iframe.readyState==="complete"){complete()}}}else{this.iframe.onload=complete}}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){var Transport=__webpack_require__(26);var parser=__webpack_require__(27);var parseqs=__webpack_require__(36);var inherit=__webpack_require__(37);var yeast=__webpack_require__(38);var debug=__webpack_require__(3)("engine.io-client:websocket");var BrowserWebSocket=global.WebSocket||global.MozWebSocket;var NodeWebSocket;if(typeof window==="undefined"){try{NodeWebSocket=__webpack_require__(41)}catch(e){}}var WebSocket=BrowserWebSocket;if(!WebSocket&&typeof window==="undefined"){WebSocket=NodeWebSocket}module.exports=WS;function WS(opts){var forceBase64=opts&&opts.forceBase64;if(forceBase64){this.supportsBinary=false}this.perMessageDeflate=opts.perMessageDeflate;this.usingBrowserWebSocket=BrowserWebSocket&&!opts.forceNode;if(!this.usingBrowserWebSocket){WebSocket=NodeWebSocket}Transport.call(this,opts)}inherit(WS,Transport);WS.prototype.name="websocket";WS.prototype.supportsBinary=true;WS.prototype.doOpen=function(){if(!this.check()){return}var uri=this.uri();var protocols=void 0;var opts={agent:this.agent,perMessageDeflate:this.perMessageDeflate};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;if(this.extraHeaders){opts.headers=this.extraHeaders}if(this.localAddress){opts.localAddress=this.localAddress}try{this.ws=this.usingBrowserWebSocket?new WebSocket(uri):new WebSocket(uri,protocols,opts)}catch(err){return this.emit("error",err)}if(this.ws.binaryType===undefined){this.supportsBinary=false}if(this.ws.supports&&this.ws.supports.binary){this.supportsBinary=true;this.ws.binaryType="nodebuffer"}else{this.ws.binaryType="arraybuffer"}this.addEventListeners()};WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen()};this.ws.onclose=function(){self.onClose()};this.ws.onmessage=function(ev){self.onData(ev.data)};this.ws.onerror=function(e){self.onError("websocket error",e)}};WS.prototype.write=function(packets){var self=this;this.writable=false;var total=packets.length;for(var i=0,l=total;i<l;i++){(function(packet){parser.encodePacket(packet,self.supportsBinary,function(data){if(!self.usingBrowserWebSocket){var opts={};if(packet.options){opts.compress=packet.options.compress}if(self.perMessageDeflate){var len="string"===typeof data?global.Buffer.byteLength(data):data.length;if(len<self.perMessageDeflate.threshold){opts.compress=false}}}try{if(self.usingBrowserWebSocket){self.ws.send(data)}else{self.ws.send(data,opts)}}catch(e){debug("websocket closed before onclose event")}--total||done()})})(packets[i])}function done(){self.emit("flush");setTimeout(function(){self.writable=true;self.emit("drain")},0)}};WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)};WS.prototype.doClose=function(){if(typeof this.ws!=="undefined"){this.ws.close()}};WS.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"wss":"ws";var port="";if(this.port&&("wss"===schema&&Number(this.port)!==443||"ws"===schema&&Number(this.port)!==80)){port=":"+this.port}if(this.timestampRequests){query[this.timestampParam]=yeast()}if(!this.supportsBinary){query.b64=1}query=parseqs.encode(query);if(query.length){query="?"+query}var ipv6=this.hostname.indexOf(":")!==-1;return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query};WS.prototype.check=function(){return!!WebSocket&&!("__initialize"in WebSocket&&this.name===WS.prototype.name)}}).call(exports,function(){return this}())},function(module,exports){},function(module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},function(module,exports){(function(global){var rvalidchars=/^[\],:{}\s]*$/;var rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g;var rtrimLeft=/^\s+/;var rtrimRight=/\s+$/;module.exports=function parsejson(data){if("string"!=typeof data||!data){return null}data=data.replace(rtrimLeft,"").replace(rtrimRight,"");if(global.JSON&&JSON.parse){return JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return new Function("return "+data)()}}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var parser=__webpack_require__(7);var Emitter=__webpack_require__(35);var toArray=__webpack_require__(45);var on=__webpack_require__(46);var bind=__webpack_require__(47);var debug=__webpack_require__(3)("socket.io-client:socket");var hasBin=__webpack_require__(29);module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};var emit=Emitter.prototype.emit;function Socket(io,nsp,opts){this.io=io;this.nsp=nsp;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=false;this.disconnected=true;if(opts&&opts.query){this.query=opts.query}if(this.io.autoConnect)this.open()}Emitter(Socket.prototype);Socket.prototype.subEvents=function(){if(this.subs)return;var io=this.io;this.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]};Socket.prototype.open=Socket.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"===this.io.readyState)this.onopen();this.emit("connecting");return this};Socket.prototype.send=function(){var args=toArray(arguments);args.unshift("message");this.emit.apply(this,args);return this};Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev)){emit.apply(this,arguments);return this}var args=toArray(arguments);var parserType=parser.EVENT;if(hasBin(args)){parserType=parser.BINARY_EVENT}var packet={type:parserType,data:args};packet.options={};packet.options.compress=!this.flags||false!==this.flags.compress;if("function"===typeof args[args.length-1]){debug("emitting packet with ack id %d",this.ids);this.acks[this.ids]=args.pop();packet.id=this.ids++}if(this.connected){this.packet(packet)}else{this.sendBuffer.push(packet)}delete this.flags;return this};Socket.prototype.packet=function(packet){packet.nsp=this.nsp;this.io.packet(packet)};Socket.prototype.onopen=function(){debug("transport is open - connecting");if("/"!==this.nsp){if(this.query){this.packet({type:parser.CONNECT,query:this.query})}else{this.packet({type:parser.CONNECT})}}};Socket.prototype.onclose=function(reason){debug("close (%s)",reason);this.connected=false;this.disconnected=true;delete this.id;this.emit("disconnect",reason)};Socket.prototype.onpacket=function(packet){if(packet.nsp!==this.nsp)return;switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(packet);break;case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:this.onack(packet);break;case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",packet.data);break}};Socket.prototype.onevent=function(packet){var args=packet.data||[];debug("emitting event %j",args);if(null!=packet.id){debug("attaching ack callback to event");args.push(this.ack(packet.id))}if(this.connected){emit.apply(this,args)}else{this.receiveBuffer.push(args)}};Socket.prototype.ack=function(id){var self=this;var sent=false;return function(){if(sent)return;sent=true;var args=toArray(arguments);debug("sending ack %j",args);var type=hasBin(args)?parser.BINARY_ACK:parser.ACK;self.packet({type:type,id:id,data:args})}};Socket.prototype.onack=function(packet){var ack=this.acks[packet.id];if("function"===typeof ack){debug("calling ack %s with %j",packet.id,packet.data);ack.apply(this,packet.data);delete this.acks[packet.id]}else{debug("bad ack %s",packet.id)}};Socket.prototype.onconnect=function(){this.connected=true;this.disconnected=false;this.emit("connect");this.emitBuffered()};Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++){emit.apply(this,this.receiveBuffer[i])}this.receiveBuffer=[];for(i=0;i<this.sendBuffer.length;i++){this.packet(this.sendBuffer[i])}this.sendBuffer=[]};Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++){this.subs[i].destroy()}this.subs=null}this.io.destroy(this)};Socket.prototype.close=Socket.prototype.disconnect=function(){if(this.connected){debug("performing disconnect (%s)",this.nsp);this.packet({type:parser.DISCONNECT})}this.destroy();if(this.connected){this.onclose("io client disconnect")}return this};Socket.prototype.compress=function(compress){this.flags=this.flags||{};this.flags.compress=compress;return this}},function(module,exports){module.exports=toArray;function toArray(list,index){var array=[];index=index||0;for(var i=index||0;i<list.length;i++){array[i-index]=list[i]}return array}},function(module,exports){"use strict";module.exports=on;function on(obj,ev,fn){obj.on(ev,fn);return{destroy:function destroy(){obj.removeListener(ev,fn)}}}},function(module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn)fn=obj[fn];if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},function(module,exports){module.exports=Backoff;function Backoff(opts){opts=opts||{};this.ms=opts.min||100;this.max=opts.max||1e4;this.factor=opts.factor||2;this.jitter=opts.jitter>0&&opts.jitter<=1?opts.jitter:0;this.attempts=0}Backoff.prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random();var deviation=Math.floor(rand*this.jitter*ms);ms=(Math.floor(rand*10)&1)==0?ms-deviation:ms+deviation}return Math.min(ms,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(min){this.ms=min};Backoff.prototype.setMax=function(max){this.max=max};Backoff.prototype.setJitter=function(jitter){this.jitter=jitter}}])});(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof module==="object"&&typeof module.exports==="object"){factory(require("jquery"))}else{factory(jQuery)}})(function($){$.timeago=function(timestamp){if(timestamp instanceof Date){return inWords(timestamp)}else if(typeof timestamp==="string"){return inWords($.timeago.parse(timestamp))}else if(typeof timestamp==="number"){return inWords(new Date(timestamp))}else{return inWords($.timeago.datetime(timestamp))}};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:6e4,allowPast:true,allowFuture:false,localeTitle:false,cutoff:0,autoDispose:true,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(distanceMillis){if(!this.settings.allowPast&&!this.settings.allowFuture){throw"timeago allowPast and allowFuture settings can not both be set to false."}var $l=this.settings.strings;var prefix=$l.prefixAgo;var suffix=$l.suffixAgo;if(this.settings.allowFuture){if(distanceMillis<0){prefix=$l.prefixFromNow;suffix=$l.suffixFromNow}}if(!this.settings.allowPast&&distanceMillis>=0){return this.settings.strings.inPast}var seconds=Math.abs(distanceMillis)/1e3;var minutes=seconds/60;var hours=minutes/60;var days=hours/24;var years=days/365;function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction;var value=$l.numbers&&$l.numbers[number]||number;return string.replace(/%d/i,value)}var words=seconds<45&&substitute($l.seconds,Math.round(seconds))||seconds<90&&substitute($l.minute,1)||minutes<45&&substitute($l.minutes,Math.round(minutes))||minutes<90&&substitute($l.hour,1)||hours<24&&substitute($l.hours,Math.round(hours))||hours<42&&substitute($l.day,1)||days<30&&substitute($l.days,Math.round(days))||days<45&&substitute($l.month,1)||days<365&&substitute($l.months,Math.round(days/30))||years<1.5&&substitute($l.year,1)||substitute($l.years,Math.round(years));var separator=$l.wordSeparator||"";if($l.wordSeparator===undefined){separator=" "}return $.trim([prefix,words,suffix].join(separator))},parse:function(iso8601){var s=$.trim(iso8601);s=s.replace(/\.\d+/,"");s=s.replace(/-/,"/").replace(/-/,"/");s=s.replace(/T/," ").replace(/Z/," UTC");s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");s=s.replace(/([\+\-]\d\d)$/," $100");return new Date(s)},datetime:function(elem){var iso8601=$t.isTime(elem)?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601)},isTime:function(elem){return $(elem).get(0).tagName.toLowerCase()==="time"}});var functions={init:function(){var refresh_el=$.proxy(refresh,this);refresh_el();var $s=$t.settings;if($s.refreshMillis>0){this._timeagoInterval=setInterval(refresh_el,$s.refreshMillis)}},update:function(timestamp){var date=timestamp instanceof Date?timestamp:$t.parse(timestamp);$(this).data("timeago",{datetime:date});if($t.settings.localeTitle)$(this).attr("title",date.toLocaleString());refresh.apply(this)},updateFromDOM:function(){$(this).data("timeago",{datetime:$t.parse($t.isTime(this)?$(this).attr("datetime"):$(this).attr("title"))});refresh.apply(this)},dispose:function(){if(this._timeagoInterval){window.clearInterval(this._timeagoInterval);this._timeagoInterval=null}}};$.fn.timeago=function(action,options){var fn=action?functions[action]:functions.init;if(!fn){throw new Error("Unknown function name '"+action+"' for timeago")}this.each(function(){fn.call(this,options)});return this};function refresh(){var $s=$t.settings;if($s.autoDispose&&!$.contains(document.documentElement,this)){$(this).timeago("dispose");return this}var data=prepareData(this);if(!isNaN(data.datetime)){if($s.cutoff==0||Math.abs(distance(data.datetime))<$s.cutoff){$(this).text(inWords(data.datetime))}else{if($(this).attr("title").length>0){$(this).text($(this).attr("title"))}}}return this}function prepareData(element){element=$(element);if(!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());if($t.settings.localeTitle){element.attr("title",element.data("timeago").datetime.toLocaleString())}else if(text.length>0&&!($t.isTime(element)&&element.attr("title"))){element.attr("title",text)}}return element.data("timeago")}function inWords(date){return $t.inWords(distance(date))}function distance(date){return(new Date).getTime()-date.getTime()}document.createElement("abbr");document.createElement("time")});!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(a){"use strict";function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(b.target).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){var e=d.closest("[type=submit]");if(0===e.length)return;c=e[0]}var f=this;if(f.clk=c,"image"==c.type)if(void 0!==b.offsetX)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var f=!!a.fn.prop;a.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)},a.fn.ajaxSubmit=function(b){function c(c){var d,e,f=a.param(c,b.traditional).split("&"),g=f.length,h=[];for(d=0;g>d;d++)f[d]=f[d].replace(/\+/g," "),e=f[d].split("="),h.push([decodeURIComponent(e[0]),decodeURIComponent(e[1])]);return h}function g(d){for(var e=new FormData,f=0;f<d.length;f++)e.append(d[f].name,d[f].value);if(b.extraData){var g=c(b.extraData);for(f=0;f<g.length;f++)g[f]&&e.append(g[f][0],g[f][1])}b.data=null;var h=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});b.uploadProgress&&(h.xhr=function(){var c=a.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(a){var c=0,d=a.loaded||a.position,e=a.total;a.lengthComputable&&(c=Math.ceil(d/e*100)),b.uploadProgress(a,d,e,c)},!1),c}),h.data=null;var j=h.beforeSend;return h.beforeSend=function(a,c){c.data=b.formData?b.formData:e,j&&j.call(this,a,c)},a.ajax(h)}function h(c){function e(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){d("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){d("cannot get iframe.contentDocument: "+c),b=a.document}return b}function g(){function b(){try{var a=e(r).readyState;d("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(c){d("Server abort: ",c," (",c.name,")"),h(A),w&&clearTimeout(w),w=void 0}}var c=l.attr2("target"),f=l.attr2("action"),g="multipart/form-data",j=l.attr("enctype")||l.attr("encoding")||g;x.setAttribute("target",o),(!i||/post/i.test(i))&&x.setAttribute("method","POST"),f!=m.url&&x.setAttribute("action",m.url),m.skipEncodingOverride||i&&!/post/i.test(i)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(w=setTimeout(function(){v=!0,h(z)},m.timeout));var k=[];try{if(m.extraData)for(var n in m.extraData)m.extraData.hasOwnProperty(n)&&(a.isPlainObject(m.extraData[n])&&m.extraData[n].hasOwnProperty("name")&&m.extraData[n].hasOwnProperty("value")?k.push(a('<input type="hidden" name="'+m.extraData[n].name+'">').val(m.extraData[n].value).appendTo(x)[0]):k.push(a('<input type="hidden" name="'+n+'">').val(m.extraData[n]).appendTo(x)[0]));m.iframeTarget||q.appendTo("body"),r.attachEvent?r.attachEvent("onload",h):r.addEventListener("load",h,!1),setTimeout(b,15);try{x.submit()}catch(p){var s=document.createElement("form").submit;s.apply(x)}}finally{x.setAttribute("action",f),x.setAttribute("enctype",j),c?x.setAttribute("target",c):l.removeAttr("target"),a(k).remove()}}function h(b){if(!s.aborted&&!F){if(E=e(r),E||(d("cannot access response document"),b=A),b===z&&s)return s.abort("timeout"),y.reject(s,"timeout"),void 0;if(b==A&&s)return s.abort("server abort"),y.reject(s,"error","server abort"),void 0;if(E&&E.location.href!=m.iframeSrc||v){r.detachEvent?r.detachEvent("onload",h):r.removeEventListener("load",h,!1);var c,f="success";try{if(v)throw"timeout";var g="xml"==m.dataType||E.XMLDocument||a.isXMLDoc(E);if(d("isXml="+g),!g&&window.opera&&(null===E.body||!E.body.innerHTML)&&--G)return d("requeing onLoad callback, DOM not available"),setTimeout(h,250),void 0;var i=E.body?E.body:E.documentElement;s.responseText=i?i.innerHTML:null,s.responseXML=E.XMLDocument?E.XMLDocument:E,g&&(m.dataType="xml"),s.getResponseHeader=function(a){var b={"content-type":m.dataType};return b[a.toLowerCase()]},i&&(s.status=Number(i.getAttribute("status"))||s.status,s.statusText=i.getAttribute("statusText")||s.statusText);var j=(m.dataType||"").toLowerCase(),k=/(json|script|text)/.test(j);if(k||m.textarea){var l=E.getElementsByTagName("textarea")[0];if(l)s.responseText=l.value,s.status=Number(l.getAttribute("status"))||s.status,s.statusText=l.getAttribute("statusText")||s.statusText;else if(k){var o=E.getElementsByTagName("pre")[0],p=E.getElementsByTagName("body")[0];o?s.responseText=o.textContent?o.textContent:o.innerText:p&&(s.responseText=p.textContent?p.textContent:p.innerText)}}else"xml"==j&&!s.responseXML&&s.responseText&&(s.responseXML=H(s.responseText));try{D=J(s,j,m)}catch(t){f="parsererror",s.error=c=t||f}}catch(t){d("error caught: ",t),f="error",s.error=c=t||f}s.aborted&&(d("upload aborted"),f=null),s.status&&(f=s.status>=200&&s.status<300||304===s.status?"success":"error"),"success"===f?(m.success&&m.success.call(m.context,D,"success",s),y.resolve(s.responseText,"success",s),n&&a.event.trigger("ajaxSuccess",[s,m])):f&&(void 0===c&&(c=s.statusText),m.error&&m.error.call(m.context,s,f,c),y.reject(s,"error",c),n&&a.event.trigger("ajaxError",[s,m,c])),n&&a.event.trigger("ajaxComplete",[s,m]),n&&!--a.active&&a.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,s,f),F=!0,m.timeout&&clearTimeout(w),setTimeout(function(){m.iframeTarget?q.attr("src",m.iframeSrc):q.remove(),s.responseXML=null},100)}}}var j,k,m,n,o,q,r,s,t,u,v,w,x=l[0],y=a.Deferred();if(y.abort=function(a){s.abort(a)},c)for(k=0;k<p.length;k++)j=a(p[k]),f?j.prop("disabled",!1):j.removeAttr("disabled");if(m=a.extend(!0,{},a.ajaxSettings,b),m.context=m.context||m,o="jqFormIO"+(new Date).getTime(),m.iframeTarget?(q=a(m.iframeTarget),u=q.attr2("name"),u?o=u:q.attr2("name",o)):(q=a('<iframe name="'+o+'" src="'+m.iframeSrc+'" />'),q.css({position:"absolute",top:"-1000px",left:"-1000px"})),r=q[0],s={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c),this.aborted=1;try{r.contentWindow.document.execCommand&&r.contentWindow.document.execCommand("Stop")}catch(e){}q.attr("src",m.iframeSrc),s.error=c,m.error&&m.error.call(m.context,s,c,b),n&&a.event.trigger("ajaxError",[s,m,c]),m.complete&&m.complete.call(m.context,s,c)}},n=m.global,n&&0===a.active++&&a.event.trigger("ajaxStart"),n&&a.event.trigger("ajaxSend",[s,m]),m.beforeSend&&m.beforeSend.call(m.context,s,m)===!1)return m.global&&a.active--,y.reject(),y;if(s.aborted)return y.reject(),y;t=x.clk,t&&(u=t.name,u&&!t.disabled&&(m.extraData=m.extraData||{},m.extraData[u]=t.value,"image"==t.type&&(m.extraData[u+".x"]=x.clk_x,m.extraData[u+".y"]=x.clk_y)));var z=1,A=2,B=a("meta[name=csrf-token]").attr("content"),C=a("meta[name=csrf-param]").attr("content");C&&B&&(m.extraData=m.extraData||{},m.extraData[C]=B),m.forceSync?g():setTimeout(g,10);var D,E,F,G=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window.eval("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g};return y}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var i,j,k,l=this;"function"==typeof b?b={success:b}:void 0===b&&(b={}),i=b.type||this.attr2("method"),j=b.url||this.attr2("action"),k="string"==typeof j?a.trim(j):"",k=k||window.location.href||"",k&&(k=(k.match(/^([^#]+)/)||[])[1]),b=a.extend(!0,{url:k,success:a.ajaxSettings.success,type:i||a.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var m={};if(this.trigger("form-pre-serialize",[this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&b.beforeSerialize(this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var n=b.traditional;void 0===n&&(n=a.ajaxSettings.traditional);var o,p=[],q=this.formToArray(b.semantic,p);if(b.data&&(b.extraData=b.data,o=a.param(b.data,n)),b.beforeSubmit&&b.beforeSubmit(q,this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[q,this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var r=a.param(q,n);o&&(r=r?r+"&"+o:o),"GET"==b.type.toUpperCase()?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+r,b.data=null):b.data=r;var s=[];if(b.resetForm&&s.push(function(){l.resetForm()}),b.clearForm&&s.push(function(){l.clearForm(b.includeHidden)}),!b.dataType&&b.target){var t=b.success||function(){};s.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(t,arguments)})}else b.success&&s.push(b.success);if(b.success=function(a,c,d){for(var e=b.context||this,f=0,g=s.length;g>f;f++)s[f].apply(e,[a,c,d||l,l])},b.error){var u=b.error;b.error=function(a,c,d){var e=b.context||this;u.apply(e,[a,c,d,l])}}if(b.complete){var v=b.complete;b.complete=function(a,c){var d=b.context||this;v.apply(d,[a,c,l])}}var w=a("input[type=file]:enabled",this).filter(function(){return""!==a(this).val()}),x=w.length>0,y="multipart/form-data",z=l.attr("enctype")==y||l.attr("encoding")==y,A=e.fileapi&&e.formdata;d("fileAPI :"+A);var B,C=(x||z)&&!A;b.iframe!==!1&&(b.iframe||C)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){B=h(q)}):B=h(q):B=(x||z)&&A?g(q):a.ajax(b),l.removeData("jqxhr").data("jqxhr",B);for(var D=0;D<p.length;D++)p[D]=null;return this.trigger("form-submit-notify",[this,b]),this},a.fn.ajaxForm=function(e){
if(e=e||{},e.delegation=e.delegation&&a.isFunction(a.fn.on),!e.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!a.isReady&&f.s?(d("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this):(d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return e.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,b).bind("click.form-plugin",e,c)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b,c){var d=[];if(0===this.length)return d;var f,g=this[0],h=this.attr("id"),i=b?g.getElementsByTagName("*"):g.elements;if(i&&!/MSIE 8/.test(navigator.userAgent)&&(i=a(i).get()),h&&(f=a(":input[form="+h+"]").get(),f.length&&(i=(i||[]).concat(f))),!i||!i.length)return d;var j,k,l,m,n,o,p;for(j=0,o=i.length;o>j;j++)if(n=i[j],l=n.name,l&&!n.disabled)if(b&&g.clk&&"image"==n.type)g.clk==n&&(d.push({name:l,value:a(n).val(),type:n.type}),d.push({name:l+".x",value:g.clk_x},{name:l+".y",value:g.clk_y}));else if(m=a.fieldValue(n,!0),m&&m.constructor==Array)for(c&&c.push(n),k=0,p=m.length;p>k;k++)d.push({name:l,value:m[k]});else if(e.fileapi&&"file"==n.type){c&&c.push(n);var q=n.files;if(q.length)for(k=0;k<q.length;k++)d.push({name:l,value:q[k],type:n.type});else d.push({name:l,value:"",type:n.type})}else null!==m&&"undefined"!=typeof m&&(c&&c.push(n),d.push({name:l,value:m,type:n.type,required:n.required}));if(!b&&g.clk){var r=a(g.clk),s=r[0];l=s.name,l&&!s.disabled&&"image"==s.type&&(d.push({name:l,value:r.val()}),d.push({name:l+".x",value:g.clk_x},{name:l+".y",value:g.clk_y}))}return d},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;e>d;d++){var f=this[d],g=a.fieldValue(f,b);null===g||"undefined"==typeof g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var g=b.selectedIndex;if(0>g)return null;for(var h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++){var m=i[l];if(m.selected){var n=m.value;if(n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(b===!0&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;if("checkbox"==c||"radio"==c)this.checked=b;else if("option"==this.tagName.toLowerCase()){var d=a(this).parent("select");b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1});!function(e){"use strict";var i=-1,t={onVisible:function(e){var i=t.isSupported();if(!i||!t.hidden())return e(),i;var n=t.change(function(){t.hidden()||(t.unbind(n),e())});return n},change:function(e){if(!t.isSupported())return!1;i+=1;var n=i;return t._callbacks[n]=e,t._listen(),n},unbind:function(e){delete t._callbacks[e]},afterPrerendering:function(e){var i=t.isSupported(),n="prerender";if(!i||n!=t.state())return e(),i;var r=t.change(function(i,d){n!=d&&(t.unbind(r),e())});return r},hidden:function(){return!(!t._doc.hidden&&!t._doc.webkitHidden)},state:function(){return t._doc.visibilityState||t._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!t._doc.visibilityState&&!t._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(e){var i=t.state();for(var n in t._callbacks)t._callbacks[n].call(t._doc,e,i)},_listen:function(){if(!t._init){var e="visibilitychange";t._doc.webkitVisibilityState&&(e="webkit"+e);var i=function(){t._change.apply(t,arguments)};t._doc.addEventListener?t._doc.addEventListener(e,i):t._doc.attachEvent(e,i),t._init=!0}}};"undefined"!=typeof module&&module.exports?module.exports=t:e.Visibility=t}(this),function(e){"use strict";var i=-1,t=function(t){return t.every=function(e,n,r){t._time(),r||(r=n,n=null),i+=1;var d=i;return t._timers[d]={visible:e,hidden:n,callback:r},t._run(d,!1),t.isSupported()&&t._listen(),d},t.stop=function(e){return t._timers[e]?(t._stop(e),delete t._timers[e],!0):!1},t._timers={},t._time=function(){t._timed||(t._timed=!0,t._wasHidden=t.hidden(),t.change(function(){t._stopRun(),t._wasHidden=t.hidden()}))},t._run=function(i,n){var r,d=t._timers[i];if(t.hidden()){if(null===d.hidden)return;r=d.hidden}else r=d.visible;var a=function(){d.last=new Date,d.callback.call(e)};if(n){var o=new Date,u=o-d.last;r>u?d.delay=setTimeout(function(){a(),d.id=setInterval(a,r)},r-u):(a(),d.id=setInterval(a,r))}else d.id=setInterval(a,r)},t._stop=function(e){var i=t._timers[e];clearInterval(i.id),clearTimeout(i.delay),delete i.id,delete i.delay},t._stopRun=function(){var e=t.hidden(),i=t._wasHidden;if(e&&!i||!e&&i)for(var n in t._timers)t._stop(n),t._run(n,!e)},t};"undefined"!=typeof module&&module.exports?module.exports=t(require("./visibility.core")):t(e.Visibility)}(window);if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function($){"use strict";var version=$.fn.jquery.split(" ")[0].split(".");if(version[0]<2&&version[1]<9||version[0]==1&&version[1]==9&&version[2]<1||version[0]>3){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}}(jQuery);+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}return false}$.fn.emulateTransitionEnd=function(duration){var called=false;var $el=this;$(this).one("bsTransitionEnd",function(){called=true});var callback=function(){if(!called)$($el).trigger($.support.transition.end)};setTimeout(callback,duration);return this};$(function(){$.support.transition=transitionEnd();if(!$.support.transition)return;$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function($){"use strict";var dismiss='[data-dismiss="alert"]';var Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.7";Alert.TRANSITION_DURATION=150;Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=$(selector==="#"?[]:selector);if(e)e.preventDefault();if(!$parent.length){$parent=$this.closest(".alert")}$parent.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented())return;$parent.removeClass("in");function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement()};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.alert");if(!data)$this.data("bs.alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.alert;$.fn.alert=Plugin;$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this};$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery);+function($){"use strict";var Button=function(element,options){this.$element=$(element);this.options=$.extend({},Button.DEFAULTS,options);this.isLoading=false};Button.VERSION="3.3.7";Button.DEFAULTS={loadingText:"loading..."};Button.prototype.setState=function(state){var d="disabled";var $el=this.$element;var val=$el.is("input")?"val":"html";var data=$el.data();state+="Text";if(data.resetText==null)$el.data("resetText",$el[val]());setTimeout($.proxy(function(){$el[val](data[state]==null?this.options[state]:data[state]);if(state=="loadingText"){this.isLoading=true;$el.addClass(d).attr(d,d).prop(d,true)}else if(this.isLoading){this.isLoading=false;$el.removeClass(d).removeAttr(d).prop(d,false)}},this),0)};Button.prototype.toggle=function(){var changed=true;var $parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");if($input.prop("type")=="radio"){if($input.prop("checked"))changed=false;$parent.find(".active").removeClass("active");this.$element.addClass("active")}else if($input.prop("type")=="checkbox"){if($input.prop("checked")!==this.$element.hasClass("active"))changed=false;this.$element.toggleClass("active")}$input.prop("checked",this.$element.hasClass("active"));if(changed)$input.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.button");var options=typeof option=="object"&&option;if(!data)$this.data("bs.button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})}var old=$.fn.button;$.fn.button=Plugin;$.fn.button.Constructor=Button;$.fn.button.noConflict=function(){$.fn.button=old;return this};$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var $btn=$(e.target).closest(".btn");Plugin.call($btn,"toggle");if(!$(e.target).is('input[type="radio"], input[type="checkbox"]')){e.preventDefault();if($btn.is("input,button"))$btn.trigger("focus");else $btn.find("input:visible,button:visible").first().trigger("focus")}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){$(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery);+function($){"use strict";var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this))};Carousel.VERSION="3.3.7";Carousel.TRANSITION_DURATION=600;Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};Carousel.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()};Carousel.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this};Carousel.prototype.getItemIndex=function(item){this.$items=item.parent().children(".item");return this.$items.index(item||this.$active)};Carousel.prototype.getItemForDirection=function(direction,active){var activeIndex=this.getItemIndex(active);var willWrap=direction=="prev"&&activeIndex===0||direction=="next"&&activeIndex==this.$items.length-1;if(willWrap&&!this.options.wrap)return active;var delta=direction=="prev"?-1:1;var itemIndex=(activeIndex+delta)%this.$items.length;return this.$items.eq(itemIndex)};Carousel.prototype.to=function(pos){var that=this;var activeIndex=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(pos>this.$items.length-1||pos<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){that.to(pos)});if(activeIndex==pos)return this.pause().cycle();return this.slide(pos>activeIndex?"next":"prev",this.$items.eq(pos))};Carousel.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&$.support.transition){this.$element.trigger($.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};Carousel.prototype.next=function(){if(this.sliding)return;return this.slide("next")};Carousel.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active");var $next=next||this.getItemForDirection(type,$active);var isCycling=this.interval;var direction=type=="next"?"left":"right";var that=this;if($next.hasClass("active"))return this.sliding=false;var relatedTarget=$next[0];var slideEvent=$.Event("slide.bs.carousel",{relatedTarget:relatedTarget,direction:direction});this.$element.trigger(slideEvent);if(slideEvent.isDefaultPrevented())return;this.sliding=true;isCycling&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)]);$nextIndicator&&$nextIndicator.addClass("active")}var slidEvent=$.Event("slid.bs.carousel",{relatedTarget:relatedTarget,direction:direction});if($.support.transition&&this.$element.hasClass("slide")){$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);$active.one("bsTransitionEnd",function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)}else{$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger(slidEvent)}isCycling&&this.cycle();return this};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.carousel");var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=="object"&&option);var action=typeof option=="string"?option:options.slide;if(!data)$this.data("bs.carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();else if(options.interval)data.pause().cycle()})}var old=$.fn.carousel;$.fn.carousel=Plugin;$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};var clickHandler=function(e){var href;var $this=$(this);var $target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));if(!$target.hasClass("carousel"))return;var options=$.extend({},$target.data(),$this.data());var slideIndex=$this.attr("data-slide-to");if(slideIndex)options.interval=false;Plugin.call($target,options);if(slideIndex){$target.data("bs.carousel").to(slideIndex)}e.preventDefault()};$(document).on("click.bs.carousel.data-api","[data-slide]",clickHandler).on("click.bs.carousel.data-api","[data-slide-to]",clickHandler);$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);Plugin.call($carousel,$carousel.data())})})}(jQuery);+function($){"use strict";var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],'+'[data-toggle="collapse"][data-target="#'+element.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};Collapse.VERSION="3.3.7";Collapse.TRANSITION_DURATION=350;Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var activesData;var actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(actives&&actives.length){activesData=actives.data("bs.collapse");if(activesData&&activesData.transitioning)return}var startEvent=$.Event("show.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;if(actives&&actives.length){Plugin.call(actives,"hide");activesData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var startEvent=$.Event("hide.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)};Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()};Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen);$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};function getTargetFromTrigger($trigger){var href;var target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.collapse");var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=false;if(!data)$this.data("bs.collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.collapse;$.fn.collapse=Plugin;$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);if(!$this.attr("data-target"))e.preventDefault();var $target=getTargetFromTrigger($this);var data=$target.data("bs.collapse");var option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery);+function($){"use strict";var backdrop=".dropdown-backdrop";var toggle='[data-toggle="dropdown"]';var Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.7";function getParent($this){var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){if(e&&e.which===3)return;$(backdrop).remove();$(toggle).each(function(){var $this=$(this);var $parent=getParent($this);var relatedTarget={relatedTarget:this};if(!$parent.hasClass("open"))return;if(e&&e.type=="click"&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target))return;$parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.attr("aria-expanded","false");$parent.removeClass("open").trigger($.Event("hidden.bs.dropdown",relatedTarget))})}Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length){$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus)}var relatedTarget={relatedTarget:this};$parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true");$parent.toggleClass("open").trigger($.Event("shown.bs.dropdown",relatedTarget))}return false};Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return;var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27)$parent.find(toggle).trigger("focus");return $this.trigger("click")}var desc=" li:not(.disabled):visible a";var $items=$parent.find(".dropdown-menu"+desc);if(!$items.length)return;var index=$items.index(e.target);if(e.which==38&&index>0)index--;if(e.which==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).trigger("focus")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.dropdown");if(!data)$this.data("bs.dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.dropdown;$.fn.dropdown=Plugin;$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery);+function($){"use strict";var Modal=function(element,options){this.options=options;this.$body=$(document.body);this.$element=$(element);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};Modal.VERSION="3.3.7";Modal.TRANSITION_DURATION=300;Modal.BACKDROP_TRANSITION_DURATION=150;Modal.DEFAULTS={backdrop:true,keyboard:true,show:true};Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)};Modal.prototype.show=function(_relatedTarget){var that=this;var e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){that.$element.one("mouseup.dismiss.bs.modal",function(e){if($(e.target).is(that.$element))that.ignoreBackdropClick=true})});this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(that.$body)}that.$element.show().scrollTop(0);that.adjustDialog();if(transition){that.$element[0].offsetWidth}that.$element.addClass("in");that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)})};Modal.prototype.hide=function(e){if(e)e.preventDefault();e=$.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();$(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal()};Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};Modal.prototype.resize=function(){if(this.isShown){$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this))}else{$(window).off("resize.bs.modal")}};Modal.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.$body.removeClass("modal-open");that.resetAdjustments();that.resetScrollbar();that.$element.trigger("hidden.bs.modal")})};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};Modal.prototype.backdrop=function(callback){var that=this;var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$(document.createElement("div")).addClass("modal-backdrop "+animate).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop();callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else if(callback){callback()}};Modal.prototype.handleUpdate=function(){this.adjustDialog()};Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})};Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth;this.scrollbarWidth=this.measureScrollbar()};Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",bodyPad+this.scrollbarWidth)};Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure";this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;this.$body[0].removeChild(scrollDiv);return scrollbarWidth};function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data("bs.modal");var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data)$this.data("bs.modal",data=new Modal(this,options));if(typeof option=="string")data[option](_relatedTarget);else if(options.show)data.show(_relatedTarget)})}var old=$.fn.modal;$.fn.modal=Plugin;$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this);var href=$this.attr("href");var $target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,""));var option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());if($this.is("a"))e.preventDefault();$target.one("show.bs.modal",function(showEvent){if(showEvent.isDefaultPrevented())return;$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})});Plugin.call($target,option,this)})}(jQuery);+function($){"use strict";var Tooltip=function(element,options){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",element,options)};Tooltip.VERSION="3.3.7";Tooltip.TRANSITION_DURATION=150;Tooltip.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};Tooltip.prototype.init=function(type,element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");
}var triggers=this.options.trigger.split(" ");for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!="manual"){var eventIn=trigger=="hover"?"mouseenter":"focusin";var eventOut=trigger=="hover"?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay}}return options};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value});return options};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}if(obj instanceof $.Event){self.inState[obj.type=="focusin"?"focus":"hover"]=true}if(self.tip().hasClass("in")||self.hoverState=="in"){self.hoverState="in";return}clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)};Tooltip.prototype.isInStateTrue=function(){for(var key in this.inState){if(this.inState[key])return true}return false};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}if(obj instanceof $.Event){self.inState[obj.type=="focusout"?"focus":"hover"]=false}if(self.isInStateTrue())return;clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)};Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this;var $tip=this.tip();var tipId=this.getUID(this.type);this.setContent();$tip.attr("id",tipId);this.$element.attr("aria-describedby",tipId);if(this.options.animation)$tip.addClass("fade");var placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace)placement=placement.replace(autoToken,"")||"top";$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement;var viewportDim=this.getPosition(this.$viewport);placement=placement=="bottom"&&pos.bottom+actualHeight>viewportDim.bottom?"top":placement=="top"&&pos.top-actualHeight<viewportDim.top?"bottom":placement=="right"&&pos.right+actualWidth>viewportDim.width?"left":placement=="left"&&pos.left-actualWidth<viewportDim.left?"right":placement;$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type);that.hoverState=null;if(prevHoverState=="out")that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}};Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css("margin-top"),10);var marginLeft=parseInt($tip.css("margin-left"),10);if(isNaN(marginTop))marginTop=0;if(isNaN(marginLeft))marginLeft=0;offset.top+=marginTop;offset.left+=marginLeft;$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0);$tip.addClass("in");var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight}var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);if(delta.left)offset.left+=delta.left;else offset.top+=delta.top;var isVertical=/top|bottom/.test(placement);var arrowDelta=isVertical?delta.left*2-width+actualWidth:delta.top*2-height+actualHeight;var arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset);this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)};Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?"left":"top",50*(1-delta/dimension)+"%").css(isVertical?"top":"left","")};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")};Tooltip.prototype.hide=function(callback){var that=this;var $tip=$(this.$tip);var e=$.Event("hide.bs."+this.type);function complete(){if(that.hoverState!="in")$tip.detach();if(that.$element){that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type)}callback&&callback()}this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass("in");$.support.transition&&$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete();this.hoverState=null;return this};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","")}};Tooltip.prototype.hasContent=function(){return this.getTitle()};Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0];var isBody=el.tagName=="BODY";var elRect=el.getBoundingClientRect();if(elRect.width==null){elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top})}var isSvg=window.SVGElement&&el instanceof window.SVGElement;var elOffset=isBody?{top:0,left:0}:isSvg?null:$element.offset();var scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()};var outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=="top"?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=="left"?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}};Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0;var viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll;var bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;if(topEdgeOffset<viewportDimensions.top){delta.top=viewportDimensions.top-topEdgeOffset}else if(bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height){delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset}}else{var leftEdgeOffset=pos.left-viewportPadding;var rightEdgeOffset=pos.left+viewportPadding+actualWidth;if(leftEdgeOffset<viewportDimensions.left){delta.left=viewportDimensions.left-leftEdgeOffset}else if(rightEdgeOffset>viewportDimensions.right){delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset}}return delta};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title};Tooltip.prototype.getUID=function(prefix){do prefix+=~~(Math.random()*1e6);while(document.getElementById(prefix));return prefix};Tooltip.prototype.tip=function(){if(!this.$tip){this.$tip=$(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};Tooltip.prototype.enable=function(){this.enabled=true};Tooltip.prototype.disable=function(){this.enabled=false};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled};Tooltip.prototype.toggle=function(e){var self=this;if(e){self=$(e.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(e.currentTarget,this.getDelegateOptions());$(e.currentTarget).data("bs."+this.type,self)}}if(e){self.inState.click=!self.inState.click;if(self.isInStateTrue())self.enter(self);else self.leave(self)}else{self.tip().hasClass("in")?self.leave(self):self.enter(self)}};Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout);this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type);if(that.$tip){that.$tip.detach()}that.$tip=null;that.$arrow=null;that.$viewport=null;that.$element=null})};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tooltip");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.tooltip;$.fn.tooltip=Plugin;$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(jQuery);+function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.7";Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content").children().detach().end()[this.options.html?typeof content=="string"?"html":"append":"text"](content);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html())$tip.find(".popover-title").hide()};Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content)};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.popover");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.popover;$.fn.popover=Plugin;$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(jQuery);+function($){"use strict";function ScrollSpy(element,options){this.$body=$(document.body);this.$scrollElement=$(element).is(document.body)?$(window):$(element);this.options=$.extend({},ScrollSpy.DEFAULTS,options);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",$.proxy(this.process,this));this.refresh();this.process()}ScrollSpy.VERSION="3.3.7";ScrollSpy.DEFAULTS={offset:10};ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};ScrollSpy.prototype.refresh=function(){var that=this;var offsetMethod="offset";var offsetBase=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!$.isWindow(this.$scrollElement[0])){offsetMethod="position";offsetBase=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var $el=$(this);var href=$el.data("target")||$el.attr("href");var $href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+offsetBase,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0]);that.targets.push(this[1])})};ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset;var scrollHeight=this.getScrollHeight();var maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height();var offsets=this.offsets;var targets=this.targets;var activeTarget=this.activeTarget;var i;if(this.scrollHeight!=scrollHeight){this.refresh()}if(scrollTop>=maxScroll){return activeTarget!=(i=targets[targets.length-1])&&this.activate(i)}if(activeTarget&&scrollTop<offsets[0]){this.activeTarget=null;return this.clear()}for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(offsets[i+1]===undefined||scrollTop<offsets[i+1])&&this.activate(targets[i])}};ScrollSpy.prototype.activate=function(target){this.activeTarget=target;this.clear();var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';var active=$(selector).parents("li").addClass("active");if(active.parent(".dropdown-menu").length){active=active.closest("li.dropdown").addClass("active")}active.trigger("activate.bs.scrollspy")};ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.scrollspy");var options=typeof option=="object"&&option;if(!data)$this.data("bs.scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.scrollspy;$.fn.scrollspy=Plugin;$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this};$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);Plugin.call($spy,$spy.data())})})}(jQuery);+function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.VERSION="3.3.7";Tab.TRANSITION_DURATION=150;Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest("ul:not(.dropdown-menu)");var selector=$this.data("target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;var $previous=$ul.find(".active:last a");var hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]});var showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});$previous.trigger(hideEvent);$this.trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return;var $target=$(selector);this.activate($this.closest("li"),$ul);this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]});$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})};Tab.prototype.activate=function(element,container,callback){var $active=container.find("> .active");var transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(transition){element[0].offsetWidth;element.addClass("in")}else{element.removeClass("fade")}if(element.parent(".dropdown-menu").length){element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}callback&&callback()}$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next();$active.removeClass("in")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tab");if(!data)$this.data("bs.tab",data=new Tab(this));if(typeof option=="string")data[option]()})}var old=$.fn.tab;$.fn.tab=Plugin;$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this};var clickHandler=function(e){e.preventDefault();Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}(jQuery);+function($){"use strict";var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options);this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this));this.$element=$(element);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};Affix.VERSION="3.3.7";Affix.RESET="affix affix-top affix-bottom";Affix.DEFAULTS={offset:0,target:window};Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop();var position=this.$element.offset();var targetHeight=this.$target.height();if(offsetTop!=null&&this.affixed=="top")return scrollTop<offsetTop?"top":false;if(this.affixed=="bottom"){if(offsetTop!=null)return scrollTop+this.unpin<=position.top?false:"bottom";return scrollTop+targetHeight<=scrollHeight-offsetBottom?false:"bottom"}var initializing=this.affixed==null;var colliderTop=initializing?scrollTop:position.top;var colliderHeight=initializing?targetHeight:height;if(offsetTop!=null&&scrollTop<=offsetTop)return"top";if(offsetBottom!=null&&colliderTop+colliderHeight>=scrollHeight-offsetBottom)return"bottom";return false};Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$target.scrollTop();var position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop};Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var height=this.$element.height();var offset=this.options.offset;var offsetTop=offset.top;var offsetBottom=offset.bottom;var scrollHeight=Math.max($(document).height(),$(document.body).height());if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top(this.$element);if(typeof offsetBottom=="function")offsetBottom=offset.bottom(this.$element);var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom);if(this.affixed!=affix){if(this.unpin!=null)this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:"");var e=$.Event(affixType+".bs.affix");this.$element.trigger(e);if(e.isDefaultPrevented())return;this.affixed=affix;this.unpin=affix=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix","affixed")+".bs.affix")}if(affix=="bottom"){this.$element.offset({top:scrollHeight-height-offsetBottom})}};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.affix");var options=typeof option=="object"&&option;if(!data)$this.data("bs.affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.affix;$.fn.affix=Plugin;$.fn.affix.Constructor=Affix;$.fn.affix.noConflict=function(){$.fn.affix=old;return this};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this);var data=$spy.data();data.offset=data.offset||{};if(data.offsetBottom!=null)data.offset.bottom=data.offsetBottom;if(data.offsetTop!=null)data.offset.top=data.offsetTop;Plugin.call($spy,data)})})}(jQuery);!function(a){"use strict";function b(b,c){this.isInit=!0,this.itemsArray=[],this.$element=a(b),this.$element.hide(),this.isSelect="SELECT"===b.tagName,this.multiple=this.isSelect&&b.hasAttribute("multiple"),this.objectItems=c&&c.itemValue,this.placeholderText=b.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=a('<div class="bootstrap-tagsinput"></div>'),this.$input=a('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(c),this.isInit=!1}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(){return c}}}function e(a){return a?i.text(a).html():""}function f(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}function g(b,c){var d=!1;return a.each(c,function(a,c){if("number"==typeof c&&b.which===c)return d=!0,!1;if(b.which===c.which){var e=!c.hasOwnProperty("altKey")||b.altKey===c.altKey,f=!c.hasOwnProperty("shiftKey")||b.shiftKey===c.shiftKey,g=!c.hasOwnProperty("ctrlKey")||b.ctrlKey===c.ctrlKey;if(e&&f&&g)return d=!0,!1}}),d}var h={tagClass:function(a){return"label label-info"},focusClass:"focus",itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},itemTitle:function(a){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(a,b){b.hide().fadeIn()},trimValue:!1,allowDuplicates:!1,triggerChange:!0};b.prototype={constructor:b,add:function(b,c,d){var f=this;if(!(f.options.maxTags&&f.itemsArray.length>=f.options.maxTags)&&(b===!1||b)){if("string"==typeof b&&f.options.trimValue&&(b=a.trim(b)),"object"==typeof b&&!f.objectItems)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)){if(f.isSelect&&!f.multiple&&f.itemsArray.length>0&&f.remove(f.itemsArray[0]),"string"==typeof b&&"INPUT"===this.$element[0].tagName){var g=f.options.delimiterRegex?f.options.delimiterRegex:f.options.delimiter,h=b.split(g);if(h.length>1){for(var i=0;i<h.length;i++)this.add(h[i],!0);return void(c||f.pushVal(f.options.triggerChange))}}var j=f.options.itemValue(b),k=f.options.itemText(b),l=f.options.tagClass(b),m=f.options.itemTitle(b),n=a.grep(f.itemsArray,function(a){return f.options.itemValue(a)===j})[0];if(!n||f.options.allowDuplicates){if(!(f.items().toString().length+b.length+1>f.options.maxInputLength)){var o=a.Event("beforeItemAdd",{item:b,cancel:!1,options:d});if(f.$element.trigger(o),!o.cancel){f.itemsArray.push(b);var p=a('<span class="tag '+e(l)+(null!==m?'" title="'+m:"")+'">'+e(k)+'<span data-role="remove"></span></span>');p.data("item",b),f.findInputWrapper().before(p),p.after(" ");var q=a('option[value="'+encodeURIComponent(j)+'"]',f.$element).length||a('option[value="'+e(j)+'"]',f.$element).length;if(f.isSelect&&!q){var r=a("<option selected>"+e(k)+"</option>");r.data("item",b),r.attr("value",j),f.$element.append(r)}c||f.pushVal(f.options.triggerChange),(f.options.maxTags===f.itemsArray.length||f.items().toString().length===f.options.maxInputLength)&&f.$container.addClass("bootstrap-tagsinput-max"),a(".typeahead, .twitter-typeahead",f.$container).length&&f.$input.typeahead("val",""),this.isInit?f.$element.trigger(a.Event("itemAddedOnInit",{item:b,options:d})):f.$element.trigger(a.Event("itemAdded",{item:b,options:d}))}}}else if(f.options.onTagExists){var s=a(".tag",f.$container).filter(function(){return a(this).data("item")===n});f.options.onTagExists(b,s)}}}},remove:function(b,c,d){var e=this;if(e.objectItems&&(b="object"==typeof b?a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==e.options.itemValue(b)}):a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==b}),b=b[b.length-1]),b){var f=a.Event("beforeItemRemove",{item:b,cancel:!1,options:d});if(e.$element.trigger(f),f.cancel)return;a(".tag",e.$container).filter(function(){return a(this).data("item")===b}).remove(),a("option",e.$element).filter(function(){return a(this).data("item")===b}).remove(),-1!==a.inArray(b,e.itemsArray)&&e.itemsArray.splice(a.inArray(b,e.itemsArray),1)}c||e.pushVal(e.options.triggerChange),e.options.maxTags>e.itemsArray.length&&e.$container.removeClass("bootstrap-tagsinput-max"),e.$element.trigger(a.Event("itemRemoved",{item:b,options:d}))},removeAll:function(){var b=this;for(a(".tag",b.$container).remove(),a("option",b.$element).remove();b.itemsArray.length>0;)b.itemsArray.pop();b.pushVal(b.options.triggerChange)},refresh:function(){var b=this;a(".tag",b.$container).each(function(){var c=a(this),d=c.data("item"),f=b.options.itemValue(d),g=b.options.itemText(d),h=b.options.tagClass(d);if(c.attr("class",null),c.addClass("tag "+e(h)),c.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=e(g),b.isSelect){var i=a("option",b.$element).filter(function(){return a(this).data("item")===d});i.attr("value",f)}})},items:function(){return this.itemsArray},pushVal:function(){var b=this,c=a.map(b.items(),function(a){return b.options.itemValue(a).toString()});b.$element.val(c,!0),b.options.triggerChange&&b.$element.trigger("change")},build:function(b){var e=this;if(e.options=a.extend({},h,b),e.objectItems&&(e.options.freeInput=!1),c(e.options,"itemValue"),c(e.options,"itemText"),d(e.options,"tagClass"),e.options.typeahead){var i=e.options.typeahead||{};d(i,"source"),e.$input.typeahead(a.extend({},i,{source:function(b,c){function d(a){for(var b=[],d=0;d<a.length;d++){var g=e.options.itemText(a[d]);f[g]=a[d],b.push(g)}c(b)}this.map={};var f=this.map,g=i.source(b);a.isFunction(g.success)?g.success(d):a.isFunction(g.then)?g.then(d):a.when(g).then(d)},updater:function(a){return e.add(this.map[a]),this.map[a]},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(a){return a.sort()},highlighter:function(a){var b=new RegExp("("+this.query+")","gi");return a.replace(b,"<strong>$1</strong>")}}))}if(e.options.typeaheadjs){var j=null,k={},l=e.options.typeaheadjs;a.isArray(l)?(j=l[0],k=l[1]):k=l,e.$input.typeahead(j,k).on("typeahead:selected",a.proxy(function(a,b){k.valueKey?e.add(b[k.valueKey]):e.add(b),e.$input.typeahead("val","")},e))}e.$container.on("click",a.proxy(function(a){e.$element.attr("disabled")||e.$input.removeAttr("disabled"),e.$input.focus()},e)),e.options.addOnBlur&&e.options.freeInput&&e.$input.on("focusout",a.proxy(function(b){0===a(".typeahead, .twitter-typeahead",e.$container).length&&(e.add(e.$input.val()),e.$input.val(""))},e)),e.$container.on({focusin:function(){e.$container.addClass(e.options.focusClass)},focusout:function(){e.$container.removeClass(e.options.focusClass)}}),e.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target),d=e.findInputWrapper();if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");switch(b.which){case 8:if(0===f(c[0])){var g=d.prev();g.length&&e.remove(g.data("item"))}break;case 46:if(0===f(c[0])){var h=d.next();h.length&&e.remove(h.data("item"))}break;case 37:var i=d.prev();0===c.val().length&&i[0]&&(i.before(d),c.focus());break;case 39:var j=d.next();0===c.val().length&&j[0]&&(j.after(d),c.focus())}var k=c.val().length;Math.ceil(k/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("keypress","input",a.proxy(function(b){var c=a(b.target);if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");var d=c.val(),f=e.options.maxChars&&d.length>=e.options.maxChars;e.options.freeInput&&(g(b,e.options.confirmKeys)||f)&&(0!==d.length&&(e.add(f?d.substr(0,e.options.maxChars):d),c.val("")),e.options.cancelConfirmKeysOnEmpty===!1&&b.preventDefault());var h=c.val().length;Math.ceil(h/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("click","[data-role=remove]",a.proxy(function(b){e.$element.attr("disabled")||e.remove(a(b.target).closest(".tag").data("item"))},e)),e.options.itemValue===h.itemValue&&("INPUT"===e.$element[0].tagName?e.add(e.$element.val()):a("option",e.$element).each(function(){e.add(a(this).attr("value"),!0)}))},destroy:function(){var a=this;a.$container.off("keypress","input"),a.$container.off("click","[role=remove]"),a.$container.remove(),a.$element.removeData("tagsinput"),a.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var b=this.$input[0],c=this.$container[0];b&&b.parentNode!==c;)b=b.parentNode;return a(b)}},a.fn.tagsinput=function(c,d,e){var f=[];return this.each(function(){var g=a(this).data("tagsinput");if(g)if(c||d){if(void 0!==g[c]){if(3===g[c].length&&void 0!==e)var h=g[c](d,null,e);else var h=g[c](d);void 0!==h&&f.push(h)}}else f.push(g);else g=new b(this,c),a(this).data("tagsinput",g),f.push(g),"SELECT"===this.tagName&&a("option",a(this)).attr("selected","selected"),a(this).val(a(this).val())}),"string"==typeof c?f.length>1?f:f[0]:f},a.fn.tagsinput.Constructor=b;var i=a("<div />");a(function(){a("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery);(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof module==="object"&&module.exports){var $=require("jquery");module.exports=factory($)}else{factory(jQuery)}})(function(jQuery){if(typeof jQuery==="undefined"){throw new Error("jQuery.textcomplete requires jQuery")}+function($){"use strict";var warn=function(message){if(console.warn){console.warn(message)}};var id=1;$.fn.textcomplete=function(strategies,option){var args=Array.prototype.slice.call(arguments);return this.each(function(){var self=this;var $this=$(this);var completer=$this.data("textComplete");if(!completer){option||(option={});option._oid=id++;completer=new $.fn.textcomplete.Completer(this,option);$this.data("textComplete",completer)}if(typeof strategies==="string"){if(!completer)return;args.shift();completer[strategies].apply(completer,args);if(strategies==="destroy"){$this.removeData("textComplete")}}else{$.each(strategies,function(obj){$.each(["header","footer","placement","maxCount"],function(name){if(obj[name]){completer.option[name]=obj[name];warn(name+"as a strategy param is deprecated. Use option.");delete obj[name]}})});completer.register($.fn.textcomplete.Strategy.parse(strategies,{el:self,$el:$this}))}})};
}(jQuery);+function($){"use strict";var lock=function(func){var locked,queuedArgsToReplay;return function(){var args=Array.prototype.slice.call(arguments);if(locked){queuedArgsToReplay=args;return}locked=true;var self=this;args.unshift(function replayOrFree(){if(queuedArgsToReplay){var replayArgs=queuedArgsToReplay;queuedArgsToReplay=undefined;replayArgs.unshift(replayOrFree);func.apply(self,replayArgs)}else{locked=false}});func.apply(this,args)}};var isString=function(obj){return Object.prototype.toString.call(obj)==="[object String]"};var uniqueId=0;function Completer(element,option){this.$el=$(element);this.id="textcomplete"+uniqueId++;this.strategies=[];this.views=[];this.option=$.extend({},Completer.defaults,option);if(!this.$el.is("input[type=text]")&&!this.$el.is("input[type=search]")&&!this.$el.is("textarea")&&!element.isContentEditable&&element.contentEditable!="true"){throw new Error("textcomplete must be called on a Textarea or a ContentEditable.")}if(element===element.ownerDocument.activeElement){this.initialize()}else{var self=this;this.$el.one("focus."+this.id,function(){self.initialize()});if((!this.option.adapter||this.option.adapter=="CKEditor")&&typeof CKEDITOR!="undefined"&&this.$el.is("textarea")){CKEDITOR.on("instanceReady",function(event){event.editor.once("focus",function(event2){self.$el=$(event.editor.editable().$);if(!self.option.adapter){self.option.adapter=$.fn.textcomplete["CKEditor"];self.option.ckeditor_instance=event.editor}self.initialize()})})}}}Completer.defaults={appendTo:"body",className:"",dropdownClassName:"dropdown-menu textcomplete-dropdown",maxCount:10,zIndex:"100",rightEdgeOffset:30};$.extend(Completer.prototype,{id:null,option:null,strategies:null,adapter:null,dropdown:null,$el:null,$iframe:null,initialize:function(){var element=this.$el.get(0);if(this.$el.prop("ownerDocument")!==document&&window.frames.length){for(var iframeIndex=0;iframeIndex<window.frames.length;iframeIndex++){if(this.$el.prop("ownerDocument")===window.frames[iframeIndex].document){this.$iframe=$(window.frames[iframeIndex].frameElement);break}}}this.dropdown=new $.fn.textcomplete.Dropdown(element,this,this.option);var Adapter,viewName;if(this.option.adapter){Adapter=this.option.adapter}else{if(this.$el.is("textarea")||this.$el.is("input[type=text]")||this.$el.is("input[type=search]")){viewName=typeof element.selectionEnd==="number"?"Textarea":"IETextarea"}else{viewName="ContentEditable"}Adapter=$.fn.textcomplete[viewName]}this.adapter=new Adapter(element,this,this.option)},destroy:function(){this.$el.off("."+this.id);if(this.adapter){this.adapter.destroy()}if(this.dropdown){this.dropdown.destroy()}this.$el=this.adapter=this.dropdown=null},deactivate:function(){if(this.dropdown){this.dropdown.deactivate()}},trigger:function(text,skipUnchangedTerm){if(!this.dropdown){this.initialize()}text!=null||(text=this.adapter.getTextFromHeadToCaret());var searchQuery=this._extractSearchQuery(text);if(searchQuery.length){var term=searchQuery[1];if(skipUnchangedTerm&&this._term===term&&term!==""){return}this._term=term;this._search.apply(this,searchQuery)}else{this._term=null;this.dropdown.deactivate()}},fire:function(eventName){var args=Array.prototype.slice.call(arguments,1);this.$el.trigger(eventName,args);return this},register:function(strategies){Array.prototype.push.apply(this.strategies,strategies)},select:function(value,strategy,e){this._term=null;this.adapter.select(value,strategy,e);this.fire("change").fire("textComplete:select",value,strategy);this.adapter.focus()},_clearAtNext:true,_term:null,_extractSearchQuery:function(text){for(var i=0;i<this.strategies.length;i++){var strategy=this.strategies[i];var context=strategy.context(text);if(context||context===""){var matchRegexp=$.isFunction(strategy.match)?strategy.match(text):strategy.match;if(isString(context)){text=context}var match=text.match(matchRegexp);if(match){return[strategy,match[strategy.index],match]}}}return[]},_search:lock(function(free,strategy,term,match){var self=this;strategy.search(term,function(data,stillSearching){if(!self.dropdown.shown){self.dropdown.activate()}if(self._clearAtNext){self.dropdown.clear();self._clearAtNext=false}self.dropdown.setPosition(self.adapter.getCaretPosition());self.dropdown.render(self._zip(data,strategy,term));if(!stillSearching){free();self._clearAtNext=true}},match)}),_zip:function(data,strategy,term){return $.map(data,function(value){return{value:value,strategy:strategy,term:term}})}});$.fn.textcomplete.Completer=Completer}(jQuery);+function($){"use strict";var $window=$(window);var include=function(zippedData,datum){var i,elem;var idProperty=datum.strategy.idProperty;for(i=0;i<zippedData.length;i++){elem=zippedData[i];if(elem.strategy!==datum.strategy)continue;if(idProperty){if(elem.value[idProperty]===datum.value[idProperty])return true}else{if(elem.value===datum.value)return true}}return false};var dropdownViews={};$(document).on("click",function(e){var id=e.originalEvent&&e.originalEvent.keepTextCompleteDropdown;$.each(dropdownViews,function(key,view){if(key!==id){view.deactivate()}})});var commands={SKIP_DEFAULT:0,KEY_UP:1,KEY_DOWN:2,KEY_ENTER:3,KEY_PAGEUP:4,KEY_PAGEDOWN:5,KEY_ESCAPE:6};function Dropdown(element,completer,option){this.$el=Dropdown.createElement(option);this.completer=completer;this.id=completer.id+"dropdown";this._data=[];this.$inputEl=$(element);this.option=option;if(option.listPosition){this.setPosition=option.listPosition}if(option.height){this.$el.height(option.height)}var self=this;$.each(["maxCount","placement","footer","header","noResultsMessage","className"],function(_i,name){if(option[name]!=null){self[name]=option[name]}});this._bindEvents(element);dropdownViews[this.id]=this}$.extend(Dropdown,{createElement:function(option){var $parent=option.appendTo;if(!($parent instanceof $)){$parent=$($parent)}var $el=$("<ul></ul>").addClass(option.dropdownClassName).attr("id","textcomplete-dropdown-"+option._oid).css({display:"none",left:0,position:"absolute",zIndex:option.zIndex}).appendTo($parent);return $el}});$.extend(Dropdown.prototype,{$el:null,$inputEl:null,completer:null,footer:null,header:null,id:null,maxCount:null,placement:"",shown:false,data:[],className:"",destroy:function(){this.deactivate();this.$el.off("."+this.id);this.$inputEl.off("."+this.id);this.clear();this.$el.remove();this.$el=this.$inputEl=this.completer=null;delete dropdownViews[this.id]},render:function(zippedData){var contentsHtml=this._buildContents(zippedData);var unzippedData=$.map(zippedData,function(d){return d.value});if(zippedData.length){var strategy=zippedData[0].strategy;if(strategy.id){this.$el.attr("data-strategy",strategy.id)}else{this.$el.removeAttr("data-strategy")}this._renderHeader(unzippedData);this._renderFooter(unzippedData);if(contentsHtml){this._renderContents(contentsHtml);this._fitToBottom();this._fitToRight();this._activateIndexedItem()}this._setScroll()}else if(this.noResultsMessage){this._renderNoResultsMessage(unzippedData)}else if(this.shown){this.deactivate()}},setPosition:function(pos){var position="absolute";this.$inputEl.add(this.$inputEl.parents()).each(function(){if($(this).css("position")==="absolute")return false;if($(this).css("position")==="fixed"){pos.top-=$window.scrollTop();pos.left-=$window.scrollLeft();position="fixed";return false}});this.$el.css(this._applyPlacement(pos));this.$el.css({position:position});return this},clear:function(){this.$el.html("");this.data=[];this._index=0;this._$header=this._$footer=this._$noResultsMessage=null},activate:function(){if(!this.shown){this.clear();this.$el.show();if(this.className){this.$el.addClass(this.className)}this.completer.fire("textComplete:show");this.shown=true}return this},deactivate:function(){if(this.shown){this.$el.hide();if(this.className){this.$el.removeClass(this.className)}this.completer.fire("textComplete:hide");this.shown=false}return this},isUp:function(e){return e.keyCode===38||e.ctrlKey&&e.keyCode===80},isDown:function(e){return e.keyCode===40||e.ctrlKey&&e.keyCode===78},isEnter:function(e){var modifiers=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey;return!modifiers&&(e.keyCode===13||e.keyCode===9||this.option.completeOnSpace===true&&e.keyCode===32)},isPageup:function(e){return e.keyCode===33},isPagedown:function(e){return e.keyCode===34},isEscape:function(e){return e.keyCode===27},_data:null,_index:null,_$header:null,_$noResultsMessage:null,_$footer:null,_bindEvents:function(){this.$el.on("mousedown."+this.id,".textcomplete-item",$.proxy(this._onClick,this));this.$el.on("touchstart."+this.id,".textcomplete-item",$.proxy(this._onClick,this));this.$el.on("mouseover."+this.id,".textcomplete-item",$.proxy(this._onMouseover,this));this.$inputEl.on("keydown."+this.id,$.proxy(this._onKeydown,this))},_onClick:function(e){var $el=$(e.target);e.preventDefault();e.originalEvent.keepTextCompleteDropdown=this.id;if(!$el.hasClass("textcomplete-item")){$el=$el.closest(".textcomplete-item")}var datum=this.data[parseInt($el.data("index"),10)];this.completer.select(datum.value,datum.strategy,e);var self=this;setTimeout(function(){self.deactivate();if(e.type==="touchstart"){self.$inputEl.focus()}},0)},_onMouseover:function(e){var $el=$(e.target);e.preventDefault();if(!$el.hasClass("textcomplete-item")){$el=$el.closest(".textcomplete-item")}this._index=parseInt($el.data("index"),10);this._activateIndexedItem()},_onKeydown:function(e){if(!this.shown){return}var command;if($.isFunction(this.option.onKeydown)){command=this.option.onKeydown(e,commands)}if(command==null){command=this._defaultKeydown(e)}switch(command){case commands.KEY_UP:e.preventDefault();this._up();break;case commands.KEY_DOWN:e.preventDefault();this._down();break;case commands.KEY_ENTER:e.preventDefault();this._enter(e);break;case commands.KEY_PAGEUP:e.preventDefault();this._pageup();break;case commands.KEY_PAGEDOWN:e.preventDefault();this._pagedown();break;case commands.KEY_ESCAPE:e.preventDefault();this.deactivate();break}},_defaultKeydown:function(e){if(this.isUp(e)){return commands.KEY_UP}else if(this.isDown(e)){return commands.KEY_DOWN}else if(this.isEnter(e)){return commands.KEY_ENTER}else if(this.isPageup(e)){return commands.KEY_PAGEUP}else if(this.isPagedown(e)){return commands.KEY_PAGEDOWN}else if(this.isEscape(e)){return commands.KEY_ESCAPE}},_up:function(){if(this._index===0){this._index=this.data.length-1}else{this._index-=1}this._activateIndexedItem();this._setScroll()},_down:function(){if(this._index===this.data.length-1){this._index=0}else{this._index+=1}this._activateIndexedItem();this._setScroll()},_enter:function(e){var datum=this.data[parseInt(this._getActiveElement().data("index"),10)];this.completer.select(datum.value,datum.strategy,e);this.deactivate()},_pageup:function(){var target=0;var threshold=this._getActiveElement().position().top-this.$el.innerHeight();this.$el.children().each(function(i){if($(this).position().top+$(this).outerHeight()>threshold){target=i;return false}});this._index=target;this._activateIndexedItem();this._setScroll()},_pagedown:function(){var target=this.data.length-1;var threshold=this._getActiveElement().position().top+this.$el.innerHeight();this.$el.children().each(function(i){if($(this).position().top>threshold){target=i;return false}});this._index=target;this._activateIndexedItem();this._setScroll()},_activateIndexedItem:function(){this.$el.find(".textcomplete-item.active").removeClass("active");this._getActiveElement().addClass("active")},_getActiveElement:function(){return this.$el.children(".textcomplete-item:nth("+this._index+")")},_setScroll:function(){var $activeEl=this._getActiveElement();var itemTop=$activeEl.position().top;var itemHeight=$activeEl.outerHeight();var visibleHeight=this.$el.innerHeight();var visibleTop=this.$el.scrollTop();if(this._index===0||this._index==this.data.length-1||itemTop<0){this.$el.scrollTop(itemTop+visibleTop)}else if(itemTop+itemHeight>visibleHeight){this.$el.scrollTop(itemTop+itemHeight+visibleTop-visibleHeight)}},_buildContents:function(zippedData){var datum,i,index;var html="";for(i=0;i<zippedData.length;i++){if(this.data.length===this.maxCount)break;datum=zippedData[i];if(include(this.data,datum)){continue}index=this.data.length;this.data.push(datum);html+='<li class="textcomplete-item" data-index="'+index+'"><a>';html+=datum.strategy.template(datum.value,datum.term);html+="</a></li>"}return html},_renderHeader:function(unzippedData){if(this.header){if(!this._$header){this._$header=$('<li class="textcomplete-header"></li>').prependTo(this.$el)}var html=$.isFunction(this.header)?this.header(unzippedData):this.header;this._$header.html(html)}},_renderFooter:function(unzippedData){if(this.footer){if(!this._$footer){this._$footer=$('<li class="textcomplete-footer"></li>').appendTo(this.$el)}var html=$.isFunction(this.footer)?this.footer(unzippedData):this.footer;this._$footer.html(html)}},_renderNoResultsMessage:function(unzippedData){if(this.noResultsMessage){if(!this._$noResultsMessage){this._$noResultsMessage=$('<li class="textcomplete-no-results-message"></li>').appendTo(this.$el)}var html=$.isFunction(this.noResultsMessage)?this.noResultsMessage(unzippedData):this.noResultsMessage;this._$noResultsMessage.html(html)}},_renderContents:function(html){if(this._$footer){this._$footer.before(html)}else{this.$el.append(html)}},_fitToBottom:function(){var windowScrollBottom=$window.scrollTop()+$window.height();var height=this.$el.height();if(this.$el.position().top+height>windowScrollBottom){if(!this.completer.$iframe){this.$el.offset({top:windowScrollBottom-height})}}},_fitToRight:function(){var tolerance=this.option.rightEdgeOffset;var lastOffset=this.$el.offset().left,offset;var width=this.$el.width();var maxLeft=$window.width()-tolerance;while(lastOffset+width>maxLeft){this.$el.offset({left:lastOffset-tolerance});offset=this.$el.offset().left;if(offset>=lastOffset){break}lastOffset=offset}},_applyPlacement:function(position){if(this.placement.indexOf("top")!==-1){position={top:"auto",bottom:this.$el.parent().height()-position.top+position.lineHeight,left:position.left}}else{position.bottom="auto";delete position.lineHeight}if(this.placement.indexOf("absleft")!==-1){position.left=0}else if(this.placement.indexOf("absright")!==-1){position.right=0;position.left="auto"}return position}});$.fn.textcomplete.Dropdown=Dropdown;$.extend($.fn.textcomplete,commands)}(jQuery);+function($){"use strict";var memoize=function(func){var memo={};return function(term,callback){if(memo[term]){callback(memo[term])}else{func.call(this,term,function(data){memo[term]=(memo[term]||[]).concat(data);callback.apply(null,arguments)})}}};function Strategy(options){$.extend(this,options);if(this.cache){this.search=memoize(this.search)}}Strategy.parse=function(strategiesArray,params){return $.map(strategiesArray,function(strategy){var strategyObj=new Strategy(strategy);strategyObj.el=params.el;strategyObj.$el=params.$el;return strategyObj})};$.extend(Strategy.prototype,{match:null,replace:null,search:null,id:null,cache:false,context:function(){return true},index:2,template:function(obj){return obj},idProperty:null});$.fn.textcomplete.Strategy=Strategy}(jQuery);+function($){"use strict";var now=Date.now||function(){return(new Date).getTime()};var debounce=function(func,wait){var timeout,args,context,timestamp,result;var later=function(){var last=now()-timestamp;if(last<wait){timeout=setTimeout(later,wait-last)}else{timeout=null;result=func.apply(context,args);context=args=null}};return function(){context=this;args=arguments;timestamp=now();if(!timeout){timeout=setTimeout(later,wait)}return result}};function Adapter(){}$.extend(Adapter.prototype,{id:null,completer:null,el:null,$el:null,option:null,initialize:function(element,completer,option){this.el=element;this.$el=$(element);this.id=completer.id+this.constructor.name;this.completer=completer;this.option=option;if(this.option.debounce){this._onKeyup=debounce(this._onKeyup,this.option.debounce)}this._bindEvents()},destroy:function(){this.$el.off("."+this.id);this.$el=this.el=this.completer=null},select:function(){throw new Error("Not implemented")},getCaretPosition:function(){var position=this._getCaretRelativePosition();var offset=this.$el.offset();var $parent=this.option.appendTo;if($parent){if(!($parent instanceof $)){$parent=$($parent)}var parentOffset=$parent.offsetParent().offset();offset.top-=parentOffset.top;offset.left-=parentOffset.left}position.top+=offset.top;position.left+=offset.left;return position},focus:function(){this.$el.focus()},_bindEvents:function(){this.$el.on("keyup."+this.id,$.proxy(this._onKeyup,this))},_onKeyup:function(e){if(this._skipSearch(e)){return}this.completer.trigger(this.getTextFromHeadToCaret(),true)},_skipSearch:function(clickEvent){switch(clickEvent.keyCode){case 9:case 13:case 40:case 38:case 27:return true}if(clickEvent.ctrlKey)switch(clickEvent.keyCode){case 78:case 80:return true}}});$.fn.textcomplete.Adapter=Adapter}(jQuery);+function($){"use strict";function Textarea(element,completer,option){this.initialize(element,completer,option)}$.extend(Textarea.prototype,$.fn.textcomplete.Adapter.prototype,{select:function(value,strategy,e){var pre=this.getTextFromHeadToCaret();var post=this.el.value.substring(this.el.selectionEnd);var newSubstr=strategy.replace(value,e);var regExp;if(typeof newSubstr!=="undefined"){if($.isArray(newSubstr)){post=newSubstr[1]+post;newSubstr=newSubstr[0]}regExp=$.isFunction(strategy.match)?strategy.match(pre):strategy.match;pre=pre.replace(regExp,newSubstr);this.$el.val(pre+post);this.el.selectionStart=this.el.selectionEnd=pre.length}},getTextFromHeadToCaret:function(){return this.el.value.substring(0,this.el.selectionEnd)},_getCaretRelativePosition:function(){var p=$.fn.textcomplete.getCaretCoordinates(this.el,this.el.selectionStart);return{top:p.top+this._calculateLineHeight()-this.$el.scrollTop(),left:p.left-this.$el.scrollLeft(),lineHeight:this._calculateLineHeight()}},_calculateLineHeight:function(){var lineHeight=parseInt(this.$el.css("line-height"),10);if(isNaN(lineHeight)){var parentNode=this.el.parentNode;var temp=document.createElement(this.el.nodeName);var style=this.el.style;temp.setAttribute("style","margin:0px;padding:0px;font-family:"+style.fontFamily+";font-size:"+style.fontSize);temp.innerHTML="test";parentNode.appendChild(temp);lineHeight=temp.clientHeight;parentNode.removeChild(temp)}return lineHeight}});$.fn.textcomplete.Textarea=Textarea}(jQuery);+function($){"use strict";var sentinelChar="å¶";function IETextarea(element,completer,option){this.initialize(element,completer,option);$("<span>"+sentinelChar+"</span>").css({position:"absolute",top:-9999,left:-9999}).insertBefore(element)}$.extend(IETextarea.prototype,$.fn.textcomplete.Textarea.prototype,{select:function(value,strategy,e){var pre=this.getTextFromHeadToCaret();var post=this.el.value.substring(pre.length);var newSubstr=strategy.replace(value,e);var regExp;if(typeof newSubstr!=="undefined"){if($.isArray(newSubstr)){post=newSubstr[1]+post;newSubstr=newSubstr[0]}regExp=$.isFunction(strategy.match)?strategy.match(pre):strategy.match;pre=pre.replace(regExp,newSubstr);this.$el.val(pre+post);this.el.focus();var range=this.el.createTextRange();range.collapse(true);range.moveEnd("character",pre.length);range.moveStart("character",pre.length);range.select()}},getTextFromHeadToCaret:function(){this.el.focus();var range=document.selection.createRange();range.moveStart("character",-this.el.value.length);var arr=range.text.split(sentinelChar);return arr.length===1?arr[0]:arr[1]}});$.fn.textcomplete.IETextarea=IETextarea}(jQuery);+function($){"use strict";function ContentEditable(element,completer,option){this.initialize(element,completer,option)}$.extend(ContentEditable.prototype,$.fn.textcomplete.Adapter.prototype,{select:function(value,strategy,e){var pre=this.getTextFromHeadToCaret();var sel=this.el.ownerDocument.getSelection();var range=sel.getRangeAt(0);var selection=range.cloneRange();selection.selectNodeContents(range.startContainer);var content=selection.toString();var post=content.substring(range.startOffset);var newSubstr=strategy.replace(value,e);var regExp;if(typeof newSubstr!=="undefined"){if($.isArray(newSubstr)){post=newSubstr[1]+post;newSubstr=newSubstr[0]}regExp=$.isFunction(strategy.match)?strategy.match(pre):strategy.match;pre=pre.replace(regExp,newSubstr).replace(/ $/,"&nbsp");range.selectNodeContents(range.startContainer);range.deleteContents();var preWrapper=this.el.ownerDocument.createElement("div");preWrapper.innerHTML=pre;var postWrapper=this.el.ownerDocument.createElement("div");postWrapper.innerHTML=post;var fragment=this.el.ownerDocument.createDocumentFragment();var childNode;var lastOfPre;while(childNode=preWrapper.firstChild){lastOfPre=fragment.appendChild(childNode)}while(childNode=postWrapper.firstChild){fragment.appendChild(childNode)}range.insertNode(fragment);range.setStartAfter(lastOfPre);range.collapse(true);sel.removeAllRanges();sel.addRange(range)}},_getCaretRelativePosition:function(){var range=this.el.ownerDocument.getSelection().getRangeAt(0).cloneRange();var node=this.el.ownerDocument.createElement("span");range.insertNode(node);range.selectNodeContents(node);range.deleteContents();var $node=$(node);var position=$node.offset();position.left-=this.$el.offset().left;position.top+=$node.height()-this.$el.offset().top;position.lineHeight=$node.height();if(this.completer.$iframe){var iframePosition=this.completer.$iframe.offset();position.top+=iframePosition.top;position.left+=iframePosition.left;position.top-=this.$el.scrollTop()}$node.remove();return position},getTextFromHeadToCaret:function(){var range=this.el.ownerDocument.getSelection().getRangeAt(0);var selection=range.cloneRange();selection.selectNodeContents(range.startContainer);return selection.toString().substring(0,range.startOffset)}});$.fn.textcomplete.ContentEditable=ContentEditable}(jQuery);+function($){"use strict";function CKEditor(element,completer,option){this.initialize(element,completer,option)}$.extend(CKEditor.prototype,$.fn.textcomplete.ContentEditable.prototype,{_bindEvents:function(){var $this=this;this.option.ckeditor_instance.on("key",function(event){var domEvent=event.data;$this._onKeyup(domEvent);if($this.completer.dropdown.shown&&$this._skipSearch(domEvent)){return false}},null,null,1);this.$el.on("keyup."+this.id,$.proxy(this._onKeyup,this))}});$.fn.textcomplete.CKEditor=CKEditor}(jQuery);(function($){var properties=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];var isBrowser=typeof window!=="undefined";var isFirefox=isBrowser&&window.mozInnerScreenX!=null;function getCaretCoordinates(element,position,options){if(!isBrowser){throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser")}var debug=options&&options.debug||false;if(debug){var el=document.querySelector("#input-textarea-caret-position-mirror-div");if(el){el.parentNode.removeChild(el)}}var div=document.createElement("div");div.id="input-textarea-caret-position-mirror-div";document.body.appendChild(div);var style=div.style;var computed=window.getComputedStyle?getComputedStyle(element):element.currentStyle;style.whiteSpace="pre-wrap";if(element.nodeName!=="INPUT")style.wordWrap="break-word";style.position="absolute";if(!debug)style.visibility="hidden";properties.forEach(function(prop){style[prop]=computed[prop]});if(isFirefox){if(element.scrollHeight>parseInt(computed.height))style.overflowY="scroll"}else{style.overflow="hidden"}div.textContent=element.value.substring(0,position);if(element.nodeName==="INPUT")div.textContent=div.textContent.replace(/\s/g,"Â ");var span=document.createElement("span");span.textContent=element.value.substring(position)||".";div.appendChild(span);var coordinates={top:span.offsetTop+parseInt(computed["borderTopWidth"]),left:span.offsetLeft+parseInt(computed["borderLeftWidth"])};if(debug){span.style.backgroundColor="#aaa"}else{document.body.removeChild(div)}return coordinates}$.fn.textcomplete.getCaretCoordinates=getCaretCoordinates})(jQuery);return jQuery});var requirejs,require,define;(function(ga){function ka(b,c,d,g){return g||""}function K(b){return"[object Function]"===Q.call(b)}function L(b){return"[object Array]"===Q.call(b)}function y(b,c){if(b){var d;for(d=0;d<b.length&&(!b[d]||!c(b[d],d,b));d+=1);}}function X(b,c){if(b){var d;for(d=b.length-1;-1<d&&(!b[d]||!c(b[d],d,b));--d);}}function x(b,c){return la.call(b,c)}function e(b,c){return x(b,c)&&b[c]}function D(b,c){for(var d in b)if(x(b,d)&&c(b[d],d))break}function Y(b,c,d,g){c&&D(c,function(c,e){if(d||!x(b,e))!g||"object"!==typeof c||!c||L(c)||K(c)||c instanceof RegExp?b[e]=c:(b[e]||(b[e]={}),Y(b[e],c,d,g))});return b}function z(b,c){return function(){return c.apply(b,arguments)}}function ha(b){throw b}function ia(b){if(!b)return b;var c=ga;y(b.split("."),function(b){c=c[b]});return c}function F(b,c,d,g){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b);c.requireType=b;c.requireModules=g;d&&(c.originalError=d);return c}function ma(b){function c(a,n,b){var h,k,f,c,d,l,g,r;n=n&&n.split("/");var q=p.map,m=q&&q["*"];if(a){a=a.split("/");k=a.length-1;p.nodeIdCompat&&U.test(a[k])&&(a[k]=a[k].replace(U,""));"."===a[0].charAt(0)&&n&&(k=n.slice(0,n.length-1),a=k.concat(a));k=a;for(f=0;f<k.length;f++)c=k[f],"."===c?(k.splice(f,1),--f):".."===c&&0!==f&&(1!==f||".."!==k[2])&&".."!==k[f-1]&&0<f&&(k.splice(f-1,2),f-=2);a=a.join("/")}if(b&&q&&(n||m)){k=a.split("/");f=k.length;a:for(;0<f;--f){d=k.slice(0,f).join("/");if(n)for(c=n.length;0<c;--c)if(b=e(q,n.slice(0,c).join("/")))if(b=e(b,d)){h=b;l=f;break a}!g&&m&&e(m,d)&&(g=e(m,d),r=f)}!h&&g&&(h=g,l=r);h&&(k.splice(0,l,h),a=k.join("/"))}return(h=e(p.pkgs,a))?h:a}function d(a){E&&y(document.getElementsByTagName("script"),function(n){if(n.getAttribute("data-requiremodule")===a&&n.getAttribute("data-requirecontext")===l.contextName)return n.parentNode.removeChild(n),!0})}function m(a){var n=e(p.paths,a);if(n&&L(n)&&1<n.length)return n.shift(),l.require.undef(a),l.makeRequire(null,{skipMap:!0})([a]),!0}function r(a){var n,b=a?a.indexOf("!"):-1;-1<b&&(n=a.substring(0,b),a=a.substring(b+1,a.length));return[n,a]}function q(a,n,b,h){var k,f,d=null,g=n?n.name:null,p=a,q=!0,m="";a||(q=!1,a="_@r"+(Q+=1));a=r(a);d=a[0];a=a[1];d&&(d=c(d,g,h),f=e(v,d));a&&(d?m=f&&f.normalize?f.normalize(a,function(a){return c(a,g,h)}):-1===a.indexOf("!")?c(a,g,h):a:(m=c(a,g,h),a=r(m),d=a[0],m=a[1],b=!0,k=l.nameToUrl(m)));b=!d||f||b?"":"_unnormalized"+(T+=1);return{prefix:d,name:m,parentMap:n,unnormalized:!!b,url:k,originalName:p,isDefine:q,id:(d?d+"!"+m:m)+b}}function u(a){var b=a.id,c=e(t,b);c||(c=t[b]=new l.Module(a));return c}function w(a,b,c){var h=a.id,k=e(t,h);if(!x(v,h)||k&&!k.defineEmitComplete)if(k=u(a),k.error&&"error"===b)c(k.error);else k.on(b,c);else"defined"===b&&c(v[h])}function A(a,b){var c=a.requireModules,h=!1;if(b)b(a);else if(y(c,function(b){if(b=e(t,b))b.error=a,b.events.error&&(h=!0,b.emit("error",a))}),!h)g.onError(a)}function B(){V.length&&(y(V,function(a){var b=a[0];"string"===typeof b&&(l.defQueueMap[b]=!0);G.push(a)}),V=[])}function C(a){delete t[a];delete Z[a]}function J(a,b,c){var h=a.map.id;a.error?a.emit("error",a.error):(b[h]=!0,y(a.depMaps,function(h,f){var d=h.id,g=e(t,d);!g||a.depMatched[f]||c[d]||(e(b,d)?(a.defineDep(f,v[d]),a.check()):J(g,b,c))}),c[h]=!0)}function H(){var a,b,c=(a=1e3*p.waitSeconds)&&l.startTime+a<(new Date).getTime(),h=[],k=[],f=!1,g=!0;if(!aa){aa=!0;D(Z,function(a){var l=a.map,e=l.id;if(a.enabled&&(l.isDefine||k.push(a),!a.error))if(!a.inited&&c)m(e)?f=b=!0:(h.push(e),d(e));else if(!a.inited&&a.fetched&&l.isDefine&&(f=!0,!l.prefix))return g=!1});if(c&&h.length)return a=F("timeout","Load timeout for modules: "+h,null,h),a.contextName=l.contextName,A(a);g&&y(k,function(a){J(a,{},{})});c&&!b||!f||!E&&!ja||ba||(ba=setTimeout(function(){ba=0;H()},50));aa=!1}}function I(a){x(v,a[0])||u(q(a[0],null,!0)).init(a[1],a[2])}function O(a){a=a.currentTarget||a.srcElement;var b=l.onScriptLoad;a.detachEvent&&!ca?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=l.onScriptError;a.detachEvent&&!ca||a.removeEventListener("error",b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}function P(){var a;for(B();G.length;){a=G.shift();if(null===a[0])return A(F("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));I(a)}l.defQueueMap={}}var aa,da,l,R,ba,p={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},t={},Z={},ea={},G=[],v={},W={},fa={},Q=1,T=1;R={require:function(a){return a.require?a.require:a.require=l.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports?v[a.map.id]=a.exports:a.exports=v[a.map.id]={}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return e(p.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}};da=function(a){this.events=e(ea,a.id)||{};this.map=a;this.shim=e(p.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};da.prototype={init:function(a,b,c,h){h=h||{};if(!this.inited){this.factory=b;if(c)this.on("error",c);else this.events.error&&(c=z(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.errback=c;this.inited=!0;this.ignore=h.ignore;h.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,--this.depCount,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0;l.startTime=(new Date).getTime();var a=this.map;if(this.shim)l.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],z(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;W[a]||(W[a]=!0,l.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var h=this.exports,k=this.factory;if(!this.inited)x(l.defQueueMap,c)||this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(K(k)){if(this.events.error&&this.map.isDefine||g.onError!==ha)try{h=l.execCb(c,k,b,h)}catch(d){a=d}else h=l.execCb(c,k,b,h);this.map.isDefine&&void 0===h&&((b=this.module)?h=b.exports:this.usingExports&&(h=this.exports));if(a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",A(this.error=a)}else h=k;this.exports=h;if(this.map.isDefine&&!this.ignore&&(v[c]=h,g.onResourceLoad)){var f=[];y(this.depMaps,function(a){f.push(a.normalizedMap||a)});g.onResourceLoad(l,this.map,f)}C(c);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}},callPlugin:function(){var a=this.map,b=a.id,d=q(a.prefix);this.depMaps.push(d);w(d,"defined",z(this,function(h){var k,f,d=e(fa,this.map.id),M=this.map.name,r=this.map.parentMap?this.map.parentMap.name:null,m=l.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(h.normalize&&(M=h.normalize(M,function(a){return c(a,r,!0)})||""),f=q(a.prefix+"!"+M,this.map.parentMap),w(f,"defined",z(this,function(a){this.map.normalizedMap=f;this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),h=e(t,f.id)){this.depMaps.push(f);if(this.events.error)h.on("error",z(this,function(a){this.emit("error",a)}));h.enable()}}else d?(this.map.url=l.nameToUrl(d),this.load()):(k=z(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),
k.error=z(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];D(t,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&C(a.map.id)});A(a)}),k.fromText=z(this,function(h,c){var d=a.name,f=q(d),M=S;c&&(h=c);M&&(S=!1);u(f);x(p.config,b)&&(p.config[d]=p.config[b]);try{g.exec(h)}catch(e){return A(F("fromtexteval","fromText eval for "+b+" failed: "+e,e,[b]))}M&&(S=!0);this.depMaps.push(f);l.completeLoad(d);m([d],k)}),h.load(a.name,m,k,p))}));l.enable(d,this);this.pluginMaps[d.id]=d},enable:function(){Z[this.map.id]=this;this.enabling=this.enabled=!0;y(this.depMaps,z(this,function(a,b){var c,h;if("string"===typeof a){a=q(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=e(R,a.id)){this.depExports[b]=c(this);return}this.depCount+=1;w(a,"defined",z(this,function(a){this.undefed||(this.defineDep(b,a),this.check())}));this.errback?w(a,"error",z(this,this.errback)):this.events.error&&w(a,"error",z(this,function(a){this.emit("error",a)}))}c=a.id;h=t[c];x(R,c)||!h||h.enabled||l.enable(a,this)}));D(this.pluginMaps,z(this,function(a){var b=e(t,a.id);b&&!b.enabled&&l.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){y(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};l={config:p,contextName:b,registry:t,defined:v,urlFetched:W,defQueue:G,defQueueMap:{},Module:da,makeModuleMap:q,nextTick:g.nextTick,onError:A,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");if("string"===typeof a.urlArgs){var b=a.urlArgs;a.urlArgs=function(a,c){return(-1===c.indexOf("?")?"?":"&")+b}}var c=p.shim,h={paths:!0,bundles:!0,config:!0,map:!0};D(a,function(a,b){h[b]?(p[b]||(p[b]={}),Y(p[b],a,!0,!0)):p[b]=a});a.bundles&&D(a.bundles,function(a,b){y(a,function(a){a!==b&&(fa[a]=b)})});a.shim&&(D(a.shim,function(a,b){L(a)&&(a={deps:a});!a.exports&&!a.init||a.exportsFn||(a.exportsFn=l.makeShimExports(a));c[b]=a}),p.shim=c);a.packages&&y(a.packages,function(a){var b;a="string"===typeof a?{name:a}:a;b=a.name;a.location&&(p.paths[b]=a.location);p.pkgs[b]=a.name+"/"+(a.main||"main").replace(na,"").replace(U,"")});D(t,function(a,b){a.inited||a.map.unnormalized||(a.map=q(b,null,!0))});(a.deps||a.callback)&&l.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;a.init&&(b=a.init.apply(ga,arguments));return b||a.exports&&ia(a.exports)}},makeRequire:function(a,n){function m(c,d,f){var e,r;n.enableBuildCallback&&d&&K(d)&&(d.__requireJsBuild=!0);if("string"===typeof c){if(K(d))return A(F("requireargs","Invalid require call"),f);if(a&&x(R,c))return R[c](t[a.id]);if(g.get)return g.get(l,c,a,m);e=q(c,a,!1,!0);e=e.id;return x(v,e)?v[e]:A(F("notloaded",'Module name "'+e+'" has not been loaded yet for context: '+b+(a?"":". Use require([])")))}P();l.nextTick(function(){P();r=u(q(null,a));r.skipMap=n.skipMap;r.init(c,d,f,{enabled:!0});H()});return m}n=n||{};Y(m,{isBrowser:E,toUrl:function(b){var d,f=b.lastIndexOf("."),g=b.split("/")[0];-1!==f&&("."!==g&&".."!==g||1<f)&&(d=b.substring(f,b.length),b=b.substring(0,f));return l.nameToUrl(c(b,a&&a.id,!0),d,!0)},defined:function(b){return x(v,q(b,a,!1,!0).id)},specified:function(b){b=q(b,a,!1,!0).id;return x(v,b)||x(t,b)}});a||(m.undef=function(b){B();var c=q(b,a,!0),f=e(t,b);f.undefed=!0;d(b);delete v[b];delete W[c.url];delete ea[b];X(G,function(a,c){a[0]===b&&G.splice(c,1)});delete l.defQueueMap[b];f&&(f.events.defined&&(ea[b]=f.events),C(b))});return m},enable:function(a){e(t,a.id)&&u(a).enable()},completeLoad:function(a){var b,c,d=e(p.shim,a)||{},g=d.exports;for(B();G.length;){c=G.shift();if(null===c[0]){c[0]=a;if(b)break;b=!0}else c[0]===a&&(b=!0);I(c)}l.defQueueMap={};c=e(t,a);if(!b&&!x(v,a)&&c&&!c.inited)if(!p.enforceDefine||g&&ia(g))I([a,d.deps||[],d.exportsFn]);else return m(a)?void 0:A(F("nodefine","No define call for "+a,null,[a]));H()},nameToUrl:function(a,b,c){var d,k,f,m;(d=e(p.pkgs,a))&&(a=d);if(d=e(fa,a))return l.nameToUrl(d,b,c);if(g.jsExtRegExp.test(a))d=a+(b||"");else{d=p.paths;k=a.split("/");for(f=k.length;0<f;--f)if(m=k.slice(0,f).join("/"),m=e(d,m)){L(m)&&(m=m[0]);k.splice(0,f,m);break}d=k.join("/");d+=b||(/^data\:|^blob\:|\?/.test(d)||c?"":".js");d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":p.baseUrl)+d}return p.urlArgs&&!/^blob\:/.test(d)?d+p.urlArgs(a,d):d},load:function(a,b){g.load(l,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||oa.test((a.currentTarget||a.srcElement).readyState))N=null,a=O(a),l.completeLoad(a.id)},onScriptError:function(a){var b=O(a);if(!m(b.id)){var c=[];D(t,function(a,d){0!==d.indexOf("_@r")&&y(a.depMaps,function(a){if(a.id===b.id)return c.push(d),!0})});return A(F("scripterror",'Script error for "'+b.id+(c.length?'", needed by: '+c.join(", "):'"'),a,[b.id]))}}};l.require=l.makeRequire();return l}function pa(){if(N&&"interactive"===N.readyState)return N;X(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState)return N=b});return N}var g,B,C,H,O,I,N,P,u,T,qa=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ra=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,U=/\.js$/,na=/^\.\//;B=Object.prototype;var Q=B.toString,la=B.hasOwnProperty,E=!("undefined"===typeof window||"undefined"===typeof navigator||!window.document),ja=!E&&"undefined"!==typeof importScripts,oa=E&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,ca="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),J={},w={},V=[],S=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(K(requirejs))return;w=requirejs;requirejs=void 0}"undefined"===typeof require||K(require)||(w=require,require=void 0);g=requirejs=function(b,c,d,m){var r,q="_";L(b)||"string"===typeof b||(r=b,L(c)?(b=c,c=d,d=m):b=[]);r&&r.context&&(q=r.context);(m=e(J,q))||(m=J[q]=g.s.newContext(q));r&&m.configure(r);return m.require(b,c,d)};g.config=function(b){return g(b)};g.nextTick="undefined"!==typeof setTimeout?function(b){setTimeout(b,4)}:function(b){b()};require||(require=g);g.version="2.2.0";g.jsExtRegExp=/^\/|:|\?|\.js$/;g.isBrowser=E;B=g.s={contexts:J,newContext:ma};g({});y(["toUrl","undef","defined","specified"],function(b){g[b]=function(){var c=J._;return c.require[b].apply(c,arguments)}});E&&(C=B.head=document.getElementsByTagName("head")[0],H=document.getElementsByTagName("base")[0])&&(C=B.head=H.parentNode);g.onError=ha;g.createNode=function(b,c,d){c=b.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");c.type=b.scriptType||"text/javascript";c.charset="utf-8";c.async=!0;return c};g.load=function(b,c,d){var m=b&&b.config||{},e;if(E){e=g.createNode(m,c,d);e.setAttribute("data-requirecontext",b.contextName);e.setAttribute("data-requiremodule",c);!e.attachEvent||e.attachEvent.toString&&0>e.attachEvent.toString().indexOf("[native code")||ca?(e.addEventListener("load",b.onScriptLoad,!1),e.addEventListener("error",b.onScriptError,!1)):(S=!0,e.attachEvent("onreadystatechange",b.onScriptLoad));e.src=d;if(m.onNodeCreated)m.onNodeCreated(e,m,c,d);P=e;H?C.insertBefore(e,H):C.appendChild(e);P=null;return e}if(ja)try{setTimeout(function(){},0),importScripts(d),b.completeLoad(c)}catch(q){b.onError(F("importscripts","importScripts failed for "+c+" at "+d,q,[c]))}};E&&!w.skipDataMain&&X(document.getElementsByTagName("script"),function(b){C||(C=b.parentNode);if(O=b.getAttribute("data-main"))return u=O,w.baseUrl||-1!==u.indexOf("!")||(I=u.split("/"),u=I.pop(),T=I.length?I.join("/")+"/":"./",w.baseUrl=T),u=u.replace(U,""),g.jsExtRegExp.test(u)&&(u=O),w.deps=w.deps?w.deps.concat(u):[u],!0});define=function(b,c,d){var e,g;"string"!==typeof b&&(d=c,c=b,b=null);L(c)||(d=c,c=null);!c&&K(d)&&(c=[],d.length&&(d.toString().replace(qa,ka).replace(ra,function(b,d){c.push(d)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c)));S&&(e=P||pa())&&(b||(b=e.getAttribute("data-requiremodule")),g=J[e.getAttribute("data-requirecontext")]);g?(g.defQueue.push([b,c,d]),g.defQueueMap[b]=!0):V.push([b,c,d])};define.amd={jQuery:!0};g.exec=function(b){return eval(b)};g(w)}})(this);require.config({baseUrl:config.relative_path+"/src/modules",waitSeconds:7,urlArgs:config["cache-buster"],paths:{forum:"../client",admin:"../admin",vendor:"../../vendor",plugins:"../../plugins"}});(function(root,factory){"use strict";root.bootbox=factory(root.jQuery)})(this,function init($,undefined){"use strict";var templates={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'>"+"<div class='modal-dialog'>"+"<div class='modal-content'>"+"<div class='modal-body'><div class='bootbox-body'></div></div>"+"</div>"+"</div>"+"</div>",header:"<div class='modal-header'>"+"<h4 class='modal-title'></h4>"+"</div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}};var defaults={locale:"en",backdrop:"static",animate:true,className:null,closeButton:true,show:true,container:"body"};var exports={};function _t(key){var locale=locales[defaults.locale];return locale?locale[key]:locales.en[key]}function processCallback(e,dialog,callback){e.stopPropagation();e.preventDefault();var preserveDialog=$.isFunction(callback)&&callback.call(dialog,e)===false;if(!preserveDialog){dialog.modal("hide")}}function getKeyLength(obj){var k,t=0;for(k in obj){t++}return t}function each(collection,iterator){var index=0;$.each(collection,function(key,value){iterator(key,value,index++)})}function sanitize(options){var buttons;var total;if(typeof options!=="object"){throw new Error("Please supply an object of options")}if(!options.message){throw new Error("Please specify a message")}options=$.extend({},defaults,options);if(!options.buttons){options.buttons={}}buttons=options.buttons;total=getKeyLength(buttons);each(buttons,function(key,button,index){if($.isFunction(button)){button=buttons[key]={callback:button}}if($.type(button)!=="object"){throw new Error("button with key "+key+" must be an object")}if(!button.label){button.label=key}if(!button.className){if(total<=2&&index===total-1){button.className="btn-primary"}else{button.className="btn-default"}}});return options}function mapArguments(args,properties){var argn=args.length;var options={};if(argn<1||argn>2){throw new Error("Invalid argument length")}if(argn===2||typeof args[0]==="string"){options[properties[0]]=args[0];options[properties[1]]=args[1]}else{options=args[0]}return options}function mergeArguments(defaults,args,properties){return $.extend(true,{},defaults,mapArguments(args,properties))}function mergeDialogOptions(className,labels,properties,args){var baseOptions={className:"bootbox-"+className,buttons:createLabels.apply(null,labels)};return validateButtons(mergeArguments(baseOptions,args,properties),labels)}function createLabels(){var buttons={};for(var i=0,j=arguments.length;i<j;i++){var argument=arguments[i];var key=argument.toLowerCase();var value=argument.toUpperCase();buttons[key]={label:_t(value)}}return buttons}function validateButtons(options,buttons){var allowedButtons={};each(buttons,function(key,value){allowedButtons[value]=true});each(options.buttons,function(key){if(allowedButtons[key]===undefined){throw new Error("button key "+key+" is not allowed (options are "+buttons.join("\n")+")")}});return options}exports.alert=function(){var options;options=mergeDialogOptions("alert",["ok"],["message","callback"],arguments);if(options.callback&&!$.isFunction(options.callback)){throw new Error("alert requires callback property to be a function when provided")}options.buttons.ok.callback=options.onEscape=function(){if($.isFunction(options.callback)){return options.callback.call(this)}return true};return exports.dialog(options)};exports.confirm=function(){var options;options=mergeDialogOptions("confirm",["cancel","confirm"],["message","callback"],arguments);options.buttons.cancel.callback=options.onEscape=function(){return options.callback.call(this,false)};options.buttons.confirm.callback=function(){return options.callback.call(this,true)};if(!$.isFunction(options.callback)){throw new Error("confirm requires a callback")}return exports.dialog(options)};exports.prompt=function(){var options;var defaults;var dialog;var form;var input;var shouldShow;var inputOptions;form=$(templates.form);defaults={className:"bootbox-prompt",buttons:createLabels("cancel","confirm"),value:"",inputType:"text"};options=validateButtons(mergeArguments(defaults,arguments,["title","callback"]),["cancel","confirm"]);shouldShow=options.show===undefined?true:options.show;options.message=form;options.buttons.cancel.callback=options.onEscape=function(){return options.callback.call(this,null)};options.buttons.confirm.callback=function(){var value;switch(options.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":value=input.val();break;case"checkbox":var checkedItems=input.find("input:checked");value=[];each(checkedItems,function(_,item){value.push($(item).val())});break}return options.callback.call(this,value)};options.show=false;if(!options.title){throw new Error("prompt requires a title")}if(!$.isFunction(options.callback)){throw new Error("prompt requires a callback")}if(!templates.inputs[options.inputType]){throw new Error("invalid prompt type")}input=$(templates.inputs[options.inputType]);switch(options.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":input.val(options.value);break;case"select":var groups={};inputOptions=options.inputOptions||[];if(!$.isArray(inputOptions)){throw new Error("Please pass an array of input options")}if(!inputOptions.length){throw new Error("prompt with select requires options")}each(inputOptions,function(_,option){var elem=input;if(option.value===undefined||option.text===undefined){throw new Error("given options in wrong format")}if(option.group){if(!groups[option.group]){groups[option.group]=$("<optgroup/>").attr("label",option.group)}elem=groups[option.group]}elem.append("<option value='"+option.value+"'>"+option.text+"</option>")});each(groups,function(_,group){input.append(group)});input.val(options.value);break;case"checkbox":var values=$.isArray(options.value)?options.value:[options.value];inputOptions=options.inputOptions||[];if(!inputOptions.length){throw new Error("prompt with checkbox requires options")}if(!inputOptions[0].value||!inputOptions[0].text){throw new Error("given options in wrong format")}input=$("<div/>");each(inputOptions,function(_,option){var checkbox=$(templates.inputs[options.inputType]);checkbox.find("input").attr("value",option.value);checkbox.find("label").append(option.text);each(values,function(_,value){if(value===option.value){checkbox.find("input").prop("checked",true)}});input.append(checkbox)});break}if(options.placeholder){input.attr("placeholder",options.placeholder)}if(options.pattern){input.attr("pattern",options.pattern)}if(options.maxlength){input.attr("maxlength",options.maxlength)}form.append(input);form.on("submit",function(e){e.preventDefault();e.stopPropagation();dialog.find(".btn-primary").click()});dialog=exports.dialog(options);dialog.off("shown.bs.modal");dialog.on("shown.bs.modal",function(){input.focus()});if(shouldShow===true){dialog.modal("show")}return dialog};exports.dialog=function(options){options=sanitize(options);var dialog=$(templates.dialog);var innerDialog=dialog.find(".modal-dialog");var body=dialog.find(".modal-body");var buttons=options.buttons;var buttonStr="";var callbacks={onEscape:options.onEscape};if($.fn.modal===undefined){throw new Error("$.fn.modal is not defined; please double check you have included "+"the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ "+"for more details.")}each(buttons,function(key,button){buttonStr+="<button data-bb-handler='"+key+"' type='button' class='btn "+button.className+"'>"+button.label+"</button>";callbacks[key]=button.callback});body.find(".bootbox-body").html(options.message);if(options.animate===true){dialog.addClass("fade")}if(options.className){dialog.addClass(options.className)}if(options.size==="large"){innerDialog.addClass("modal-lg")}else if(options.size==="small"){innerDialog.addClass("modal-sm")}if(options.title){body.before(templates.header)}if(options.closeButton){var closeButton=$(templates.closeButton);if(options.title){dialog.find(".modal-header").prepend(closeButton)}else{closeButton.css("margin-top","-10px").prependTo(body)}}if(options.title){dialog.find(".modal-title").html(options.title)}if(buttonStr.length){body.after(templates.footer);dialog.find(".modal-footer").html(buttonStr)}dialog.on("hidden.bs.modal",function(e){if(e.target===this){dialog.remove()}});dialog.on("shown.bs.modal",function(){dialog.find(".btn-primary:first").focus()});if(options.backdrop!=="static"){dialog.on("click.dismiss.bs.modal",function(e){if(dialog.children(".modal-backdrop").length){e.currentTarget=dialog.children(".modal-backdrop").get(0)}if(e.target!==e.currentTarget){return}dialog.trigger("escape.close.bb")})}dialog.on("escape.close.bb",function(e){if(callbacks.onEscape){processCallback(e,dialog,callbacks.onEscape)}});dialog.on("click",".modal-footer button",function(e){var callbackKey=$(this).data("bb-handler");processCallback(e,dialog,callbacks[callbackKey])});dialog.on("click",".bootbox-close-button",function(e){processCallback(e,dialog,callbacks.onEscape)});dialog.on("keyup",function(e){if(e.which===27){dialog.trigger("escape.close.bb")}});$(options.container).append(dialog);dialog.modal({backdrop:options.backdrop?"static":false,keyboard:false,show:false});if(options.show){dialog.modal("show")}return dialog};exports.setDefaults=function(){var values={};if(arguments.length===2){values[arguments[0]]=arguments[1]}else{values=arguments[0]}$.extend(defaults,values)};exports.hideAll=function(){$(".bootbox").modal("hide");return exports};var locales={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"}};exports.addLocale=function(name,values){$.each(["OK","CANCEL","CONFIRM"],function(_,v){if(!values[v]){throw new Error("Please supply a translation for '"+v+"'")}});locales[name]={OK:values.OK,CANCEL:values.CANCEL,CONFIRM:values.CONFIRM};return exports};exports.removeLocale=function(name){delete locales[name];return exports};exports.setLocale=function(name){return exports.setDefaults("locale",name)};exports.init=function(_$){return init(_$||$)};return exports});require(["translator"],function(shim){"use strict";function descendantTextNodes(node){var textNodes=[];function helper(node){if(node.nodeType===3){textNodes.push(node)}else{for(var i=0,c=node.childNodes,l=c.length;i<l;i+=1){helper(c[i])}}}helper(node);return textNodes}var translator=shim.Translator.create();var dialog=bootbox.dialog;var attrsToTranslate=["placeholder","title","value"];bootbox.dialog=function(options){var show,$elem,nodes,text,attrNodes,attrText;show=options.show!==false;options.show=false;$elem=dialog.call(bootbox,options);if(/\[\[.+\]\]/.test($elem[0].outerHTML)){nodes=descendantTextNodes($elem[0]);text=nodes.map(function(node){return node.nodeValue}).join("  ||  ");attrNodes=attrsToTranslate.reduce(function(prev,attr){return prev.concat(nodes.map.call($elem.find("["+attr+'*="[["]'),function(el){return[attr,el]}))},[]);attrText=attrNodes.map(function(node){return node[1].getAttribute(node[0])}).join("  ||  ");Promise.all([translator.translate(text),translator.translate(attrText)]).then(function(ref){var translated=ref[0];var translatedAttrs=ref[1];if(translated){translated.split("  ||  ").forEach(function(html,i){$(nodes[i]).replaceWith(html)})}if(translatedAttrs){translatedAttrs.split("  ||  ").forEach(function(text,i){attrNodes[i][1].setAttribute(attrNodes[i][0],text)})}if(show){$elem.modal("show")}})}else if(show){$elem.modal("show")}return $elem};Promise.all([translator.translateKey("modules:bootbox.ok",[]),translator.translateKey("modules:bootbox.cancel",[]),translator.translateKey("modules:bootbox.confirm",[])]).then(function(translations){var lang=shim.getLanguage();bootbox.addLocale(lang,{OK:translations[0],CANCEL:translations[1],CONFIRM:translations[2]});bootbox.setLocale(lang)})});(function(){var Tinycon={};var currentFavicon=null;var originalFavicon=null;var faviconImage=null;var canvas=null;var options={};var r=window.devicePixelRatio||1;var size=16*r;var defaults={width:7,height:9,font:10*r+"px arial",color:"#ffffff",background:"#F03D25",fallback:true,crossOrigin:true,abbreviate:true};var ua=function(){var agent=navigator.userAgent.toLowerCase();return function(browser){return agent.indexOf(browser)!==-1}}();var browser={ie:ua("trident"),chrome:ua("chrome"),webkit:ua("chrome")||ua("safari"),safari:ua("safari")&&!ua("chrome"),mozilla:ua("mozilla")&&!ua("chrome")&&!ua("safari")};var getFaviconTag=function(){var links=document.getElementsByTagName("link");for(var i=0,len=links.length;i<len;i++){if((links[i].getAttribute("rel")||"").match(/\bicon\b/i)){return links[i]}}return false};var removeFaviconTag=function(){var links=document.getElementsByTagName("link");var head=document.getElementsByTagName("head")[0];for(var i=0,len=links.length;i<len;i++){var exists=typeof links[i]!=="undefined";if(exists&&(links[i].getAttribute("rel")||"").match(/\bicon\b/i)){head.removeChild(links[i])}}};var getCurrentFavicon=function(){if(!originalFavicon||!currentFavicon){var tag=getFaviconTag();currentFavicon=tag?tag.getAttribute("href"):"/favicon.ico";if(!originalFavicon){originalFavicon=currentFavicon}}return currentFavicon};var getCanvas=function(){if(!canvas){canvas=document.createElement("canvas");canvas.width=size;canvas.height=size}return canvas};var setFaviconTag=function(url){if(url){removeFaviconTag();var link=document.createElement("link");link.type="image/x-icon";link.rel="icon";link.href=url;document.getElementsByTagName("head")[0].appendChild(link)}};var log=function(message){if(window.console)window.console.log(message)};var drawFavicon=function(label,color){if(!getCanvas().getContext||browser.ie||browser.safari||options.fallback==="force"){return updateTitle(label)}var context=getCanvas().getContext("2d");var color=color||"#000000";var src=getCurrentFavicon();faviconImage=document.createElement("img");faviconImage.onload=function(){context.clearRect(0,0,size,size);context.drawImage(faviconImage,0,0,faviconImage.width,faviconImage.height,0,0,size,size);if((label+"").length>0)drawBubble(context,label,color);refreshFavicon()};if(!src.match(/^data/)&&options.crossOrigin){faviconImage.crossOrigin="anonymous"}faviconImage.src=src};var updateTitle=function(label){if(options.fallback){var originalTitle=document.title;if(originalTitle[0]==="("){originalTitle=originalTitle.slice(originalTitle.indexOf(" "))}if((label+"").length>0){document.title="("+label+") "+originalTitle}else{document.title=originalTitle}}};var drawBubble=function(context,label,color){if(typeof label=="number"&&label>99&&options.abbreviate){label=abbreviateNumber(label)}var len=(label+"").length-1;var width=options.width*r+6*r*len,height=options.height*r;var top=size-height,left=size-width-r,bottom=16*r,right=16*r,radius=2*r;context.font=(browser.webkit?"bold ":"")+options.font;context.fillStyle=options.background;context.strokeStyle=options.background;context.lineWidth=r;context.beginPath();context.moveTo(left+radius,top);context.quadraticCurveTo(left,top,left,top+radius);context.lineTo(left,bottom-radius);context.quadraticCurveTo(left,bottom,left+radius,bottom);context.lineTo(right-radius,bottom);context.quadraticCurveTo(right,bottom,right,bottom-radius);context.lineTo(right,top+radius);context.quadraticCurveTo(right,top,right-radius,top);context.closePath();context.fill();context.beginPath();context.strokeStyle="rgba(0,0,0,0.3)";context.moveTo(left+radius/2,bottom);context.lineTo(right-radius/2,bottom);context.stroke();context.fillStyle=options.color;context.textAlign="right";context.textBaseline="top";context.fillText(label,r===2?29:15,browser.mozilla?7*r:6*r)};var refreshFavicon=function(){if(!getCanvas().getContext)return;setFaviconTag(getCanvas().toDataURL())};var abbreviateNumber=function(label){var metricPrefixes=[["G",1e9],["M",1e6],["k",1e3]];for(var i=0;i<metricPrefixes.length;++i){if(label>=metricPrefixes[i][1]){label=round(label/metricPrefixes[i][1])+metricPrefixes[i][0];break}}return label};var round=function(value,precision){var number=new Number(value);return number.toFixed(precision)};Tinycon.setOptions=function(custom){options={};if(custom.colour){custom.color=custom.colour}for(var key in defaults){options[key]=custom.hasOwnProperty(key)?custom[key]:defaults[key]}return this};Tinycon.setImage=function(url){currentFavicon=url;refreshFavicon();return this};Tinycon.setBubble=function(label,color){label=label||"";drawFavicon(label,color);return this};Tinycon.reset=function(){currentFavicon=originalFavicon;setFaviconTag(originalFavicon)};Tinycon.setOptions(defaults);window.Tinycon=Tinycon})();var XRegExp=function(p){function A(a,b,d){var c;if(d)if(a.__proto__)a.__proto__=e.prototype;else for(c in e.prototype)a[c]=e.prototype[c];a[g]={captureNames:b};return a}function w(a){return j.replace.call(a,/([\s\S])(?=[\s\S]*\1)/g,"")}function s(a,b){if(!e.isRegExp(a))throw new TypeError("Type RegExp expected");var d=j.exec.call(/\/([a-z]*)$/i,String(a))[1],b=b||{};b.add&&(d=w(d+b.add));b.remove&&(d=j.replace.call(d,RegExp("["+b.remove+"]+","g"),""));return a=A(RegExp(a.source,d),a[g]&&a[g].captureNames?a[g].captureNames.slice(0):null,b.addProto)}function t(a,b){if(Array.prototype.indexOf)return a.indexOf(b);var d=a.length,c;for(c=0;c<d;++c)if(a[c]===b)return c;return-1}function u(a,b){return B.call(a)==="[object "+b+"]"}function C(a,b,d){return j.test.call(-1<d.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,a.slice(b))}function D(a){a=a||{};u(a,"String")&&(a=e.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{}));return a}function E(a){if(!/^[\w$]$/.test(a))throw Error("Flag must be a single character A-Za-z0-9_$");F[a]=!0}function G(a){RegExp.prototype.exec=(a?l:j).exec;RegExp.prototype.test=(a?l:j).test;String.prototype.match=(a?l:j).match;String.prototype.replace=(a?l:j).replace;String.prototype.split=(a?l:j).split;o.natives=a}function q(a){if(null==a)throw new TypeError("Cannot convert null or undefined to object");return a}var g="xregexp",e,o={astral:!1,natives:!1},j={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},l={},x={},v={},y=[],H={default:/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,class:/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},I=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,J=j.exec.call(/()??/,"")[1]===p,z=RegExp.prototype.sticky!==p,F={g:!0,i:!0,m:!0,y:z},B={}.toString,n;e=function(a,b){var d={hasNamedCapture:!1,captureNames:[]},c="default",f="",i=0,h,k;if(e.isRegExp(a)){if(b!==p)throw new TypeError("Cannot supply flags when copying a RegExp");return s(a,{addProto:!0})}a=a===p?"":String(a);b=b===p?"":String(b);k=a+"/"+b;if(!v[k]){h=a;var g=b,m;if(w(g)!==g)throw new SyntaxError("Invalid duplicate regex flag "+g);h=j.replace.call(h,/^\(\?([\w$]+)\)/,function(a,b){if(j.test.call(/[gy]/,b))throw new SyntaxError("Cannot use flag g or y in mode modifier "+a);g=w(g+b);return""});for(m=0;m<g.length;++m)if(!F[g.charAt(m)])throw new SyntaxError("Unknown regex flag "+g.charAt(m));h={pattern:h,flags:g};a=h.pattern;for(b=h.flags;i<a.length;){do{h=a;m=b;for(var l=i,n=c,o=d,q=y.length,t=null,u=void 0,r=void 0;q--;)if(r=y[q],(r.scope===n||"all"===r.scope)&&(!r.flag||-1<m.indexOf(r.flag)))if(u=e.exec(h,r.regex,l,"sticky")){t={matchLength:u[0].length,output:r.handler.call(o,u,n,m),reparse:r.reparse};break}(h=t)&&h.reparse&&(a=a.slice(0,i)+h.output+a.slice(i+h.matchLength))}while(h&&h.reparse);h?(f+=h.output,i+=h.matchLength||1):(h=e.exec(a,H[c],i,"sticky")[0],f+=h,i+=h.length,"["===h&&"default"===c?c="class":"]"===h&&"class"===c&&(c="default"))}v[k]={pattern:j.replace.call(f,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:j.replace.call(b,/[^gimy]+/g,""),captures:d.hasNamedCapture?d.captureNames:null}}k=v[k];return A(RegExp(k.pattern,k.flags),k.captures,!0)};e.prototype=RegExp();e.version="3.0.0-pre";e.addToken=function(a,b,d){var d=d||{},c=d.optionalFlags,f;d.flag&&E(d.flag);if(c){c=j.split.call(c,"");for(f=0;f<c.length;++f)E(c[f])}y.push({regex:s(a,{add:"g"+(z?"y":"")}),handler:b,scope:d.scope||"default",flag:d.flag,reparse:d.reparse});e.cache.flush("patterns")};e.cache=function(a,b){var d=a+"/"+(b||"");return x[d]||(x[d]=e(a,b))};e.cache.flush=function(a){"patterns"===a?v={}:x={}};e.escape=function(a){return j.replace.call(q(a),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};e.exec=function(a,b,d,c){var f="g";if(z&&(c||b.sticky&&!1!==c))f+="y";b[g]=b[g]||{captureNames:null};f=b[g][f]||(b[g][f]=s(b,{add:f,remove:!1===c?"y":""}));f.lastIndex=d=d||0;a=l.exec.call(f,a);c&&(a&&a.index!==d)&&(a=null);b.global&&(b.lastIndex=a?f.lastIndex:0);return a};e.forEach=function(a,b,d,c){for(var f=0,i=-1;f=e.exec(a,b,f);)d.call(c,f,++i,a,b),f=f.index+(f[0].length||1);return c};e.globalize=function(a){return s(a,{add:"g",addProto:!0})};e.install=function(a){a=D(a);!o.astral&&a.astral&&(e.cache.flush("patterns"),o.astral=!0);!o.natives&&a.natives&&G(!0)};e.isInstalled=function(a){return!!o[a]};e.isRegExp=function(a){return"[object RegExp]"===B.call(a)};e.match=function(a,b,d){var c=b.global&&"one"!==d||"all"===d,f=(c?"g":"")+(b.sticky?"y":"");b[g]=b[g]||{captureNames:null};f=b[g][f||"noGY"]||(b[g][f||"noGY"]=s(b,{add:f,remove:"one"===d?"g":""}));a=j.match.call(q(a),f);b.global&&(b.lastIndex="one"===d&&a?a.index+a[0].length:0);return c?a||[]:a&&a[0]};e.matchChain=function(a,b){return function c(a,i){var h=b[i].regex?b[i]:{regex:b[i]},k=[],g=function(a){if(h.backref){if(!(a.hasOwnProperty(h.backref)||+h.backref<a.length))throw new ReferenceError("Backreference to undefined group: "+h.backref);k.push(a[h.backref]||"")}else k.push(a[0])},m;for(m=0;m<a.length;++m)e.forEach(a[m],h.regex,g);return i===b.length-1||!k.length?k:c(k,i+1)}([a],0)};e.replace=function(a,b,d,c){var f=e.isRegExp(b),i=b.global&&"one"!==c||"all"===c,h=(i?"g":"")+(b.sticky?"y":""),k=b;f?(b[g]=b[g]||{captureNames:null},k=b[g][h||"noGY"]||(b[g][h||"noGY"]=s(b,{add:h,remove:"one"===c?"g":""}))):i&&(k=RegExp(e.escape(String(b)),"g"));a=l.replace.call(q(a),k,d);f&&b.global&&(b.lastIndex=0);return a};e.replaceEach=function(a,b){var d,c;for(d=0;d<b.length;++d)c=b[d],a=e.replace(a,c[0],c[1],c[2]);return a};e.split=function(a,b,d){return l.split.call(q(a),b,d)};e.test=function(a,b,d,c){return!!e.exec(a,b,d,c)};e.uninstall=function(a){a=D(a);o.astral&&a.astral&&(e.cache.flush("patterns"),o.astral=!1);o.natives&&a.natives&&G(!1)};e.union=function(a,b){var d=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,c=[],f=0,i,h,k,l=function(a,b,d){
var c=h[f-i];if(b){if(++f,c)return"(?<"+c+">"}else if(d)return"\\"+(+d+i);return a},m;if(!u(a,"Array")||!a.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(m=0;m<a.length;++m)k=a[m],e.isRegExp(k)?(i=f,h=k[g]&&k[g].captureNames||[],c.push(j.replace.call(e(k.source).source,d,l))):c.push(e.escape(k));return e(c.join("|"),b)};l.exec=function(a){var b=this.lastIndex,d=j.exec.apply(this,arguments),c,f;if(d){!J&&(1<d.length&&-1<t(d,""))&&(c=s(this,{remove:"g"}),j.replace.call(String(a).slice(d.index),c,function(){var a=arguments.length,b;for(b=1;b<a-2;++b)arguments[b]===p&&(d[b]=p)}));if(this[g]&&this[g].captureNames)for(f=1;f<d.length;++f)(c=this[g].captureNames[f-1])&&(d[c]=d[f]);this.global&&(!d[0].length&&this.lastIndex>d.index)&&(this.lastIndex=d.index)}this.global||(this.lastIndex=b);return d};l.test=function(a){return!!l.exec.call(this,a)};l.match=function(a){var b;if(e.isRegExp(a)){if(a.global)return b=j.match.apply(this,arguments),a.lastIndex=0,b}else a=RegExp(a);return l.exec.call(a,q(this))};l.replace=function(a,b){var d=e.isRegExp(a),c,f,i;d?(a[g]&&(f=a[g].captureNames),c=a.lastIndex):a+="";i=u(b,"Function")?j.replace.call(String(this),a,function(){var c=arguments,e;if(f){c[0]=new String(c[0]);for(e=0;e<f.length;++e)f[e]&&(c[0][f[e]]=c[e+1])}if(d&&a.global)a.lastIndex=c[c.length-2]+c[0].length;return b.apply(p,c)}):j.replace.call(null==this?this:String(this),a,function(){var a=arguments;return j.replace.call(String(b),I,function(b,d,c){if(d){c=+d;if(c<=a.length-3)return a[c]||"";c=f?t(f,d):-1;if(c<0)throw new SyntaxError("Backreference to undefined group "+b);return a[c+1]||""}if(c==="$")return"$";if(c==="&"||+c===0)return a[0];if(c==="`")return a[a.length-1].slice(0,a[a.length-2]);if(c==="'")return a[a.length-1].slice(a[a.length-2]+a[0].length);c=+c;if(!isNaN(c)){if(c>a.length-3)throw new SyntaxError("Backreference to undefined group "+b);return a[c]||""}throw new SyntaxError("Invalid token "+b)})});d&&(a.lastIndex=a.global?0:c);return i};l.split=function(a,b){if(!e.isRegExp(a))return j.split.apply(this,arguments);var d=String(this),c=[],f=a.lastIndex,g=0,h,b=(b===p?-1:b)>>>0;e.forEach(d,a,function(a){a.index+a[0].length>g&&(c.push(d.slice(g,a.index)),1<a.length&&a.index<d.length&&Array.prototype.push.apply(c,a.slice(1)),h=a[0].length,g=a.index+h)});g===d.length?(!j.test.call(a,"")||h)&&c.push(""):c.push(d.slice(g));a.lastIndex=f;return c.length>b?c.slice(0,b):c};n=e.addToken;n(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(a,b){if("B"===a[1]&&"default"===b)return a[0];throw new SyntaxError("Invalid escape "+a[0])},{scope:"all"});n(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"});n(/\(\?#[^)]*\)/,function(a,b,d){return C(a.input,a.index+a[0].length,d)?"":"(?:)"});n(/\s+|#.*/,function(a,b,d){return C(a.input,a.index+a[0].length,d)?"":"(?:)"},{flag:"x"});n(/\./,function(){return"[\\s\\S]"},{flag:"s"});n(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?t(this.captureNames,a[1])+1:+a[1],d=a.index+a[0].length;if(!b||b>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+a[0]);return"\\"+b+(d===a.input.length||isNaN(a.input.charAt(d))?"":"(?:)")});n(/\\(\d+)/,function(a,b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"});n(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("Cannot use integer as capture name "+a[0]);if("length"===a[1]||"__proto__"===a[1])throw new SyntaxError("Cannot use reserved word as capture name "+a[0]);if(-1<t(this.captureNames,a[1]))throw new SyntaxError("Cannot use same name for multiple groups "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});n(/\((?!\?)/,function(a,b,d){if(-1<d.indexOf("n"))return"(?:";this.captureNames.push(null);return"("},{optionalFlags:"n"});return e}();(function(XRegExp){"use strict";var unicode={};function normalize(name){return name.replace(/[- _]+/g,"").toLowerCase()}function pad4(str){while(str.length<4){str="0"+str}return str}function dec(hex){return parseInt(hex,16)}function hex(dec){return parseInt(dec,10).toString(16)}function charCode(chr){var esc=/^\\[xu](.+)/.exec(chr);return esc?dec(esc[1]):chr.charCodeAt(chr.charAt(0)==="\\"?1:0)}function invertBmp(range){var output="",lastEnd=-1,start;XRegExp.forEach(range,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(m){start=charCode(m[1]);if(start>lastEnd+1){output+="\\u"+pad4(hex(lastEnd+1));if(start>lastEnd+2){output+="-\\u"+pad4(hex(start-1))}}lastEnd=charCode(m[2]||m[1])});if(lastEnd<65535){output+="\\u"+pad4(hex(lastEnd+1));if(lastEnd<65534){output+="-\\uFFFF"}}return output}function cacheInvertedBmp(slug){var prop="b!";return unicode[slug][prop]||(unicode[slug][prop]=invertBmp(unicode[slug].bmp))}function buildAstral(slug,isNegated){var item=unicode[slug],combined="";if(item.bmp&&!item.isBmpLast){combined="["+item.bmp+"]"+(item.astral?"|":"")}if(item.astral){combined+=item.astral}if(item.isBmpLast&&item.bmp){combined+=(item.astral?"|":"")+"["+item.bmp+"]"}return isNegated?"(?:(?!"+combined+")(?:[ï¿½-ï¿½][ï¿½-ï¿½]|[\0-ï¿¿]))":"(?:"+combined+")"}function cacheAstral(slug,isNegated){var prop=isNegated?"a!":"a=";return unicode[slug][prop]||(unicode[slug][prop]=buildAstral(slug,isNegated))}XRegExp.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(match,scope,flags){var ERR_DOUBLE_NEG="Invalid double negation ",ERR_UNKNOWN_NAME="Unknown Unicode token ",ERR_UNKNOWN_REF="Unicode token missing data ",ERR_ASTRAL_ONLY="Astral mode required for Unicode token ",ERR_ASTRAL_IN_CLASS="Astral mode does not support Unicode tokens within character classes",isNegated=match[1]==="P"||!!match[2],isAstralMode=flags.indexOf("A")>-1||XRegExp.isInstalled("astral"),slug=normalize(match[4]||match[3]),item=unicode[slug];if(match[1]==="P"&&match[2]){throw new SyntaxError(ERR_DOUBLE_NEG+match[0])}if(!unicode.hasOwnProperty(slug)){throw new SyntaxError(ERR_UNKNOWN_NAME+match[0])}if(item.inverseOf){slug=normalize(item.inverseOf);if(!unicode.hasOwnProperty(slug)){throw new ReferenceError(ERR_UNKNOWN_REF+match[0]+" -> "+item.inverseOf)}item=unicode[slug];isNegated=!isNegated}if(!(item.bmp||isAstralMode)){throw new SyntaxError(ERR_ASTRAL_ONLY+match[0])}if(isAstralMode){if(scope==="class"){throw new SyntaxError(ERR_ASTRAL_IN_CLASS)}return cacheAstral(slug,isNegated)}return scope==="class"?isNegated?cacheInvertedBmp(slug):item.bmp:(isNegated?"[^":"[")+item.bmp+"]"},{scope:"all",optionalFlags:"A"});XRegExp.addUnicodeData=function(data){var ERR_NO_NAME="Unicode token requires name",ERR_NO_DATA="Unicode token has no character data ",item,i;for(i=0;i<data.length;++i){item=data[i];if(!item.name){throw new Error(ERR_NO_NAME)}if(!(item.inverseOf||item.bmp||item.astral)){throw new Error(ERR_NO_DATA+item.name)}unicode[normalize(item.name)]=item;if(item.alias){unicode[normalize(item.alias)]=item}}XRegExp.cache.flush("patterns")};XRegExp.addUnicodeData([{name:"L",alias:"Letter",bmp:"A-Za-zÂªÂµÂºÃ-ÃÃ-Ã¶Ã¸-ËË-ËË -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½ÎÎ-ÎÎÎ-Î¡Î£-ÏµÏ·-ÒÒ-Ô§Ô±-ÕÕÕ¡-Ö×-×ª×°-×²Ø -ÙÙ®Ù¯Ù±-ÛÛÛ¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ-Ü¯Ý-Þ¥Þ±ß-ßªß´ßµßºà -à à à ¤à ¨à¡-à¡à¢ à¢¢-à¢¬à¤-à¤¹à¤½à¥à¥-à¥¡à¥±-à¥·à¥¹-à¥¿à¦-à¦à¦à¦à¦-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§à§à§à§-à§¡à§°à§±à¨-à¨à¨à¨à¨-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©-à©à©à©²-à©´àª-àªàª-àªàª-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à¬-à¬à¬à¬à¬-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­à­à­-à­¡à­±à®à®-à®à®-à®à®-à®à®à®à®à®à®à®£à®¤à®¨-à®ªà®®-à®¹à¯à°-à°à°-à°à°-à°¨à°ª-à°³à°µ-à°¹à°½à±à±à± à±¡à²-à²à²-à²à²-à²¨à²ª-à²³à²µ-à²¹à²½à³à³ à³¡à³±à³²à´-à´à´-à´à´-à´ºà´½àµàµ àµ¡àµº-àµ¿à¶-à¶à¶-à¶±à¶³-à¶»à¶½à·-à·à¸-à¸°à¸²à¸³à¹-à¹àºàºàºàºàºàºàºàº-àºàº-àºàº¡-àº£àº¥àº§àºªàº«àº­-àº°àº²àº³àº½à»-à»à»à»-à»à¼à½-à½à½-à½¬à¾-à¾á-áªá¿á-áá-áá¡á¥á¦á®-á°áµ-ááá -áááá-áºá¼-áá-áá-ááá-áá -áá-áá-á°á²-áµá¸-á¾áá-áá-áá-áá-áá-áá-áá -á´á-á¬á¯-á¿á-áá -áªá-áá-áá -á±á-áá -á¬á®-á°á-á³ááá  -á¡·á¢-á¢¨á¢ªá¢°-á£µá¤-á¤á¥-á¥­á¥°-á¥´á¦-á¦«á§-á§á¨-á¨á¨ -á©áª§á¬-á¬³á­-á­á®-á® á®®á®¯á®º-á¯¥á°-á°£á±-á±á±-á±½á³©-á³¬á³®-á³±á³µá³¶á´-á¶¿á¸-á¼á¼-á¼á¼ -á½á½-á½á½-á½á½á½á½á½-á½½á¾-á¾´á¾¶-á¾¼á¾¾á¿-á¿á¿-á¿á¿-á¿á¿-á¿á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â-ââââ-âââ-ââ¤â¦â¨âª-â­â¯-â¹â¼-â¿â-âââââ°-â°®â°°-â±â± -â³¤â³«-â³®â³²â³³â´-â´¥â´§â´­â´°-âµ§âµ¯â¶-â¶â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·-â·â·-â·â·-â·â·-â·â¸¯ããã±-ãµã»ã¼ã-ãã-ãã¡-ãºã¼-ã¿ã-ã­ã±-ãã -ãºã°-ã¿ã-ä¶µä¸-é¿ê-êê-ê½ê-êê-êêªê«ê-ê®ê¿-êê -ê¥ê-êê¢-êê-êê-êê -êªê¸-ê ê -ê ê -ê ê -ê ¢ê¡-ê¡³ê¢-ê¢³ê£²-ê£·ê£»ê¤-ê¤¥ê¤°-ê¥ê¥ -ê¥¼ê¦-ê¦²ê§ê¨-ê¨¨ê©-ê©ê©-ê©ê© -ê©¶ê©ºêª-êª¯êª±êªµêª¶êª¹-êª½ê«ê«ê«-ê«ê« -ê«ªê«²-ê«´ê¬-ê¬ê¬-ê¬ê¬-ê¬ê¬ -ê¬¦ê¬¨-ê¬®ê¯-ê¯¢ê°-í£í°-íí-í»ï¤-ï©­ï©°-ï«ï¬-ï¬ï¬-ï¬ï¬ï¬-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­ï­ï­ï­ï­-ï®±ï¯-ï´½ïµ-ï¶ï¶-ï·ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½ï½¦-ï¾¾ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿-ï¿",astral:"ï¿½[ï¿½-ï¿½ï¿½ï¿½-ï¿½ï¿½ï¿½ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½ï¿½ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½ï¿½ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½ï¿½-ï¿½]|ï¿½[ï¿½ï¿½]|[ï¿½ï¿½-ï¿½ï¿½-ï¿½][ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½ï¿½-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½ï¿½-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½ï¿½-ï¿½]|ï¿½[ï¿½-ï¿½]"}])})(XRegExp);"use strict";(function(module){var templates={cache:{},globals:{}},helpers={},loader,worker;var regexes={nestedConditionals:/(?!^)<!-- IF([\s\S]*?)ENDIF[ a-zA-Z0-9\/\._:]*-->(?!$)/g,conditionalBlock:/[\r\n?\n]*?<!-- ELSE -->[\r\n?\n]*?/,conditionalHelper:/<!-- IF function.([\s\S]*?)-->/,conditionalArgs:/[ ]*,[ ]*/,innerLoop:/\s*<!-- BEGIN([\s\S]*)END ([\s\S]*?)-->/g,removeTabspace:/^\t*?|^\r\n?\t*?|\t?$|\r\n?\t*?$/g,removeWhitespace:/(^[\r\n?|\n]*)|([\r\n\t]*$)/g,cleanupEmptyLoops:/\s*<!-- BEGIN([\s\S]*?)END ([\s\S]*?)-->/g,cleanupMissingKeys:/[\r\n]*?[\/]?\{[a-zA-Z0-9\.]+[\r\n]*?\}/g,leftoverRoot:/\.\.\/([\S]*?)[\}| ]/g,getUndefinedKeys:/<!-- IF[\s!]*([\s\S]*?) -->/g,escapeBlocks:/<!--([\s\S]*?)-->/g,escapeKeys:/\{([\s\S]*?)\}/g,rootKey:/\{\.\.\/([\S]*?)\}/g,rootConditional:/IF \.\.\/([\S]*?)/g,rootConditionalFalse:/IF !\.\.\/([\S]*?)/g};if(typeof self!=="undefined"&&self.addEventListener){self.addEventListener("message",function(ev){if(!ev||!ev.data||!ev.data.template||!ev.data.object){return}var data=ev.data;self.postMessage({result:!data.block?templates.parse(data.template,data.object):templates.parse(data.template,data.block,data.object),signature:data.signature},"*")},false)}var callbacks={},signature=0,MAX_SAFE_INT=Math.pow(2,53)-1;templates.setupWebWorker=function(pathToScript){try{worker=new Worker(pathToScript);worker.addEventListener("message",function(e){if(callbacks[e.data.signature]){callbacks[e.data.signature](e.data.result)}},false)}catch(err){}};function launchWorker(template,obj,block,callback){signature++;if(signature>MAX_SAFE_INT){signature=0}obj=sanitise(obj);worker.postMessage({template:template,object:obj,block:block,signature:signature});callbacks[signature]=function(result){callback(result);delete callbacks[signature]}}function sanitise(obj){for(var prop in obj){if(!obj.hasOwnProperty(prop)||typeof obj[prop]==="function"){delete obj[prop]}}return obj}templates.parse=function(template,block,obj,callback){if(typeof block!=="string"){callback=obj;obj=block;block=false}if(!template){return callback?callback(""):""}obj=registerGlobals(obj||{});if(loader&&callback){if(!templates.cache[template]){loader(template,function(loaded){templates.cache[template]=loaded;launchCallback(loaded,obj,block,callback)})}else{launchCallback(templates.cache[template],obj,block,callback)}}else if(callback){launchCallback(template,obj,block,callback)}else{return parseTemplate(block,template,obj)}};function launchCallback(template,obj,block,callback){if(worker){launchWorker(template,obj,block,callback)}else{callback(parseTemplate(block,template,obj))}}function parseTemplate(block,template,obj){block=!block?template:templates.getBlock(template,block);template=parse(block,obj);return parseFunctions(template,template,obj)}templates.registerHelper=function(name,func){helpers[name]=func};templates.registerLoader=function(func){loader=func};templates.setGlobal=function(key,value){templates.globals[key]=value};templates.getBlock=function(template,block){return template.replace(new RegExp("[\\s\\S]*(<!-- BEGIN "+block+" -->[\\s\\S]*?<!-- END "+block+" -->)[\\s\\S]*","g"),"$1").replace(/\.\.\//g,block.replace(/[^a-zA-Z0-9\.]+/g,"")+".")};templates.flush=function(){templates.cache={}};function express(filename,options,fn){var fs=require("fs"),tpl=filename.replace(options.settings.views+"/","");options._locals=null;if(!templates.cache[tpl]){fs.readFile(filename,function(err,html){templates.cache[tpl]=(html||"").toString();return fn(err,templates.parse(templates.cache[tpl],options))})}else{return fn(null,templates.parse(templates.cache[tpl],options))}}function replace(string,regex,value){return string.replace(regex,function(){return value.toString()})}function replaceValue(template,key,value){var string;value=value.toString();string=replace(template,new RegExp("{{"+key+"}}","g"),value);return replace(string,new RegExp("{"+key+"}","g"),value.replace(regexes.escapeKeys,"&#123;$1&#125;").replace(regexes.escapeBlocks,"&lt;!--$1--&gt;"))}function makeRegex(block,namespace){namespace="("+namespace+")?";return new RegExp("<!-- BEGIN "+namespace+block+" -->[\\s\\S]*?<!-- END "+namespace+block+" -->")}function makeBlockRegex(block,namespace){namespace="("+namespace+")?";return new RegExp("(<!-- BEGIN "+namespace+block+" -->[\\r\\n?|\\n]?)|(<!-- END "+namespace+block+" -->)","g")}function makeConditionalRegex(block){return new RegExp("<!-- IF "+block+" -->([\\s\\S]*?)<!-- ENDIF "+block.split(",")[0]+" -->","g")}function makeStatementRegex(key){return new RegExp("(<!-- IF "+key+" -->)|(<!-- ENDIF "+key.split(",")[0]+" -->)","g")}function registerGlobals(obj){for(var g in templates.globals){if(templates.globals.hasOwnProperty(g)){obj[g]=obj[g]||templates.globals[g]}}return obj}function checkConditionals(template,key,value){return checkConditional(checkConditional(template,"!"+key,!value),key,value)}function checkConditional(template,key,value){var matches=template.match(makeConditionalRegex(key));if(matches){var statement=makeStatementRegex(key);for(var i=0,ii=matches.length;i<ii;i++){var nestedConditionals=matches[i].match(regexes.nestedConditionals),match=replace(matches[i].replace(statement,""),regexes.nestedConditionals,"<!-- NESTED -->"),conditionalBlock=match.split(regexes.conditionalBlock);if(conditionalBlock[1]){template=replace(template,matches[i],replace(conditionalBlock[value?0:1],regexes.removeWhitespace,""))}else{template=replace(template,matches[i],value?replace(match,regexes.removeWhitespace,""):"")}if(nestedConditionals){for(var x=0,xx=nestedConditionals.length;x<xx;x++){template=replace(template,"<!-- NESTED -->",nestedConditionals[x])}}}}return template}function checkConditionalHelpers(template,obj){var string,func;while((string=template.match(regexes.conditionalHelper))!==null){var fn=string[1].trim(),args=fn.split(regexes.conditionalArgs);func=args[0];if(helpers[func]){args.shift();args.unshift(obj);template=checkConditionals(template,"function."+fn,helpers[func].apply(null,args))}else{template=template.replace(makeConditionalRegex("function."+fn))}}return template}function callMethod(method,parameters){return method.apply(templates,parameters)}function parseFunctions(block,result,obj){var functions=block.match(/{function.*?}/g,"");if(!functions){return result}for(var i=0,ii=functions.length;i<ii;++i){var search=functions[i],fn=functions[i].replace("{function.","").split("}").shift().split(/[ ]*,[ ]*/),method=fn.shift(),parameters=[];if(fn.length){for(var j=0,jj=fn.length;j<jj;j++){parameters.push(obj[fn[j]])}}else{parameters=[obj]}if(helpers[method]){result=replace(result,new RegExp(search,"g"),callMethod(helpers[method],parameters))}}return result}function parseObject(template,array,key,namespace){return parseArray(template,array,key,namespace,true)}function parseArray(template,array,key,namespace,isObject){if(!isObject){template=checkConditionals(template,namespace+key+".length",array[key].length)}var regex=makeRegex(key,namespace),block,result;if(!array[key].length&&!isObject){return template.replace(regex,"")}while((block=template.match(regex))!==null){block=block[0].replace(makeBlockRegex(key,namespace),"");var innerLoops=block.match(regexes.innerLoop);block=block.replace(regexes.innerLoop,"<!-- INNER LOOP -->").replace(regexes.rootKey,"{"+namespace+key+".$1}").replace(regexes.rootConditional,"IF "+namespace+key+".$1").replace(regexes.rootConditionalFalse,"IF !"+namespace+key+".$1");if(innerLoops){for(var x=0,xx=innerLoops.length;x<xx;x++){block=replace(block,"<!-- INNER LOOP -->",innerLoops[x])}}block=block.replace(regexes.removeTabspace,"");result=parseArrayBlock(block,array[key],namespace+key+".",isObject);template=replace(template,regex,result.replace(regexes.removeWhitespace,""))}return template}function parseArrayBlock(block,array,namespace,isObject){var template="";for(var iterator in array){if(array.hasOwnProperty(iterator)){var result="";if(!isObject){iterator=parseInt(iterator,10)}result+=parse(block,array[iterator],namespace);if(!isObject){result=checkConditionals(result,"@first",iterator===0);result=checkConditionals(result,"@last",iterator===array.length-1);result=checkConditionals(result,"@value",!!array[iterator]);result=result.replace(/@index/g,iterator).replace(/@value/g,array[iterator])}else{result=checkConditionals(result,"@value",!!array[iterator]);result=result.replace(/@key/g,iterator).replace(/@value/g,array[iterator])}result=parseFunctions(block,result,array[iterator]);template=template+result}}return template}function parseValue(template,key,value){template=checkConditionals(template,key,value);return replaceValue(template,key,value)}function parse(template,obj,namespace){namespace=namespace||"";var key;for(key in obj){if(obj.hasOwnProperty(key)){if(typeof obj[key]==="undefined"||typeof obj[key]==="function"||!template.match(key)||obj[key]&&obj[key].constructor===Array){continue}else if(obj[key]===null){template=replaceValue(template,namespace+key,"")}else if(obj[key]instanceof Object){template=parseObject(template,obj,key,namespace);template=checkConditionals(template,key,obj[key]);template=parse(template,obj[key],namespace+key+".")}else{template=parseValue(template,namespace+key,obj[key])}}}for(key in obj){if(obj.hasOwnProperty(key)&&Array.isArray(obj[key])&&template.match(key)){template=replaceValue(template,namespace+key+".length",obj[key].length);template=parseArray(template,obj,key,namespace)}}if(namespace){namespace=""}else{template=checkConditionalHelpers(template,obj);template=cleanup(template,obj)}return template}function cleanup(template,obj){template=template.replace(regexes.cleanupEmptyLoops,"");var missingKeys=template.match(regexes.cleanupMissingKeys);for(var missingKey in missingKeys){if(missingKeys.hasOwnProperty(missingKey)){if(missingKeys[missingKey].substr(0,1)!=="/"){template=template.replace(missingKeys[missingKey],"")}else{template=template.replace(missingKeys[missingKey],missingKeys[missingKey].slice(1))}}}var undefinedKey,undefinedKeys={},parseUndefined;while((undefinedKey=regexes.getUndefinedKeys.exec(template))!==null){if(template.match(new RegExp("<!-- ENDIF[\\s!]*"+undefinedKey[1]+" -->"))){undefinedKeys[undefinedKey[1]]=false;parseUndefined=true}}var leftoverRoot=template.match(/\.\.\/([\S]*?)[\}| ]/g);for(var i in leftoverRoot){if(leftoverRoot.hasOwnProperty(i)){var key=leftoverRoot[i].match(/\.\.\/([\S]*?)[\}| ]/)[1].split(".")[0];if(obj[key]){undefinedKeys["../"+key]=obj[key];parseUndefined=true}}}return parseUndefined?parse(template,undefinedKeys,""):template}module.exports=templates;module.exports.__express=express;if("undefined"!==typeof window){window.templates=module.exports}})("undefined"===typeof module?{module:{exports:{}}}:module);(function(module){"use strict";var utils,fs,XRegExp;if("undefined"===typeof window){fs=require("fs");XRegExp=require("xregexp");process.profile=function(operation,start){console.log("%s took %d milliseconds",operation,process.elapsedTimeSince(start))};process.elapsedTimeSince=function(start){var diff=process.hrtime(start);return diff[0]*1e3+diff[1]/1e6}}else{XRegExp=window.XRegExp}module.exports=utils={generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==="x"?r:r&3|8;return v.toString(16)})},walk:function(dir,done){var results=[];fs.readdir(dir,function(err,list){if(err){return done(err)}var pending=list.length;if(!pending){return done(null,results)}list.forEach(function(file){file=dir+"/"+file;fs.stat(file,function(err,stat){if(err){return done(err)}if(stat&&stat.isDirectory()){utils.walk(file,function(err,res){if(err){return done(err)}results=results.concat(res);if(!--pending){done(null,results)}})}else{results.push(file);if(!--pending){done(null,results)}}})})})},invalidUnicodeChars:XRegExp("[^\\p{L}\\s\\d\\-_]","g"),invalidLatinChars:/[^\w\s\d\-_]/g,trimRegex:/^\s+|\s+$/g,collapseWhitespace:/\s+/g,collapseDash:/-+/g,trimTrailingDash:/-$/g,trimLeadingDash:/^-/g,isLatin:/^[\w\d\s.,\-@]+$/,languageKeyRegex:/\[\[[\w]+:.+\]\]/,slugify:function(str,preserveCase){if(!str){return""}str=str.replace(utils.trimRegex,"");if(utils.isLatin.test(str)){str=str.replace(utils.invalidLatinChars,"-")}else{str=XRegExp.replace(str,utils.invalidUnicodeChars,"-")}str=!preserveCase?str.toLocaleLowerCase():str;str=str.replace(utils.collapseWhitespace,"-");str=str.replace(utils.collapseDash,"-");str=str.replace(utils.trimTrailingDash,"");str=str.replace(utils.trimLeadingDash,"");return str},cleanUpTag:function(tag,maxLength){if(typeof tag!=="string"||!tag.length){return""}tag=tag.trim().toLowerCase();tag=tag.replace(/\u202E/gi,"");tag=tag.replace(/[,\/#!$%\^\*;:{}=_`<>'"~()?\|]/g,"");tag=tag.substr(0,maxLength||15).trim();var matches=tag.match(/^[.-]*(.+?)[.-]*$/);if(matches&&matches.length>1){tag=matches[1]}return tag},removePunctuation:function(str){return str.replace(/[\.,-\/#!$%\^&\*;:{}=\-_`<>'"~()?]/g,"")},isEmailValid:function(email){return typeof email==="string"&&email.length&&email.indexOf("@")!==-1},isUserNameValid:function(name){return name&&name!==""&&/^['"\s\-\+.*0-9\u00BF-\u1FFF\u2C00-\uD7FF\w]+$/.test(name)},isPasswordValid:function(password){return typeof password==="string"&&password.length},isNumber:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},hasLanguageKey:function(input){return utils.languageKeyRegex.test(input)},merge:function(){var result={},obj,keys;for(var i=0;i<arguments.length;i++){obj=arguments[i]||{};keys=Object.keys(obj);for(var j=0;j<keys.length;j++){result[keys[j]]=obj[keys[j]]}}return result},fileExtension:function(path){return(""+path).split(".").pop()},extensionMimeTypeMap:{bmp:"image/bmp",cmx:"image/x-cmx",cod:"image/cis-cod",gif:"image/gif",ico:"image/x-icon",ief:"image/ief",jfif:"image/pipeg",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",pbm:"image/x-portable-bitmap",pgm:"image/x-portable-graymap",pnm:"image/x-portable-anymap",ppm:"image/x-portable-pixmap",ras:"image/x-cmu-raster",rgb:"image/x-rgb",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",xbm:"image/x-xbitmap",xpm:"image/x-xpixmap",xwd:"image/x-xwindowdump"},fileMimeType:function(path){return utils.extensionToMimeType(utils.fileExtension(path))},extensionToMimeType:function(extension){return utils.extensionMimeTypeMap[extension]||"*"},isRelativeUrl:function(url){var firstChar=url.slice(0,1);return firstChar==="."||firstChar==="/"},makeNumbersHumanReadable:function(elements){elements.each(function(){$(this).html(utils.makeNumberHumanReadable($(this).attr("title")))})},makeNumberHumanReadable:function(num){var n=parseInt(num,10);if(!n){return num}if(n>999999){return(n/1e6).toFixed(1)+"m"}else if(n>999){return(n/1e3).toFixed(1)+"k"}return n},addCommasToNumbers:function(elements){elements.each(function(index,element){$(element).html(utils.addCommas($(element).html()))})},addCommas:function(text){return text.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},toISOString:function(timestamp){if(!timestamp||!Date.prototype.toISOString){return""}return Date.prototype.toISOString?new Date(parseInt(timestamp,10)).toISOString():timestamp},tags:["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","map","mark","menu","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],stripTags:["abbr","acronym","address","applet","area","article","aside","audio","base","basefont","bdi","bdo","big","blink","body","button","canvas","caption","center","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","input","ins","kbd","keygen","label","legend","li","link","map","mark","marquee","menu","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","source","span","strike","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],escapeRegexChars:function(text){return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},escapeHTML:function(raw){return raw.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")},isAndroidBrowser:function(){var nua=navigator.userAgent;return nua.indexOf("Mozilla/5.0")>-1&&nua.indexOf("Android ")>-1&&nua.indexOf("AppleWebKit")>-1&&!(nua.indexOf("Chrome")>-1)},isTouchDevice:function(){return"ontouchstart"in document.documentElement},findBootstrapEnvironment:function(){var envs=["xs","sm","md","lg"],$el=$("<div>");$el.appendTo($("body"));for(var i=envs.length-1;i>=0;i--){var env=envs[i];$el.addClass("hidden-"+env);if($el.is(":hidden")){$el.remove();return env}}},isMobile:function(){var env=utils.findBootstrapEnvironment();return["xs","sm"].some(function(targetEnv){return targetEnv===env})},getHoursArray:function(){var currentHour=(new Date).getHours(),labels=[];for(var i=currentHour,ii=currentHour-24;i>ii;i--){var hour=i<0?24+i:i;labels.push(hour+":00")}return labels.reverse()},getDaysArray:function(from){var currentDay=new Date(from||Date.now()).getTime(),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels=[],tmpDate;for(var x=29;x>=0;x--){tmpDate=new Date(currentDay-1e3*60*60*24*x);labels.push(months[tmpDate.getMonth()]+" "+tmpDate.getDate())}return labels},isElementInViewport:function(el){if(typeof jQuery==="function"&&el instanceof jQuery){el=el[0]}var rect=el.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},params:function(options){var a,hash={},params;options=options||{};options.skipToType=options.skipToType||{};if(options.url){a=utils.urlToLocation(options.url)}params=(a?a.search:window.location.search).substring(1).split("&");params.forEach(function(param){var val=param.split("="),key=decodeURI(val[0]),value=options.skipToType[key]?decodeURI(val[1]):utils.toType(decodeURI(val[1]));if(key){if(key.substr(-2,2)==="[]"){key=key.slice(0,-2)}if(!hash[key]){hash[key]=value}else{if(!$.isArray(hash[key])){hash[key]=[hash[key]]}hash[key].push(value)}}});return hash},param:function(key){return this.params()[key]},urlToLocation:function(url){var a=document.createElement("a");a.href=url;return a},toType:function(str){var type=typeof str;if(type!=="string"){return str}else{var nb=parseFloat(str);if(!isNaN(nb)&&isFinite(str)){return nb}if(str==="false"){return false}if(str==="true"){return true}try{str=JSON.parse(str)}catch(e){}return str}},props:function(obj,props,value){if(obj===undefined){obj=window}if(props==null){return undefined}var i=props.indexOf(".");if(i==-1){if(value!==undefined){obj[props]=value}return obj[props]}var prop=props.slice(0,i),newProps=props.slice(i+1);if(props!==undefined&&!(obj[prop]instanceof Object)){obj[prop]={}}return utils.props(obj[prop],newProps,value)},isInternalURI:function(targetLocation,referenceLocation,relative_path){return targetLocation.host===""||targetLocation.host===referenceLocation.host&&targetLocation.protocol===referenceLocation.protocol&&(relative_path.length>0?targetLocation.pathname.indexOf(relative_path)===0:true)}};if(typeof String.prototype.startsWith!="function"){String.prototype.startsWith=function(prefix){if(this.length<prefix.length){return false}for(var i=prefix.length-1;i>=0&&this[i]===prefix[i];--i){continue}return i<0}}if(typeof String.prototype.endsWith!="function"){String.prototype.endsWith=function(suffix){if(this.length<suffix.length){return false}var len=this.length;var suffixLen=suffix.length;for(var i=1;i<=suffixLen&&this[len-i]===suffix[suffixLen-i];++i){continue}return i>suffixLen}}if(typeof String.prototype.rtrim!="function"){String.prototype.rtrim=function(){return this.replace(/\s+$/g,"")}}if("undefined"!==typeof window){window.utils=module.exports}})("undefined"===typeof module?{module:{exports:{}}}:module);"use strict";var app=app||{};var socket;app.isConnected=false;(function(){var reconnecting=false;var ioParams={reconnectionAttempts:config.maxReconnectionAttempts,reconnectionDelay:config.reconnectionDelay,transports:config.socketioTransports,path:config.relative_path+"/socket.io"};socket=io(config.websocketAddress,ioParams);socket.on("connect",onConnect);socket.on("reconnecting",onReconnecting);socket.on("disconnect",onDisconnect);socket.on("reconnect_failed",function(){setTimeout(socket.connect.bind(socket),parseInt(config.reconnectionDelay,10)*10)});socket.on("checkSession",function(uid){if(parseInt(uid,10)!==parseInt(app.user.uid,10)){app.handleInvalidSession()}});socket.on("event:banned",onEventBanned);socket.on("event:alert",app.alert);function onConnect(){app.isConnected=true;if(!reconnecting){app.showMessages();$(window).trigger("action:connected")}if(reconnecting){var reconnectEl=$("#reconnect");var reconnectAlert=$("#reconnect-alert");reconnectEl.tooltip("destroy");reconnectEl.html('<i class="fa fa-check"></i>');reconnectAlert.fadeOut(500);reconnecting=false;reJoinCurrentRoom();socket.emit("meta.reconnected");$(window).trigger("action:reconnected");setTimeout(function(){reconnectEl.removeClass("active").addClass("hide")},3e3)}}function reJoinCurrentRoom(){var url_parts=window.location.pathname.slice(config.relative_path.length).split("/").slice(1);var room;switch(url_parts[0]){case"user":room="user/"+(ajaxify.data?ajaxify.data.theirid:0);break;case"topic":room="topic_"+url_parts[1];break;case"category":room="category_"+url_parts[1];break;case"recent":room="recent_topics";break;case"unread":room="unread_topics";break;case"popular":room="popular_topics";break;case"admin":room="admin";break;case"categories":room="categories";break}app.currentRoom="";app.enterRoom(room)}function onReconnecting(){reconnecting=true;var reconnectEl=$("#reconnect");var reconnectAlert=$("#reconnect-alert");if(!reconnectEl.hasClass("active")){reconnectEl.html('<i class="fa fa-spinner fa-spin"></i>');reconnectAlert.fadeIn(500).removeClass("hide")}reconnectEl.addClass("active").removeClass("hide").tooltip({placement:"bottom"})}function onDisconnect(){$(window).trigger("action:disconnected");app.isConnected=false}function onEventBanned(){window.location.href=config.relative_path+"/"}})();"use strict";var app=app||{};app.isFocused=true;app.currentRoom=null;app.widgets={};app.cacheBuster=null;(function(){var showWelcomeMessage=!!utils.params().loggedin;var showBannedMessage=!!utils.params().banned&&app.user&&app.user.uid===0;templates.setGlobal("config",config);app.cacheBuster=config["cache-buster"];bootbox.setDefaults({locale:config.userLang});app.load=function(){app.loadProgressiveStylesheet();overrides.overrideTimeago();var url=ajaxify.start(window.location.pathname.slice(1)+window.location.search+window.location.hash);
ajaxify.updateHistory(url,true);ajaxify.parseData();ajaxify.end(url,app.template);handleStatusChange();if(config.searchEnabled){app.handleSearch()}$("body").on("click","#new_topic",function(){app.newTopic()});require(["components"],function(components){components.get("user/logout").on("click",app.logout)});Visibility.change(function(event,state){if(state==="visible"){app.isFocused=true;app.alternatingTitle("")}else if(state==="hidden"){app.isFocused=false}});createHeaderTooltips();app.showEmailConfirmWarning();app.showCookieWarning();socket.removeAllListeners("event:nodebb.ready");socket.on("event:nodebb.ready",function(data){if(!app.cacheBuster||app.cacheBuster!==data["cache-buster"]){app.cacheBuster=data["cache-buster"];app.alert({alert_id:"forum_updated",title:"[[global:updated.title]]",message:"[[global:updated.message]]",clickfn:function(){window.location.reload()},type:"warning"})}});require(["taskbar","helpers","forum/pagination"],function(taskbar,helpers,pagination){taskbar.init();helpers.register();pagination.init();$(window).trigger("action:app.load")})};app.logout=function(){$(window).trigger("action:app.logout");app.flags=app.flags||{};app.flags._sessionRefresh=true;$.ajax(config.relative_path+"/logout",{type:"POST",headers:{"x-csrf-token":config.csrf_token},success:function(){var payload={next:config.relative_path+"/"};$(window).trigger("action:app.loggedOut",payload);window.location.href=payload.next}})};app.alert=function(params){require(["alerts"],function(alerts){alerts.alert(params)})};app.removeAlert=function(id){require(["alerts"],function(alerts){alerts.remove(id)})};app.alertSuccess=function(message,timeout){app.alert({title:"[[global:alert.success]]",message:message,type:"success",timeout:timeout?timeout:5e3})};app.alertError=function(message,timeout){message=message.message||message;if(message==="[[error:invalid-session]]"){return app.handleInvalidSession()}app.alert({title:"[[global:alert.error]]",message:message,type:"danger",timeout:timeout?timeout:1e4})};app.handleInvalidSession=function(){if(app.flags&&app.flags._sessionRefresh){return}app.flags=app.flags||{};app.flags._sessionRefresh=true;require(["translator"],function(translator){translator.translate("[[error:invalid-session-text]]",function(translated){bootbox.alert({title:"[[error:invalid-session]]",message:translated,closeButton:false,callback:function(){window.location.reload()}})})})};app.enterRoom=function(room,callback){callback=callback||function(){};if(socket&&app.user.uid&&app.currentRoom!==room){var previousRoom=app.currentRoom;app.currentRoom=room;socket.emit("meta.rooms.enter",{enter:room},function(err){if(err){app.currentRoom=previousRoom;return app.alertError(err.message)}callback()})}};app.leaveCurrentRoom=function(){if(!socket){return}socket.emit("meta.rooms.leaveCurrent",function(err){if(err){return app.alertError(err.message)}app.currentRoom=""})};function highlightNavigationLink(){var path=window.location.pathname;$("#main-nav li").removeClass("active");if(path){$("#main-nav li").removeClass("active").find('a[href="'+path+'"]').parent().addClass("active")}}app.createUserTooltips=function(els,placement){els=els||$("body");els.find(".avatar,img[title].teaser-pic,img[title].user-img,div.user-icon,span.user-icon").each(function(){if(!utils.isTouchDevice()){$(this).tooltip({placement:placement||$(this).attr("title-placement")||"top",title:$(this).attr("title")})}})};app.createStatusTooltips=function(){if(!utils.isTouchDevice()){$("body").tooltip({selector:".fa-circle.status",placement:"top"})}};app.replaceSelfLinks=function(selector){selector=selector||$("a");selector.each(function(){var href=$(this).attr("href");if(href&&app.user.userslug&&href.indexOf("user/_self_")!==-1){$(this).attr("href",href.replace(/user\/_self_/g,"user/"+app.user.userslug))}})};app.processPage=function(){highlightNavigationLink();$(".timeago").timeago();utils.makeNumbersHumanReadable($(".human-readable-number"));utils.addCommasToNumbers($(".formatted-number"));app.createUserTooltips();app.createStatusTooltips();app.replaceSelfLinks();window.scrollTo(0,0)};app.showMessages=function(){var messages={login:{format:"alert",title:"[[global:welcome_back]] "+app.user.username+"!",message:"[[global:you_have_successfully_logged_in]]"},banned:{format:"modal",title:"[[error:user-banned]]",message:"[[error:user-banned-reason, "+utils.params().banned+"]]"}};function showAlert(type){switch(messages[type].format){case"alert":app.alert({type:"success",title:messages[type].title,message:messages[type].message,timeout:5e3});break;case"modal":require(["translator"],function(translator){translator.translate(messages[type].message,function(translated){bootbox.alert({title:messages[type].title,message:translated})})});break}}if(showWelcomeMessage){showWelcomeMessage=false;$(document).ready(function(){showAlert("login")})}if(showBannedMessage){showBannedMessage=false;$(document).ready(function(){showAlert("banned")})}};app.openChat=function(roomId,uid){if(!app.user.uid){return app.alertError("[[error:not-logged-in]]")}require(["chat"],function(chat){function loadAndCenter(chatModal){chat.load(chatModal.attr("UUID"));chat.center(chatModal);chat.focusInput(chatModal)}if(chat.modalExists(roomId)){loadAndCenter(chat.getModal(roomId))}else{socket.emit("modules.chats.loadRoom",{roomId:roomId,uid:uid||app.user.uid},function(err,roomData){if(err){return app.alertError(err.message)}roomData.users=roomData.users.filter(function(user){return user&&parseInt(user.uid,10)!==parseInt(app.user.uid,10)});roomData.uid=uid||app.user.uid;chat.createModal(roomData,loadAndCenter)})}})};app.newChat=function(touid,callback){callback=callback||function(){};if(!app.user.uid){return app.alertError("[[error:not-logged-in]]")}if(parseInt(touid,10)===parseInt(app.user.uid,10)){return app.alertError("[[error:cant-chat-with-yourself]]")}socket.emit("modules.chats.newRoom",{touid:touid},function(err,roomId){if(err){return app.alertError(err.message)}if(!ajaxify.data.template.chats){app.openChat(roomId)}else{ajaxify.go("chats/"+roomId)}callback(false,roomId)})};var titleObj={active:false,interval:undefined,titles:[]};app.alternatingTitle=function(title){if(typeof title!=="string"){return}if(title.length>0&&!app.isFocused){if(!titleObj.titles[0]){titleObj.titles[0]=window.document.title}require(["translator"],function(translator){translator.translate(title,function(translated){titleObj.titles[1]=translated;if(titleObj.interval){clearInterval(titleObj.interval)}titleObj.interval=setInterval(function(){var title=titleObj.titles[titleObj.titles.indexOf(window.document.title)^1];if(title){window.document.title=$("<div/>").html(title).text()}},2e3)})})}else{if(titleObj.interval){clearInterval(titleObj.interval)}if(titleObj.titles[0]){window.document.title=$("<div/>").html(titleObj.titles[0]).text()}}};app.refreshTitle=function(title){if(!title){return}require(["translator"],function(translator){title=config.titleLayout.replace(/&#123;/g,"{").replace(/&#125;/g,"}").replace("{pageTitle}",function(){return title}).replace("{browserTitle}",function(){return config.browserTitle});translator.translate(title,function(translated){titleObj.titles[0]=translated;app.alternatingTitle("")})})};app.toggleNavbar=function(state){var navbarEl=$(".navbar");if(navbarEl){navbarEl.toggleClass("hidden",!!!state)}};function createHeaderTooltips(){var env=utils.findBootstrapEnvironment();if(env==="xs"||env==="sm"){return}$("#header-menu li a[title]").each(function(){if(!utils.isTouchDevice()){$(this).tooltip({placement:"bottom",trigger:"hover",title:$(this).attr("title")})}});if(!utils.isTouchDevice()){$("#search-form").parent().tooltip({placement:"bottom",trigger:"hover",title:$("#search-button i").attr("title")})}if(!utils.isTouchDevice()){$("#user_dropdown").tooltip({placement:"bottom",trigger:"hover",title:$("#user_dropdown").attr("title")})}}app.handleSearch=function(){var searchButton=$("#search-button"),searchFields=$("#search-fields"),searchInput=$("#search-fields input");$("#search-form .advanced-search-link").on("mousedown",function(){ajaxify.go("/search")});$("#search-form").on("submit",dismissSearch);searchInput.on("blur",dismissSearch);function dismissSearch(){searchFields.addClass("hidden");searchButton.removeClass("hidden")}searchButton.on("click",function(e){if(!config.loggedIn&&!config.allowGuestSearching){app.alert({message:"[[error:search-requires-login]]",timeout:3e3});ajaxify.go("login");return false}e.stopPropagation();app.prepareSearch();return false});$("#search-form").on("submit",function(){var input=$(this).find("input");require(["search"],function(search){var data=search.getSearchPreferences();data.term=input.val();search.query(data,function(){input.val("")})});return false})};app.prepareSearch=function(){$("#search-fields").removeClass("hidden");$("#search-button").addClass("hidden");$("#search-fields input").focus()};function handleStatusChange(){$('[component="header/usercontrol"] [data-status]').off("click").on("click",function(e){var status=$(this).attr("data-status");socket.emit("user.setStatus",status,function(err){if(err){return app.alertError(err.message)}$('[data-uid="'+app.user.uid+'"] [component="user/status"], [component="header/profilelink"] [component="user/status"]').removeClass("away online dnd offline").addClass(status);app.user.status=status});e.preventDefault()})}app.updateUserStatus=function(el,status){if(!el.length){return}require(["translator"],function(translator){translator.translate("[[global:"+status+"]]",function(translated){el.removeClass("online offline dnd away").addClass(status).attr("title",translated).attr("data-original-title",translated)})})};app.newTopic=function(cid,tags){$(window).trigger("action:composer.topic.new",{cid:cid||ajaxify.data.cid||0,tags:tags||(ajaxify.data.tag?[ajaxify.data.tag]:[])})};app.loadJQueryUI=function(callback){if(typeof $().autocomplete==="function"){return callback()}var scriptEl=document.createElement("script");scriptEl.type="text/javascript";scriptEl.src=config.relative_path+"/vendor/jquery/js/jquery-ui.js"+(app.cacheBuster?"?v="+app.cacheBuster:"");scriptEl.onload=callback;document.head.appendChild(scriptEl)};app.showEmailConfirmWarning=function(err){if(!config.requireEmailConfirmation||!app.user.uid){return}var msg={alert_id:"email_confirm",type:"warning",timeout:0};if(!app.user.email){msg.message="[[error:no-email-to-confirm]]";msg.clickfn=function(){app.removeAlert("email_confirm");ajaxify.go("user/"+app.user.userslug+"/edit")};app.alert(msg)}else if(!app.user["email:confirmed"]&&!app.user.isEmailConfirmSent){msg.message=err?err.message:"[[error:email-not-confirmed]]";msg.clickfn=function(){app.removeAlert("email_confirm");socket.emit("user.emailConfirm",{},function(err){if(err){return app.alertError(err.message)}app.alertSuccess("[[notifications:email-confirm-sent]]")})};app.alert(msg)}else if(!app.user["email:confirmed"]&&app.user.isEmailConfirmSent){msg.message="[[error:email-not-confirmed-email-sent]]";app.alert(msg)}};app.parseAndTranslate=function(template,blockName,data,callback){require(["translator"],function(translator){function translate(html,callback){translator.translate(html,function(translatedHTML){translatedHTML=translator.unescape(translatedHTML);callback($(translatedHTML))})}if(typeof blockName==="string"){templates.parse(template,blockName,data,function(html){translate(html,callback)})}else{callback=data;data=blockName;templates.parse(template,data,function(html){translate(html,callback)})}})};app.loadProgressiveStylesheet=function(){var linkEl=document.createElement("link");linkEl.rel="stylesheet";linkEl.href=config.relative_path+"/js-enabled.css";document.head.appendChild(linkEl)};app.showCookieWarning=function(){if(!config.cookies.enabled){return}else if(window.location.pathname.startsWith(config.relative_path+"/admin")){return}else if(window.localStorage.getItem("cookieconsent")==="1"){return}require(["translator"],function(translator){config.cookies.message=translator.unescape(config.cookies.message);config.cookies.dismiss=translator.unescape(config.cookies.dismiss);config.cookies.link=translator.unescape(config.cookies.link);app.parseAndTranslate("partials/cookie-consent",config.cookies,function(html){$(document.body).append(html);var warningEl=$(".cookie-consent");var dismissEl=warningEl.find("button");dismissEl.on("click",function(){window.localStorage.setItem("cookieconsent","1");warningEl.remove()})})})}})();"use strict";var ajaxify=ajaxify||{};$(document).ready(function(){var location=document.location||window.location;var rootUrl=location.protocol+"//"+(location.hostname||location.host)+(location.port?":"+location.port:"");var apiXHR=null;var ajaxifyTimer;var translator;var retry=true;var previousBodyClass="";require(["translator"],function(_translator){translator=_translator});$(window).on("popstate",function(ev){ev=ev.originalEvent;if(ev!==null&&ev.state){if(ev.state.url===null&&ev.state.returnPath!==undefined){window.history.replaceState({url:ev.state.returnPath},ev.state.returnPath,config.relative_path+"/"+ev.state.returnPath)}else if(ev.state.url!==undefined){ajaxify.go(ev.state.url,function(){$(window).trigger("action:popstate",{url:ev.state.url})},true)}}});ajaxify.currentPage=null;ajaxify.go=function(url,callback,quiet){if(!socket.connected){if(ajaxify.reconnectAction){$(window).off("action:reconnected",ajaxify.reconnectAction)}ajaxify.reconnectAction=function(e){ajaxify.go(url,callback,quiet);$(window).off(e)};$(window).on("action:reconnected",ajaxify.reconnectAction)}if(ajaxifyTimer&&Date.now()-ajaxifyTimer<500){return true}ajaxifyTimer=Date.now();if(ajaxify.handleRedirects(url)){return true}app.leaveCurrentRoom();$(window).off("scroll");if($("#content").hasClass("ajaxifying")&&apiXHR){apiXHR.abort()}app.previousUrl=window.location.href;url=ajaxify.start(url);if(url===null){$(window).trigger("action:ajaxify.end",{url:url,tpl_url:ajaxify.data.template.name,title:ajaxify.data.title});return false}previousBodyClass=ajaxify.data.bodyClass;$("#footer, #content").removeClass("hide").addClass("ajaxifying");ajaxify.loadData(url,function(err,data){if(!err||err&&err.data&&(parseInt(err.data.status,10)!==302&&parseInt(err.data.status,10)!==308)){ajaxify.updateHistory(url,quiet)}if(err){return onAjaxError(err,url,callback,quiet)}retry=true;app.template=data.template.name;renderTemplate(url,data.template.name,data,callback)});return true};ajaxify.handleRedirects=function(url){url=ajaxify.removeRelativePath(url.replace(/\/$/,"")).toLowerCase();var isClientToAdmin=url.startsWith("admin")&&window.location.pathname.indexOf(RELATIVE_PATH+"/admin")!==0;var isAdminToClient=!url.startsWith("admin")&&window.location.pathname.indexOf(RELATIVE_PATH+"/admin")===0;var uploadsOrApi=url.startsWith("uploads")||url.startsWith("api");if(isClientToAdmin||isAdminToClient||uploadsOrApi){window.open(RELATIVE_PATH+"/"+url,"_top");return true}return false};ajaxify.start=function(url){url=ajaxify.removeRelativePath(url.replace(/^\/|\/$/g,""));var payload={url:url};$(window).trigger("action:ajaxify.start",payload);return payload.url};ajaxify.updateHistory=function(url,quiet){ajaxify.currentPage=url.split(/[?#]/)[0];if(window.history&&window.history.pushState){window.history[!quiet?"pushState":"replaceState"]({url:url},url,RELATIVE_PATH+"/"+url)}};function onAjaxError(err,url,callback,quiet){var data=err.data;var textStatus=err.textStatus;if(data){var status=parseInt(data.status,10);if(status===403||status===404||status===500||status===502||status===503){if(status===502&&retry){retry=false;ajaxifyTimer=undefined;return ajaxify.go(url,callback,quiet)}if(status===502){status=500}if(data.responseJSON){data.responseJSON.config=config}$("#footer, #content").removeClass("hide").addClass("ajaxifying");return renderTemplate(url,status.toString(),data.responseJSON||{},callback)}else if(status===401){app.alertError("[[global:please_log_in]]");app.previousUrl=url;window.location.href=config.relative_path+"/login";return}else if(status===302||status===308){if(data.responseJSON&&data.responseJSON.external){window.location.href=data.responseJSON.external}else if(typeof data.responseJSON==="string"){ajaxifyTimer=undefined;ajaxify.go(data.responseJSON.slice(1),callback,quiet)}}}else if(textStatus!=="abort"){app.alertError(data.responseJSON.error)}}function renderTemplate(url,tpl_url,data,callback){$(window).trigger("action:ajaxify.loadingTemplates",{});templates.parse(tpl_url,data,function(template){translator.translate(template,function(translatedTemplate){translatedTemplate=translator.unescape(translatedTemplate);$("body").removeClass(previousBodyClass).addClass(data.bodyClass);$("#content").html(translatedTemplate);ajaxify.end(url,tpl_url);if(typeof callback==="function"){callback()}$("#content, #footer").removeClass("ajaxifying");app.refreshTitle(data.title)})})}ajaxify.end=function(url,tpl_url){function done(){if(--count===0){$(window).trigger("action:ajaxify.end",{url:url,tpl_url:tpl_url,title:ajaxify.data.title})}}var count=2;ajaxify.loadScript(tpl_url,done);ajaxify.widgets.render(tpl_url,url,done);$(window).trigger("action:ajaxify.contentLoaded",{url:url,tpl:tpl_url});app.processPage();var timeElapsed=Date.now()-ajaxifyTimer;if(config.environment==="development"&&!isNaN(timeElapsed)){console.info("[ajaxify /"+url+"] Time elapsed:",timeElapsed+"ms")}};ajaxify.parseData=function(){var dataEl=$("#ajaxify-data");if(dataEl.length){ajaxify.data=JSON.parse(dataEl.text());dataEl.remove()}};ajaxify.removeRelativePath=function(url){if(url.startsWith(RELATIVE_PATH.slice(1))){url=url.slice(RELATIVE_PATH.length)}return url};ajaxify.refresh=function(callback){ajaxify.go(ajaxify.currentPage+window.location.search+window.location.hash,callback,true)};ajaxify.loadScript=function(tpl_url,callback){var location=!app.inAdmin?"forum/":"";if(tpl_url.startsWith("admin")){location=""}var data={tpl_url:tpl_url,scripts:[location+tpl_url]};$(window).trigger("action:script.load",data);var outstanding=0;var onReady=function(){if(outstanding){return setTimeout(onReady,100)}data.scripts=data.scripts.filter(Boolean);data.scripts.forEach(function(functionRef){functionRef()});callback()};data.scripts.forEach(function(script,idx){switch(typeof script){case"string":++outstanding;(function(idx){require([script],function(script){if(script&&script.init){data.scripts[idx]=script.init}else{data.scripts[idx]=null}--outstanding})})(idx);break;case"function":break;default:data.scripts[idx]=undefined;break}});onReady()};ajaxify.loadData=function(url,callback){url=ajaxify.removeRelativePath(url);$(window).trigger("action:ajaxify.loadingData",{url:url});apiXHR=$.ajax({url:RELATIVE_PATH+"/api/"+url,cache:false,headers:{"X-Return-To":app.previousUrl},success:function(data){if(!data){return}ajaxify.data=data;data.config=config;$(window).trigger("action:ajaxify.dataLoaded",{url:url,data:data});callback(null,data)},error:function(data,textStatus){if(data.status===0&&textStatus==="error"){data.status=500}callback({data:data,textStatus:textStatus})}})};ajaxify.loadTemplate=function(template,callback){if(templates.cache[template]){callback(templates.cache[template])}else{$.ajax({url:RELATIVE_PATH+"/templates/"+template+".tpl"+(config["cache-buster"]?"?v="+config["cache-buster"]:""),type:"GET",success:function(data){callback(data.toString())},error:function(error){throw new Error("Unable to load template: "+template+" ("+error.statusText+")")}})}};function ajaxifyAnchors(){function hrefEmpty(href){return href===undefined||href===""||href==="javascript:;"}var contentEl=document.getElementById("content");$(document.body).on("click","a",function(e){var _self=this;var process=function(){if(!e.ctrlKey&&!e.shiftKey&&!e.metaKey&&e.which===1){if(internalLink){var pathname=this.href.replace(rootUrl+RELATIVE_PATH+"/","");if(window.location.pathname===this.pathname&&this.hash.length){window.location.hash=this.hash}else{if(ajaxify.go(pathname)){e.preventDefault()}}}else if(window.location.pathname!=="/outgoing"){if(config.openOutgoingLinksInNewTab&&$.contains(contentEl,this)){window.open(this.href,"_blank");e.preventDefault()}else if(config.useOutgoingLinksPage){ajaxify.go("outgoing?url="+encodeURIComponent(this.href));e.preventDefault()}}}};if(this.target!==""||this.protocol!=="http:"&&this.protocol!=="https:"){return}var internalLink=utils.isInternalURI(this,window.location,RELATIVE_PATH);if($(this).attr("data-ajaxify")==="false"){if(!internalLink){return}else{return e.preventDefault()}}if(internalLink&&$(this).attr("href")&&$(this).attr("href").endsWith(".rss")){return}if(hrefEmpty(this.href)||this.protocol==="javascript:"||$(this).attr("href")==="#"){return e.preventDefault()}if(app.flags&&app.flags.hasOwnProperty("_unsaved")&&app.flags._unsaved===true){translator.translate("[[global:unsaved-changes]]",function(text){bootbox.confirm(text,function(navigate){if(navigate){app.flags._unsaved=false;process.call(_self)}})});return e.preventDefault()}process.call(_self)})}templates.registerLoader(ajaxify.loadTemplate);if(window.history&&window.history.pushState){ajaxifyAnchors()}app.load();$('[type="text/tpl"][data-template]').each(function(){templates.cache[$(this).attr("data-template")]=$("<div/>").html($(this).html()).text();$(this).parent().remove()})});"use strict";var overrides=overrides||{};if("undefined"!==typeof window){(function($,undefined){require(["translator"],function(translator){$.fn.getCursorPosition=function(){var el=$(this).get(0);var pos=0;if("selectionStart"in el){pos=el.selectionStart}else if("selection"in document){el.focus();var Sel=document.selection.createRange();var SelLength=document.selection.createRange().text.length;Sel.moveStart("character",-el.value.length);pos=Sel.text.length-SelLength}return pos};$.fn.selectRange=function(start,end){if(!end){end=start}return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(start,end)}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",start);range.select()}})};$.fn.putCursorAtEnd=function(){return this.each(function(){$(this).focus();if(this.setSelectionRange){var len=$(this).val().length*2;this.setSelectionRange(len,len)}else{$(this).val($(this).val())}this.scrollTop=999999})};$.fn.translateHtml=function(str){return translate(this,"html",str)};$.fn.translateText=function(str){return translate(this,"text",str)};$.fn.translateVal=function(str){return translate(this,"val",str)};$.fn.translateAttr=function(attr,str){return this.each(function(){var el=$(this);translator.translate(str,function(translated){el.attr(attr,translated)})})};function translate(elements,type,str){return elements.each(function(){var el=$(this);translator.translate(str,function(translated){el[type](translated)})})}})})(jQuery||{fn:{}});(function(){var _clearMenus=$._data(document,"events").click.filter(function(el){return el.namespace==="bs.data-api.dropdown"&&el.selector===undefined});if(_clearMenus.length){_clearMenus=_clearMenus[0].handler}$(document).off("click.data-api.dropdown",_clearMenus).on("click.data-api.dropdown",function(e){if(e.button!==2){_clearMenus()}})})();overrides.overrideTimeago=function(){var timeagoFn=$.fn.timeago;if(parseInt(config.timeagoCutoff,10)===0){$.timeago.settings.cutoff=1}else if(parseInt(config.timeagoCutoff,10)>0){$.timeago.settings.cutoff=1e3*60*60*24*(parseInt(config.timeagoCutoff,10)||30)}$.timeago.settings.allowFuture=true;$.fn.timeago=function(){var els=$(this);var options={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};var iso;els.each(function(){iso=this.getAttribute("title");this.setAttribute("datetime",iso);$(this).text(new Date(iso).toLocaleString(config.userLang.replace("_","-"),options))});timeagoFn.apply(this,arguments)}}}"use strict";(function(ajaxify){ajaxify.widgets={};ajaxify.widgets.reposition=function(location){$("body [has-widget-class]").each(function(){var $this=$(this);if($this.attr("has-widget-target")===location){$this.removeClass();$this.addClass($this.attr("has-widget-class"))}})};ajaxify.widgets.render=function(template,url,callback){callback=callback||function(){};if(template.match(/^admin/)){return callback()}var widgetLocations=["sidebar","footer","header"];$("#content [widget-area]").each(function(){var location=$(this).attr("widget-area");if($.inArray(location,widgetLocations)===-1){widgetLocations.push(location)}});$.get(config.relative_path+"/api/widgets/render"+(config["cache-buster"]?"?v="+config["cache-buster"]:""),{locations:widgetLocations,template:template+".tpl",url:url,cid:ajaxify.data.cid,isMobile:utils.isMobile()},function(renderedAreas){for(var x=0;x<renderedAreas.length;++x){var renderedWidgets=renderedAreas[x].widgets;var location=renderedAreas[x].location;var html="";for(var i=0;i<renderedWidgets.length;++i){html+=templates.parse(renderedWidgets[i].html,{})}var area=$('#content [widget-area="'+location+'"]');if(!area.length&&window.location.pathname.indexOf("/admin")===-1&&renderedWidgets.length){if(location==="footer"&&!$('#content [widget-area="footer"]').length){$("#content").append($('<div class="row"><div widget-area="footer" class="col-xs-12"></div></div>'))}else if(location==="sidebar"&&!$('#content [widget-area="sidebar"]').length){if($('[component="account/cover"]').length){$('[component="account/cover"]').nextAll().wrapAll($('<div class="row"><div class="col-lg-9 col-xs-12"></div><div widget-area="sidebar" class="col-lg-3 col-xs-12"></div></div></div>'))}else if($('[component="groups/cover"]').length){$('[component="groups/cover"]').nextAll().wrapAll($('<div class="row"><div class="col-lg-9 col-xs-12"></div><div widget-area="sidebar" class="col-lg-3 col-xs-12"></div></div></div>'))}else{$("#content > *").wrapAll($('<div class="row"><div class="col-lg-9 col-xs-12"></div><div widget-area="sidebar" class="col-lg-3 col-xs-12"></div></div></div>'))}}else if(location==="header"&&!$('#content [widget-area="header"]').length){$("#content").prepend($('<div class="row"><div widget-area="header" class="col-xs-12"></div></div>'))}area=$('#content [widget-area="'+location+'"]')}area.html(html);if(renderedWidgets.length){area.removeClass("hidden");ajaxify.widgets.reposition(location)}}var widgetAreas=$("#content [widget-area]");widgetAreas.find("img:not(.not-responsive)").addClass("img-responsive");widgetAreas.find(".timeago").timeago();widgetAreas.find("img[title].teaser-pic,img[title].user-img").each(function(){$(this).tooltip({placement:"top",title:$(this).attr("title")})});$(window).trigger("action:widgets.loaded",{});callback(renderedAreas)})}})(ajaxify||{});(function(root){var setTimeoutFunc=setTimeout;function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function Promise(fn){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");if(typeof fn!=="function")throw new TypeError("not a function");this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];doResolve(fn,this)}function handle(self,deferred){while(self._state===3){self=self._value}if(self._state===0){self._deferreds.push(deferred);return}self._handled=true;Promise._immediateFn(function(){var cb=self._state===1?deferred.onFulfilled:deferred.onRejected;if(cb===null){(self._state===1?resolve:reject)(deferred.promise,self._value);return}var ret;try{ret=cb(self._value)}catch(e){reject(deferred.promise,e);return}resolve(deferred.promise,ret)})}function resolve(self,newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&(typeof newValue==="object"||typeof newValue==="function")){var then=newValue.then;if(newValue instanceof Promise){self._state=3;self._value=newValue;finale(self);return}else if(typeof then==="function"){doResolve(bind(then,newValue),self);return}}self._state=1;self._value=newValue;finale(self)}catch(e){reject(self,e)}}function reject(self,newValue){self._state=2;self._value=newValue;finale(self)}function finale(self){if(self._state===2&&self._deferreds.length===0){Promise._immediateFn(function(){if(!self._handled){Promise._unhandledRejectionFn(self._value)}})}for(var i=0,len=self._deferreds.length;i<len;i++){handle(self,self._deferreds[i])}self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled==="function"?onFulfilled:null;this.onRejected=typeof onRejected==="function"?onRejected:null;this.promise=promise}function doResolve(fn,self){var done=false;try{fn(function(value){if(done)return;done=true;resolve(self,value)},function(reason){if(done)return;done=true;reject(self,reason)})}catch(ex){if(done)return;done=true;reject(self,ex)}}Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)};Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);handle(this,new Handler(onFulfilled,onRejected,prom));return prom};Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&(typeof val==="object"||typeof val==="function")){var then=val.then;if(typeof then==="function"){then.call(val,function(val){res(i,val)},reject);return}}args[i]=val;if(--remaining===0){resolve(args)}}catch(ex){reject(ex)}}for(var i=0;i<args.length;i++){res(i,args[i])}})};Promise.resolve=function(value){if(value&&typeof value==="object"&&value.constructor===Promise){return value}return new Promise(function(resolve){resolve(value)})};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})};Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++){values[i].then(resolve,reject)}})};Promise._immediateFn=typeof setImmediate==="function"&&function(fn){setImmediate(fn)}||function(fn){setTimeoutFunc(fn,0)};Promise._unhandledRejectionFn=function _unhandledRejectionFn(err){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",err)}};Promise._setImmediateFn=function _setImmediateFn(fn){Promise._immediateFn=fn};Promise._setUnhandledRejectionFn=function _setUnhandledRejectionFn(fn){Promise._unhandledRejectionFn=fn};if(typeof module!=="undefined"&&module.exports){module.exports=Promise}else if(!root.Promise){root.Promise=Promise}})(this);"use strict";$(document).ready(function(){$(window).on("action:composer.topic.new",function(ev,data){if(config["composer-default"].composeRouteEnabled!=="on"){require(["composer"],function(composer){composer.newTopic({cid:data.cid,title:data.title||"",body:data.body||"",tags:data.tags||[]})})}else{ajaxify.go("compose?cid="+data.cid+(data.title?"&title="+encodeURIComponent(data.title):"")+(data.body?"&body="+encodeURIComponent(data.body):""))}});$(window).on("action:composer.post.edit",function(ev,data){if(config["composer-default"].composeRouteEnabled!=="on"){require(["composer"],function(composer){composer.editPost(data.pid)})}else{ajaxify.go("compose?pid="+data.pid)}});$(window).on("action:composer.post.new",function(ev,data){if(config["composer-default"].composeRouteEnabled!=="on"){require(["composer"],function(composer){composer.newReply(data.tid,data.pid,data.topicName,data.text)})}else{ajaxify.go("compose?tid="+data.tid+(data.pid?"&toPid="+data.pid:"")+(data.topicName?"&title="+encodeURIComponent(data.topicName):"")+(data.text?"&body="+encodeURIComponent(data.text):""))}});$(window).on("action:composer.addQuote",function(ev,data){if(config["composer-default"].composeRouteEnabled!=="on"){require(["composer"],function(composer){var topicUUID=composer.findByTid(data.tid);composer.addQuote(data.tid,data.slug,data.index,data.pid,data.topicName,data.username,data.text,topicUUID)})}else{ajaxify.go("compose?tid="+data.tid+"&toPid="+data.pid+"&quoted=1&username="+data.username)}});$(window).on("action:composer.enhance",function(ev,data){
require(["composer"],function(composer){composer.enhance(data.container)})})});(function(){"use strict";var isCommonjs=typeof module!=="undefined"&&module.exports;var keyboardAllowed=typeof Element!=="undefined"&&"ALLOW_KEYBOARD_INPUT"in Element;var fn=function(){var val;var valLength;var fnMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var i=0;var l=fnMap.length;var ret={};for(;i<l;i++){val=fnMap[i];if(val&&val[1]in document){for(i=0,valLength=val.length;i<valLength;i++){ret[fnMap[0][i]]=val[i]}return ret}}return false}();var screenfull={request:function(elem){var request=fn.requestFullscreen;elem=elem||document.documentElement;if(/5\.1[\.\d]* Safari/.test(navigator.userAgent)){elem[request]()}else{elem[request](keyboardAllowed&&Element.ALLOW_KEYBOARD_INPUT)}},exit:function(){document[fn.exitFullscreen]()},toggle:function(elem){if(this.isFullscreen){this.exit()}else{this.request(elem)}},raw:fn};if(!fn){if(isCommonjs){module.exports=false}else{window.screenfull=false}return}Object.defineProperties(screenfull,{isFullscreen:{get:function(){return Boolean(document[fn.fullscreenElement])}},element:{enumerable:true,get:function(){return document[fn.fullscreenElement]}},enabled:{enumerable:true,get:function(){return Boolean(document[fn.fullscreenEnabled])}}});if(isCommonjs){module.exports=screenfull}else{window.screenfull=screenfull}})();"use strict";$(document).ready(function(){var env=utils.findBootstrapEnvironment();setupNProgress();setupTaskbar();setupEditedByIcon();setupMobileMenu();setupQuickReply();if(env==="xs"||env==="sm"){$(".navbar-fixed-top").autoHidingNavbar({showOnBottom:false})}function setupNProgress(){$(window).on("action:ajaxify.start",function(){NProgress.set(.7)});$(window).on("action:ajaxify.end",function(ev,data){NProgress.done();setupHoverCards();if(data.url&&data.url.match("^user/.+/chats")){require(["persona/chats"],function(chats){chats.init()})}else if(data.url&&data.url.match("user/")){setupFavouriteButtonOnProfile()}})}function setupTaskbar(){$(window).on("filter:taskbar.push",function(ev,data){data.options.className="taskbar-"+data.module;if(data.module==="composer"){data.options.icon="fa-plus"}else if(data.module==="chat"){if(!data.element.length){createChatIcon(data);$(window).one("action:taskbar.pushed",function(ev,data){updateChatCount(data.element)})}else if(!data.element.hasClass("active")){updateChatCount(data.element)}}});socket.on("event:chats.markedAsRead",function(data){$('#taskbar [data-roomId="'+data.roomId+'"]').removeClass("new").attr("data-content",0)});function createChatIcon(data){data.options.icon="fa-spinner fa-spin";$.getJSON(config.relative_path+"/api/user/"+utils.slugify(data.options.title),function(user){var el=$('#taskbar [data-uuid="'+data.uuid+'"] a');el.find("i").remove();el.parent("[data-uuid]").attr("data-roomId",data.options.roomId);if(user.picture){el.css("background-image","url("+user.picture+")")}else{el.css("background-color",user["icon:bgColor"]).text(user["icon:text"]).addClass("user-icon")}})}function updateChatCount(el){var count=(parseInt($(el).attr("data-content"),10)||0)+1;$(el).attr("data-content",count)}}function setupEditedByIcon(){function activateEditedTooltips(){$('[data-pid] [component="post/editor"]').each(function(){var el=$(this),icon;if(!el.attr("data-editor")){return}icon=el.closest("[data-pid]").find(".edit-icon").first();icon.prop("title",el.text()).tooltip("fixTitle").removeClass("hidden")})}$(window).on("action:posts.edited",function(ev,data){var parent=$('[data-pid="'+data.post.pid+'"]');var icon=parent.find(".edit-icon").filter(function(index,el){return parseInt($(el).closest("[data-pid]").attr("data-pid"),10)===parseInt(data.post.pid,10)});var el=parent.find('[component="post/editor"]').first();icon.prop("title",el.text()).tooltip("fixTitle").removeClass("hidden")});$(window).on("action:topic.loaded",activateEditedTooltips);$(window).on("action:posts.loaded",activateEditedTooltips)}function setupMobileMenu(){if(!window.addEventListener){return}$("#menu").removeClass("hidden");var slideout=new Slideout({panel:document.getElementById("panel"),menu:document.getElementById("menu"),padding:256,tolerance:70,side:"right"});if(env!=="xs"){slideout.disableTouch()}$("#mobile-menu").on("click",function(){slideout.toggle()});$("#menu a").on("click",function(){slideout.close()});$(window).on("resize action:ajaxify.start",function(){slideout.close();$(".account .cover").css("top",$('[component="navbar"]').height())});function openingMenuAndLoad(){openingMenu();loadNotificationsAndChat()}function openingMenu(){$("#header-menu").css({top:$(window).scrollTop()+"px",position:"absolute"})}function loadNotificationsAndChat(){require(["chat","notifications"],function(chat,notifications){chat.loadChatsDropdown($('#menu [data-section="chats"] ul'));notifications.loadNotifications($('#menu [data-section="notifications"] ul'))})}slideout.on("open",openingMenuAndLoad);slideout.on("touchmove",function(target){var $target=$(target);if($target.length&&($target.is("code")||$target.parents("code").length||$target.hasClass("preventSlideOut")||$target.parents(".preventSlideOut").length)){slideout._preventOpen=true}});slideout.on("close",function(){$("#header-menu").css({top:"0px",position:"fixed"});$(".slideout-open").removeClass("slideout-open");$(".topic .pagination-block").css({bottom:0})});slideout.on("beforeopen",function(){var paginator=$(".topic .pagination-block")[0];if(paginator){paginator.style.bottom=0;paginator.style.bottom=(paginator.getBoundingClientRect().bottom-window.innerHeight).toString()+"px"}});$('#menu [data-section="navigation"] ul').html($("#main-nav").html()+($("#search-menu").html()||"")+($("#logged-out-menu").html()||""));$("#user-control-list").children().clone(true,true).appendTo($('#menu [data-section="profile"] ul'));$('#menu [data-section="profile"] ul').find('[component="user/status"]').remove();socket.on("event:user_status_change",function(data){if(parseInt(data.uid,10)===app.user.uid){app.updateUserStatus($('#menu [component="user/status"]'),data.status);slideout.close()}})}function setupHoverCards(){require(["components"],function(components){components.get("topic").on("click",'[component="user/picture"],[component="user/status"]',generateUserCard)});$(window).on("action:posts.loading",function(ev,data){for(var i=0,ii=data.posts.length;i<ii;i++){(ajaxify.data.topics||ajaxify.data.posts)[data.posts[i].index]=data.posts[i]}})}function generateUserCard(ev){var avatar=$(this),index=avatar.parents("[data-index]").attr("data-index"),data=ajaxify.data.topics||ajaxify.data.posts;for(var i=0,ii=data.length;i<ii;i++){if(parseInt(data[i].index,10)===parseInt(index,10)){data=data[i].user;break}}$(".persona-usercard").remove();if(parseInt(data.uid,10)===0){return false}socket.emit("user.isFollowing",{uid:data.uid},function(err,isFollowing){app.parseAndTranslate("modules/usercard",data,function(html){var card=$(html);avatar.parents("a").after(card.hide());if(parseInt(app.user.uid,10)===parseInt(data.uid,10)||!app.user.uid){card.find(".btn-morph").hide()}else{setupFavouriteMorph(card,data.uid,data.username);if(isFollowing){$(".btn-morph").addClass("heart")}else{$(".btn-morph").addClass("plus")}}utils.makeNumbersHumanReadable(card.find(".human-readable-number"));setupCardRemoval(card);card.fadeIn()})});ev.preventDefault();return false}function setupFavouriteButtonOnProfile(){setupFavouriteMorph($('[component="account/cover"]'),ajaxify.data.uid,ajaxify.data.username)}function setupCardRemoval(card){function removeCard(ev){if($(ev.target).closest(".persona-usercard").length===0){card.fadeOut(function(){card.remove()});$(document).off("click",removeCard)}}$(document).on("click",removeCard)}function setupFavouriteMorph(parent,uid,username){parent.find(".btn-morph").click(function(ev){var type=$(this).hasClass("plus")?"follow":"unfollow";socket.emit("user."+type,{uid:uid},function(err){if(err){return app.alertError(err.message)}app.alertSuccess("[[global:alert."+type+", "+username+"]]")});$(this).toggleClass("plus").toggleClass("heart");$(this).translateAttr("title",type==="follow"?"[[global:unfollow]]":"[[global:follow]]");if($(this).find("b.drop").length===0){$(this).prepend('<b class="drop"></b>')}var drop=$(this).find("b.drop").removeClass("animate"),x=ev.pageX-drop.width()/2-$(this).offset().left,y=ev.pageY-drop.height()/2-$(this).offset().top;drop.css({top:y+"px",left:x+"px"}).addClass("animate")})}function setupQuickReply(){$(window).on("action:ajaxify.end",function(ev,data){if(data.url&&data.url.match("^topic/")){require(["persona/quickreply"],function(quickreply){quickreply.init()})}})}});(function(root,factory){if(typeof exports==="object"){module.exports=factory()}else{root.NProgress=factory()}})(this,function(){var NProgress={};NProgress.version="0.1.6";var Settings=NProgress.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:true,trickleRate:.02,trickleSpeed:800,showSpinner:true,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};NProgress.configure=function(options){var key,value;for(key in options){value=options[key];if(value!==undefined&&options.hasOwnProperty(key))Settings[key]=value}return this};NProgress.status=null;NProgress.set=function(n){var started=NProgress.isStarted();n=clamp(n,Settings.minimum,1);NProgress.status=n===1?null:n;var progress=NProgress.render(!started),bar=progress.querySelector(Settings.barSelector),speed=Settings.speed,ease=Settings.easing;progress.offsetWidth;queue(function(next){if(Settings.positionUsing==="")Settings.positionUsing=NProgress.getPositioningCSS();css(bar,barPositionCSS(n,speed,ease));if(n===1){css(progress,{transition:"none",opacity:1});progress.offsetWidth;setTimeout(function(){css(progress,{transition:"all "+speed+"ms linear",opacity:0});setTimeout(function(){NProgress.remove();next()},speed)},speed)}else{setTimeout(next,speed)}});return this};NProgress.isStarted=function(){return typeof NProgress.status==="number"};NProgress.start=function(){if(!NProgress.status)NProgress.set(0);var work=function(){setTimeout(function(){if(!NProgress.status)return;NProgress.trickle();work()},Settings.trickleSpeed)};if(Settings.trickle)work();return this};NProgress.done=function(force){if(!force&&!NProgress.status)return this;return NProgress.inc(.3+.5*Math.random()).set(1)};NProgress.inc=function(amount){var n=NProgress.status;if(!n){return NProgress.start()}else{if(typeof amount!=="number"){amount=(1-n)*clamp(Math.random()*n,.1,.95)}n=clamp(n+amount,0,.994);return NProgress.set(n)}};NProgress.trickle=function(){return NProgress.inc(Math.random()*Settings.trickleRate)};(function(){var initial=0,current=0;NProgress.promise=function($promise){if(!$promise||$promise.state()=="resolved"){return this}if(current==0){NProgress.start()}initial++;current++;$promise.always(function(){current--;if(current==0){initial=0;NProgress.done()}else{NProgress.set((initial-current)/initial)}});return this}})();NProgress.render=function(fromStart){if(NProgress.isRendered())return document.getElementById("nprogress");addClass(document.documentElement,"nprogress-busy");var progress=document.createElement("div");progress.id="nprogress";progress.innerHTML=Settings.template;var bar=progress.querySelector(Settings.barSelector),perc=fromStart?"-100":toBarPerc(NProgress.status||0),parent=document.querySelector(Settings.parent),spinner;css(bar,{transition:"all 0 linear",transform:"translate3d("+perc+"%,0,0)"});if(!Settings.showSpinner){spinner=progress.querySelector(Settings.spinnerSelector);spinner&&removeElement(spinner)}if(parent!=document.body){addClass(parent,"nprogress-custom-parent")}parent.appendChild(progress);return progress};NProgress.remove=function(){removeClass(document.documentElement,"nprogress-busy");removeClass(document.querySelector(Settings.parent),"nprogress-custom-parent");var progress=document.getElementById("nprogress");progress&&removeElement(progress)};NProgress.isRendered=function(){return!!document.getElementById("nprogress")};NProgress.getPositioningCSS=function(){var bodyStyle=document.body.style;var vendorPrefix="WebkitTransform"in bodyStyle?"Webkit":"MozTransform"in bodyStyle?"Moz":"msTransform"in bodyStyle?"ms":"OTransform"in bodyStyle?"O":"";if(vendorPrefix+"Perspective"in bodyStyle){return"translate3d"}else if(vendorPrefix+"Transform"in bodyStyle){return"translate"}else{return"margin"}};function clamp(n,min,max){if(n<min)return min;if(n>max)return max;return n}function toBarPerc(n){return(-1+n)*100}function barPositionCSS(n,speed,ease){var barCSS;if(Settings.positionUsing==="translate3d"){barCSS={transform:"translate3d("+toBarPerc(n)+"%,0,0)"}}else if(Settings.positionUsing==="translate"){barCSS={transform:"translate("+toBarPerc(n)+"%,0)"}}else{barCSS={"margin-left":toBarPerc(n)+"%"}}barCSS.transition="all "+speed+"ms "+ease;return barCSS}var queue=function(){var pending=[];function next(){var fn=pending.shift();if(fn){fn(next)}}return function(fn){pending.push(fn);if(pending.length==1)next()}}();var css=function(){var cssPrefixes=["Webkit","O","Moz","ms"],cssProps={};function camelCase(string){return string.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(match,letter){return letter.toUpperCase()})}function getVendorProp(name){var style=document.body.style;if(name in style)return name;var i=cssPrefixes.length,capName=name.charAt(0).toUpperCase()+name.slice(1),vendorName;while(i--){vendorName=cssPrefixes[i]+capName;if(vendorName in style)return vendorName}return name}function getStyleProp(name){name=camelCase(name);return cssProps[name]||(cssProps[name]=getVendorProp(name))}function applyCss(element,prop,value){prop=getStyleProp(prop);element.style[prop]=value}return function(element,properties){var args=arguments,prop,value;if(args.length==2){for(prop in properties){value=properties[prop];if(value!==undefined&&properties.hasOwnProperty(prop))applyCss(element,prop,value)}}else{applyCss(element,args[1],args[2])}}}();function hasClass(element,name){var list=typeof element=="string"?element:classList(element);return list.indexOf(" "+name+" ")>=0}function addClass(element,name){var oldList=classList(element),newList=oldList+name;if(hasClass(oldList,name))return;element.className=newList.substring(1)}function removeClass(element,name){var oldList=classList(element),newList;if(!hasClass(element,name))return;newList=oldList.replace(" "+name+" "," ");element.className=newList.substring(1,newList.length-1)}function classList(element){return(" "+(element.className||"")+" ").replace(/\s+/gi," ")}function removeElement(element){element&&element.parentNode&&element.parentNode.removeChild(element)}return NProgress});!function(a,b,c,d){function e(b,c){this.element=a(b),this.settings=a.extend({},w,c),this._defaults=w,this._name=m,this.init()}function f(b){v&&(b.element.addClass("navbar-hidden").animate({top:-1*parseInt(b.element.css("height"),10)+b.settings.navbarOffset},{queue:!1,duration:b.settings.animationDuration}),a(".dropdown.open .dropdown-toggle",b.element).dropdown("toggle"),v=!1,b.element.trigger("hide.autoHidingNavbar"))}function g(a){v||(a.element.removeClass("navbar-hidden").animate({top:0},{queue:!1,duration:a.settings.animationDuration}),v=!0,a.element.trigger("show.autoHidingNavbar"))}function h(a){var b=n.scrollTop(),c=b-t;if(t=b,0>c){if(v)return;(a.settings.showOnUpscroll||l>=b)&&g(a)}else if(c>0){if(!v)return void(a.settings.showOnBottom&&b+u===o.height()&&g(a));b>=l&&f(a)}}function i(a){a.settings.disableAutohide||(s=(new Date).getTime(),h(a))}function j(a){o.on("scroll."+m,function(){(new Date).getTime()-s>r?i(a):(clearTimeout(p),p=setTimeout(function(){i(a)},r))}),n.on("resize."+m,function(){clearTimeout(q),q=setTimeout(function(){u=n.height()},r)})}function k(){o.off("."+m),n.off("."+m)}var l,m="autoHidingNavbar",n=a(b),o=a(c),p=null,q=null,r=70,s=0,t=null,u=n.height(),v=!0,w={disableAutohide:!1,showOnUpscroll:!0,showOnBottom:!0,hideOffset:"auto",animationDuration:200,navbarOffset:0};e.prototype={init:function(){return this.elements={navbar:this.element},this.setDisableAutohide(this.settings.disableAutohide),this.setShowOnUpscroll(this.settings.showOnUpscroll),this.setShowOnBottom(this.settings.showOnBottom),this.setHideOffset(this.settings.hideOffset),this.setAnimationDuration(this.settings.animationDuration),l="auto"===this.settings.hideOffset?parseInt(this.element.css("height"),10):this.settings.hideOffset,j(this),this.element},setDisableAutohide:function(a){return this.settings.disableAutohide=a,this.element},setShowOnUpscroll:function(a){return this.settings.showOnUpscroll=a,this.element},setShowOnBottom:function(a){return this.settings.showOnBottom=a,this.element},setHideOffset:function(a){return this.settings.hideOffset=a,this.element},setAnimationDuration:function(a){return this.settings.animationDuration=a,this.element},show:function(){return g(this),this.element},hide:function(){return f(this),this.element},destroy:function(){return k(this),g(this),a.data(this,"plugin_"+m,null),this.element}},a.fn[m]=function(b){var c=arguments;if(b===d||"object"==typeof b)return this.each(function(){a.data(this,"plugin_"+m)||a.data(this,"plugin_"+m,new e(this,b))});if("string"==typeof b&&"_"!==b[0]&&"init"!==b){var f;return this.each(function(){var d=a.data(this,"plugin_"+m);d instanceof e&&"function"==typeof d[b]&&(f=d[b].apply(d,Array.prototype.slice.call(c,1)))}),f!==d?f:this}}}(jQuery,window,document);!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Slideout=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var decouple=require("decouple");var Emitter=require("emitter");var scrollTimeout;var scrolling=false;var doc=window.document;var html=doc.documentElement;var msPointerSupported=window.navigator.msPointerEnabled;var touch={start:msPointerSupported?"MSPointerDown":"touchstart",move:msPointerSupported?"MSPointerMove":"touchmove",end:msPointerSupported?"MSPointerUp":"touchend"};var prefix=function prefix(){var regex=/^(Webkit|Khtml|Moz|ms|O)(?=[A-Z])/;var styleDeclaration=doc.getElementsByTagName("script")[0].style;for(var prop in styleDeclaration){if(regex.test(prop)){return"-"+prop.match(regex)[0].toLowerCase()+"-"}}if("WebkitOpacity"in styleDeclaration){return"-webkit-"}if("KhtmlOpacity"in styleDeclaration){return"-khtml-"}return""}();function extend(destination,from){for(var prop in from){if(from[prop]){destination[prop]=from[prop]}}return destination}function inherits(child,uber){child.prototype=extend(child.prototype||{},uber.prototype)}function Slideout(options){options=options||{};this._startOffsetX=0;this._currentOffsetX=0;this._opening=false;this._moved=false;this._opened=false;this._preventOpen=false;this._touch=options.touch===undefined?true:options.touch&&true;this.panel=options.panel;this.menu=options.menu;if(this.panel.className.search("slideout-panel")===-1){this.panel.className+=" slideout-panel"}if(this.menu.className.search("slideout-menu")===-1){this.menu.className+=" slideout-menu"}this._fx=options.fx||"ease";this._duration=parseInt(options.duration,10)||300;this._tolerance=parseInt(options.tolerance,10)||70;this._padding=this._translateTo=parseInt(options.padding,10)||256;this._orientation=options.side==="right"?-1:1;this._translateTo*=this._orientation;if(this._touch){this._initTouchEvents()}}inherits(Slideout,Emitter);Slideout.prototype.open=function(){var self=this;this.emit("beforeopen");if(html.className.search("slideout-open")===-1){html.className+=" slideout-open"}this._setTransition();this._translateXTo(this._translateTo);this._opened=true;setTimeout(function(){self.panel.style.transition=self.panel.style["-webkit-transition"]="";self.emit("open")},this._duration+50);return this};Slideout.prototype.close=function(){var self=this;if(!this.isOpen()&&!this._opening){return this}this.emit("beforeclose");this._setTransition();this._translateXTo(0);this._opened=false;setTimeout(function(){html.className=html.className.replace(/ slideout-open/,"");self.panel.style.transition=self.panel.style["-webkit-transition"]=self.panel.style[prefix+"transform"]=self.panel.style.transform="";self.emit("close")},this._duration+50);return this};Slideout.prototype.toggle=function(){return this.isOpen()?this.close():this.open()};Slideout.prototype.isOpen=function(){return this._opened};Slideout.prototype._translateXTo=function(translateX){this._currentOffsetX=translateX;this.panel.style[prefix+"transform"]=this.panel.style.transform="translate3d("+translateX+"px, 0, 0)"};Slideout.prototype._setTransition=function(){this.panel.style[prefix+"transition"]=this.panel.style.transition=prefix+"transform "+this._duration+"ms "+this._fx};Slideout.prototype._initTouchEvents=function(){var self=this;this._onScrollFn=decouple(doc,"scroll",function(){if(!self._moved){clearTimeout(scrollTimeout);scrolling=true;scrollTimeout=setTimeout(function(){scrolling=false},250)}});this._preventMove=function(eve){if(self._moved){eve.preventDefault()}};doc.addEventListener(touch.move,this._preventMove);this._resetTouchFn=function(eve){if(typeof eve.touches==="undefined"){return}self._moved=false;self._opening=false;self._startOffsetX=eve.touches[0].pageX;self._preventOpen=!self._touch||!self.isOpen()&&self.menu.clientWidth!==0};this.panel.addEventListener(touch.start,this._resetTouchFn);this._onTouchCancelFn=function(){self._moved=false;self._opening=false};this.panel.addEventListener("touchcancel",this._onTouchCancelFn);this._onTouchEndFn=function(){if(self._moved){self._opening&&Math.abs(self._currentOffsetX)>self._tolerance?self.open():self.close()}self._moved=false};this.panel.addEventListener(touch.end,this._onTouchEndFn);this._onTouchMoveFn=function(eve){self.emit("touchmove",eve.target);if(scrolling||self._preventOpen||typeof eve.touches==="undefined"){return}var dif_x=eve.touches[0].clientX-self._startOffsetX;var translateX=self._currentOffsetX=dif_x;if(Math.abs(translateX)>self._padding){return}if(Math.abs(dif_x)>20){self._opening=true;var oriented_dif_x=dif_x*self._orientation;if(self._opened&&oriented_dif_x>0||!self._opened&&oriented_dif_x<0){return}if(oriented_dif_x<=0){translateX=dif_x+self._padding*self._orientation;self._opening=false}if(!self._moved&&html.className.search("slideout-open")===-1){html.className+=" slideout-open"}self.panel.style[prefix+"transform"]=self.panel.style.transform="translate3d("+translateX+"px, 0, 0)";self.emit("translate",translateX,eve.target);self._moved=true}};this.panel.addEventListener(touch.move,this._onTouchMoveFn)};Slideout.prototype.enableTouch=function(){this._touch=true;return this};Slideout.prototype.disableTouch=function(){this._touch=false;return this};Slideout.prototype.destroy=function(){this.close();doc.removeEventListener(touch.move,this._preventMove);this.panel.removeEventListener(touch.start,this._resetTouchFn);this.panel.removeEventListener("touchcancel",this._onTouchCancelFn);this.panel.removeEventListener(touch.end,this._onTouchEndFn);this.panel.removeEventListener(touch.move,this._onTouchMoveFn);doc.removeEventListener("scroll",this._onScrollFn);this.open=this.close=function(){};return this};module.exports=Slideout},{decouple:2,emitter:3}],2:[function(require,module,exports){"use strict";var requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}();function decouple(node,event,fn){var eve,tracking=false;function captureEvent(e){eve=e;track()}function track(){if(!tracking){requestAnimFrame(update);tracking=true}}function update(){fn.call(node,eve);tracking=false}node.addEventListener(event,captureEvent,false);return captureEvent}module.exports=decouple},{}],3:[function(require,module,exports){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};exports.__esModule=true;var Emitter=function(){function Emitter(){_classCallCheck(this,Emitter)}Emitter.prototype.on=function on(event,listener){this._eventCollection=this._eventCollection||{};this._eventCollection[event]=this._eventCollection[event]||[];this._eventCollection[event].push(listener);return this};Emitter.prototype.once=function once(event,listener){var self=this;function fn(){self.off(event,fn);listener.apply(this,arguments)}fn.listener=listener;this.on(event,fn);return this};Emitter.prototype.off=function off(event,listener){var listeners=undefined;if(!this._eventCollection||!(listeners=this._eventCollection[event])){return this}listeners.forEach(function(fn,i){if(fn===listener||fn.listener===listener){listeners.splice(i,1)}});if(listeners.length===0){delete this._eventCollection[event]}return this};Emitter.prototype.emit=function emit(event){var _this=this;for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var listeners=undefined;if(!this._eventCollection||!(listeners=this._eventCollection[event])){return this}listeners=listeners.slice(0);listeners.forEach(function(fn){return fn.apply(_this,args)});return this};return Emitter}();exports["default"]=Emitter;module.exports=exports["default"]},{}]},{},[1])(1)});"use strict";define("persona/quickreply",["components"],function(components){var QuickReply={};QuickReply.init=function(){var element=components.get("topic/quickreply/text");var data={element:element,strategies:[],options:{zIndex:100,listPosition:function(position){this.$el.css(this._applyPlacement(position));this.$el.css("position","absolute");return this}}};$(window).trigger("composer:autocomplete:init",data);data.element.textcomplete(data.strategies,data.options);$(".textcomplete-wrapper").css("height","100%").find("textarea").css("height","100%");components.get("topic/quickreply/button").on("click",function(e){var replyMsg=components.get("topic/quickreply/text").val();var replyData={tid:ajaxify.data.tid,handle:undefined,content:replyMsg};socket.emit("posts.reply",replyData,function(err,data){if(err){app.alertError(err.message)}components.get("topic/quickreply/text").val("")})})};return QuickReply});define("persona/chats",["components","forum/chats"],function(components,coreChats){var Chats={};Chats.init=function(){var env=utils.findBootstrapEnvironment();if(ajaxify.data.hasOwnProperty("roomId")&&(env==="sm"||env==="xs")){app.openChat(ajaxify.data.roomId,ajaxify.data.uid)}components.get("chat/recent").on("click",'[component="chat/recent/room"]',function(e){env=utils.findBootstrapEnvironment();if(env==="xs"||env==="sm"){app.openChat($(this).attr("data-roomid"))}else{coreChats.switchChat($(this).attr("data-roomid"))}})};return Chats});"use strict";$(document).ready(function(){var Markdown={};$(window).on("action:composer.enhanced",function(){Markdown.prepareFormattingTools()});Markdown.highlight=function(data){if(data instanceof jQuery.Event){highlight($(data.data.selector))}else{highlight(data)}};Markdown.prepareFormattingTools=function(){require(["composer/formatting","composer/controls","translator"],function(formatting,controls,translator){if(formatting&&controls){translator.getTranslations(window.config.userLang||window.config.defaultLang,"markdown",function(strings){formatting.addButtonDispatch("bold",function(textarea,selectionStart,selectionEnd){if(selectionStart===selectionEnd){controls.insertIntoTextarea(textarea,"**"+strings.bold+"**");controls.updateTextareaSelection(textarea,selectionStart+2,selectionStart+strings.bold.length+2)}else{controls.wrapSelectionInTextareaWith(textarea,"**");controls.updateTextareaSelection(textarea,selectionStart+2,selectionEnd+2)}});formatting.addButtonDispatch("italic",function(textarea,selectionStart,selectionEnd){if(selectionStart===selectionEnd){controls.insertIntoTextarea(textarea,"*"+strings.italic+"*");controls.updateTextareaSelection(textarea,selectionStart+1,selectionStart+strings.italic.length+1)}else{controls.wrapSelectionInTextareaWith(textarea,"*");controls.updateTextareaSelection(textarea,selectionStart+1,selectionEnd+1)}});formatting.addButtonDispatch("list",function(textarea,selectionStart,selectionEnd){if(selectionStart===selectionEnd){controls.insertIntoTextarea(textarea,"\n* "+strings.list_item);controls.updateTextareaSelection(textarea,selectionStart+3,selectionStart+strings.list_item.length+3)}else{controls.wrapSelectionInTextareaWith(textarea,"\n* ","");controls.updateTextareaSelection(textarea,selectionStart+3,selectionEnd+3)}});formatting.addButtonDispatch("strikethrough",function(textarea,selectionStart,selectionEnd){console.log(strings);if(selectionStart===selectionEnd){controls.insertIntoTextarea(textarea,"~~"+strings.strikethrough_text+"~~");controls.updateTextareaSelection(textarea,selectionStart+2,selectionEnd+strings.strikethrough_text.length+2)}else{controls.wrapSelectionInTextareaWith(textarea,"~~","~~");controls.updateTextareaSelection(textarea,selectionStart+2,selectionEnd+2)}});formatting.addButtonDispatch("link",function(textarea,selectionStart,selectionEnd){if(selectionStart===selectionEnd){controls.insertIntoTextarea(textarea,"["+strings.link_text+"]("+strings.link_url+")");controls.updateTextareaSelection(textarea,selectionStart+strings.link_text.length+3,selectionEnd+strings.link_text.length+strings.link_url.length+3)}else{controls.wrapSelectionInTextareaWith(textarea,"[","]("+strings.link_url+")");controls.updateTextareaSelection(textarea,selectionEnd+3,selectionEnd+strings.link_url.length+3)}});formatting.addButtonDispatch("picture-o",function(textarea,selectionStart,selectionEnd){if(selectionStart===selectionEnd){controls.insertIntoTextarea(textarea,"!["+strings.picture_text+"]("+strings.picture_url+")");controls.updateTextareaSelection(textarea,selectionStart+strings.picture_text.length+4,selectionEnd+strings.picture_text.length+strings.picture_url.length+4)}else{controls.wrapSelectionInTextareaWith(textarea,"![","]("+strings.picture_url+")");controls.updateTextareaSelection(textarea,selectionEnd+4,selectionEnd+strings.picture_url.length+4)}})})}})};function highlight(elements){if(parseInt(config.markdown.highlight,10)){require(["highlight"],function(hljs){elements.each(function(i,block){$(block.parentNode).addClass("markdown-highlight");hljs.highlightBlock(block)})})}}$(window).on("action:composer.preview",{selector:".composer .preview pre code"},Markdown.highlight);require(["components"],function(components){$(window).on("action:posts.loaded action:topic.loaded action:posts.edited",function(){Markdown.highlight(components.get("post/content").find("pre code"))})})});"use strict";$(document).ready(function(){var groupList=[];var localUserList=[];
$(window).on("composer:autocomplete:init",function(ev,data){localUserList=loadDomUsers();if(!groupList.length){loadGroupList()}var subset;var strategy={match:/\B@([^\s\n]*)?$/,search:function(term,callback){var usernames;if(!term){usernames=localUserList.concat(groupList).filter(function(value,index,array){return array.indexOf(value)===index&&value!==app.user.username}).sort(function(a,b){return a.toLocaleLowerCase()>b.toLocaleLowerCase()});return callback(usernames)}socket.emit("user.search",{query:term},function(err,userdata){if(err){return callback([])}usernames=userdata.users.map(function(user){return user.username});subset=localUserList.concat(groupList).filter(function(username){return username.toLocaleLowerCase().indexOf(term.toLocaleLowerCase())!==-1});usernames=usernames.concat(subset).filter(function(value,index,array){return array.indexOf(value)===index});subset=subset.map(function(name){return name.toLocaleLowerCase()});usernames.sort(function(a,b){if(subset.indexOf(a.toLocaleLowerCase())!==-1&&subset.indexOf(b.toLocaleLowerCase())===-1){return-1}else if(subset.indexOf(a.toLocaleLowerCase())===-1&&subset.indexOf(b.toLocaleLowerCase())!==-1){return 1}else{return a.toLocaleLowerCase()>b.toLocaleLowerCase()}});if(app.user.username&&usernames.indexOf(app.user.username)!==-1){usernames.splice(usernames.indexOf(app.user.username),1)}callback(usernames)})},index:1,replace:function(mention){mention=$("<div/>").html(mention).text();return"@"+utils.slugify(mention,true)+" "},cache:true};data.strategies.push(strategy)});$(window).on("action:composer.loaded",function(e,data){var composer=$("#cmp-uuid-"+data.post_uuid+" .write");composer.attr("data-mentions","1")});function loadDomUsers(){var DOMusers=[];$('[component="post"][data-uid!="0"]').each(function(idx,el){var username=el.getAttribute("data-username");if(DOMusers.indexOf(username)===-1){DOMusers.push(username)}});return DOMusers}function loadGroupList(){socket.emit("plugins.mentions.listGroups",function(err,groupNames){if(err){return app.alertError(err.message)}groupList=groupNames})}});"use strict";(function(){})();"use strict";!function(){function a(a,b){var d=b.element;d.data(c)||(null===f?require(["plugin/emoji-extended/completion"],function(a){a.then(function(a){a.applyTo(d,b.options)})}):f!==!1&&(b.strategies.push(f.strategy),d.data(c,!0)))}var b=[],c="emoji-extended-strategy",d={zIndex:2e4,listPosition:function(a){return this.$el.css(this._applyPlacement(a)),this.$el.css("position","absolute"),this}},e=$(window),f=null;require(["plugin/emoji-extended/completion"],function(a){a.then(function(a){f=a},function(){f=!1})}),e.on("composer:autocomplete:init",a),e.on("chat:autocomplete:init",a),define("plugin/emoji-extended/completion",["plugin/emoji-extended/debug","plugin/emoji-extended/items","plugin/emoji-extended/settings","plugin/emoji-extended/detection"],function(a,e,f,g){var h=$.Deferred();return $.when(e,f,g).then(function(e,f,g){function i(b,e){b instanceof $||(b=$(b)),b.data(c)||(null==e&&(e=d),a.log("apply text-completion",b,e),b.textcomplete([r.strategy],e),b.data(c,!0))}function j(a,b){if(!g.allowCompletion(a))return b([]);var c=a.match(/:([\w\d\+-]*)$/)[1].toLowerCase(),d=$.grep(e.list,function(a){if(-1!==a.id.indexOf(c))return!0;for(var b=a.aliases.length,d=0;b>d;d++)if(-1!==a.aliases[d].indexOf(c))return!0;return!1});return $.each(d,function(a,b){b.idx=a}),d=d.sort(function(a,b){var d=a.id.indexOf(c),e=b.id.indexOf(c);return-1===d?-1===e?a.idx-b.idx:1:-1===e?-1:d-e||a.idx-b.idx}),b(d)}function k(a){for(var b=p[a.setId],c="",d=0;d<b.length;d++){var e=b[d];if("string"==typeof e)c+=e;else{var f=e.key;a.hasOwnProperty(f)?c+=e.encode?encodeURIComponent(a[f]):a[f]:e.fallback&&(c+=e.fallback)}}return c}function l(a,b){var c=o+(b?" "+b:"");a.hasOwnProperty("classes")&&(c+=" "+a.classes);var d='<img src="'+k(a)+'" class="'+c+'" data-set-id="'+a.setId+'" data-emoji-id="'+a.id+'"';return a.hasOwnProperty("width")&&(d+=' width="'+a.width+'"'),a.hasOwnProperty("height")&&(d+=' height="'+a.height+'"'),d+"/>"}function m(a){return l(a,"emoji-completion")+" "+a.id}var n=f.completion,o=f.classes,p=f.urls;if(!n.enabled)return a.log("completion disabled"),h.reject("Disabled via settings.");var q="^((([\\s\\S]*)("+n.prefix+")):[\\w\\d+-]{"+n.minChars+",})$";$.each(e.list,function(a,c){$.isArray(c.aliases)||(c.aliases=b)});var r={strategy:{match:new RegExp(q,"i"),search:j,replace:function(a){return"$2:"+a.id+": "},template:m,maxCount:n.maxLines,index:1},getImg:l,getPath:k,applyTo:i};h.resolve(r)},function(a){h.reject(a)}),h})}();"use strict";define("plugin/emoji-extended/debug",function(){var a=Array.prototype.slice,b="distribution",c="development"===b,d={enabled:c,_log:function(){console.log.apply(console,["nodebb-plugin-emoji-extended DEBUG -"].concat(a.call(arguments)))},error:function(){console.error.apply(console,["nodebb-plugin-emoji-extended ERROR -"].concat(a.call(arguments)))}};return c?(d.log=d._log,d.log("Debug-mode is enabled.")):d.log=$.noop,d});"use strict";define("plugin/emoji-extended",function(){var a="1.1.1+1238".split("+");return{id:"nodebb-plugin-emoji-extended",name:"Emoji Extended",version:a[0],versionMeta:null!=a[1]?a[1]:null}});"use strict";!function(){define("plugin/emoji-extended/items",function(){return $.Deferred()}),require(["plugin/emoji-extended/debug","plugin/emoji-extended/items"],function(a,b){socket.emit("plugins.emojiExtended.emojiList",null,function(c,d){function e(a,b){for(var c=d.list,e=0;e<c.length;e++){var f=c[e];if(f.id===a&&f.setId===b)return f}return null}function f(b){a.log("update list",b),g.list=b}null!=c&&(a.error(c),d=[]),a.log("initialize list",d);var g={list:d,getItem:e,update:f};b.resolve(g)})})}();"use strict";!function(){define("plugin/emoji-extended/settings",function(){return $.Deferred()}),require(["plugin/emoji-extended/debug","plugin/emoji-extended/settings"],function(a,b){socket.emit("plugins.emojiExtended.settings",null,function(c,d){return null!=c?(b.reject(c),a.error(c)):(a.log("initialize settings",d),void b.resolve(d))})})}();"use strict";!function(){define("plugin/emoji-extended/styles",["plugin/emoji-extended/debug"],function(a){var b={style:"",element:$('<style type="text/css" id="styles-emoji-extended"></style>'),append:function(c){a.log("append style",c),b.style+=(b.style?"\n":"")+c,b.element.html(b.style)}};return b}),require(["plugin/emoji-extended/debug","plugin/emoji-extended/styles"],function(a,b){socket.emit("plugins.emojiExtended.styles",null,function(c,d){null!=c&&a.error(c),d=".emoji { display: inline-block; }\n"+(d||""),b.append(d),$(document).ready(function(){b.element.appendTo("head")})})})}();"use strict";$(window).on("action:composer.enhanced",function(){require(["composer/formatting"],function(a){a.addButtonDispatch("emoji-extended",function(a,b,c){require(["plugin/emoji-extended/composer/modal"],function(d){d.openAndInsert(a,b,c)})})})});"use strict";define("plugin/emoji-extended/composer/modal",["plugin/emoji-extended/debug","plugin/emoji-extended/items","plugin/emoji-extended/settings","plugin/emoji-extended/completion","composer/controls","translator"],function(a,b,c,d,e,f){function g(){var b=$.Deferred();return a.log("modal requested"),f.translate("[[emojiExtended:modal.title]]",function(a){b.resolve(a)}),$.when(p,c,d,b).then(function(b,c,d,e){var f=$.Deferred(),g=bootbox.dialog({size:"large",title:e,message:i(b,c,d,f),onEscape:function(){f.reject()}});return g.addClass("emoji-extended-modal"),a.log("modal ready"),a.enabled&&(f=f.fail(function(b){a.log("modal dismissed",b)})),f.then(function(b){return a.log("modal success",b),g.modal("hide"),b})})}function h(a,b,c){return g().then(function(d){var f=":"+d.id+": ",g=c+f.length,h=b===c?g:b;e.updateTextareaSelection(a,c,c),e.insertIntoTextarea(a,f),e.updateTextareaSelection(a,h,g),$(a).trigger("input")})}function i(a,b,c,d){var e=j(a,b,c);return e.on("click",".emoji-link",function(){d.resolve($(this).data("item"))}),e}function j(a,b,c){var d=$('<div class="tabbable"></div>'),e=$('<ul class="nav nav-tabs" role="tablist"></ul>').appendTo(d),g=$('<div class="tab-content"></div>').appendTo(d);return $.each(a,function(a,b){var d=b.title,h=$('<a href="#emoji-'+d+'" data-toggle="tab" data-ajaxify="false">'+d+"</a>"),i=$("<li></li>").append(h).appendTo(e),j=k(b,c).addClass("tab-pane fade").appendTo(g);f.translate("[[emojiCategories:"+d+"]]",function(a){h.text(a)}),0===a&&(i.addClass("active"),j.addClass("active in"))}),l(e,g,b),d}function k(a,b){for(var c=$('<div id="emoji-'+a.title+'" class="emoji-container row"></div>'),d=a.items,e=0;e<d.length;e++){var f=d[e];$('<a class="emoji-link col-xs-6 col-md-3" title="'+f.id+'"></a>').append(b.getImg(f,"emoji-presentation")+" :"+f.id+":").data("item",f).appendTo(c)}return c}function l(a,b,c){var d=c.legal;if(d.length){var e=$('<a href="#emoji-legal" data-toggle="tab">Legal Information</a>');$("<li></li>").append(e).appendTo(a),m(d,c.sets>1).addClass("tab-pane fade").appendTo(b),f.translate("[[emojiExtended:modal.legal]]",function(a){e.text(a)})}}function m(a,b){var c=$('<div id="emoji-legal"></div>');b&&f.translate("[[emojiExtended:modal.legal.header]]",function(a){$("<p>"+a+"</p>").prependTo(c)});for(var d=0;d<a.length;d++)n(a[d],b).appendTo(c);return c}function n(a,b){var c=$('<div id="emoji-legal-'+a.setId+'" class="emoji-legal-container"></div>');if(b){var d=$('<div class="panel-heading">Images of the set \''+a.setId+"'</div>").appendTo(c);f.translate("[[emojiExtended:modal.legal.set.header,"+a.setId+"]]",function(a){d.html(a)})}var e,g=$("<div></div>").appendTo(c);if(null!=a.attribution){var h=$("<h4></h4>").appendTo(g);f.translate("[[emojiExtended:modal.legal.set.attribution]]",function(a){h.text(a)}),e=$('<p class="legal-attribution well well-sm"></p>').appendTo(g),e.append(a.attribution)}if(null!=a.license){var i=$("<h4></h4>").appendTo(g);f.translate("[[emojiExtended:modal.legal.set.license]]",function(a){i.text(a)}),e=$('<p class="legal-license well well-sm"></p>').appendTo(g),e.append(a.license)}return b&&(c.addClass("panel panel-default"),g.addClass("panel-body")),c}var o="others",p=$.Deferred();return b.then(function(b){var c=[],d={};$.each(b.list,function(a,b){var e=b.category||o;d.hasOwnProperty(e)?d[e].push(b):(d[e]=[b],c.push(e))}),c.sort(function(a,b){return a===o?1:b===o?-1:b>a?-1:1}),c=$.map(c,function(a){return{title:a,items:d[a]}}),a.log("categorization complete",c),p.resolve(c)},function(a){p.reject(a)}),{open:g,openAndInsert:h}});"use strict";!function(){define("plugin/emoji-extended/detection",function(){return $.Deferred()}),require(["plugin/emoji-extended/debug","plugin/emoji-extended/detection"],function(a,b){socket.emit("plugins.emojiExtended.parserPlugin",null,function(c,d){null!=c&&a.error(c);var e;switch(d){case"nodebb-plugin-markdown":e="markdown";break;default:e="plain"}a.log("initialize detection",e,d),require(["plugin/emoji-extended/detection/"+e],function(a){b.resolve(a)})})})}();"use strict";define("plugin/emoji-extended/detection/markdown",function(){function a(a){for(var b=0,c=0,d=!1,e=!0,f="",g=0;g<a.length;g++){var i=a[g];"`"!==i||d&&e||h.test(f)?c===b&&b?(b=c=0,e=!0,f=""):(e&&b&&(e=!1),f+=i,c=0):e?b++:(c++,f+=i),d="\\"===i}return b}function b(a){return 3===a?/^( {8}\s|( {0,3}\t){2}\s| {0,3}\t {4}\s| {4,7}\t\s)/:new RegExp("^( {"+(a+6)+"}|( {0,3}\\t){2}| {0,3}\\t( {0,"+(a+2)+"})| {4,7}\\t)")}function c(a){for(var c=!1,d=!1,h=!0,i=null,j=0;j<a.length;j++){var k,l=a[j],m=e.test(l);c=c&&!(h&&m),(k=l.match(f))&&(c=!0,i=b(k[1].length)),d=c&&i.test(l)||!c&&(h||d)&&g.test(l),h=m}return d}function d(b){var d=b.split("\n");return!(a(d[d.length-1])||c(d))}var e=/^\s*$/,f=/^( {0,3})[\+*-]\s/,g=/^ {4,}| {0,3}\t/,h=/^\s+`*$/;return{allowCompletion:d}});"use strict";define("plugin/emoji-extended/detection/plain",function(){return{allowCompletion:function(){return!0}}});"use strict";define("forum/footer",["notifications","chat","components","translator"],function(Notifications,Chat,components,translator){Notifications.prepareDOM();Chat.prepareDOM();translator.prepareDOM();function updateUnreadTopicCount(count){$("#unread-count i").toggleClass("unread-count",count>0).attr("data-content",count>99?"99+":count)}function updateUnreadNewTopicCount(count){$("#unread-new-count i").toggleClass("unread-count",count>0).attr("data-content",count>99?"99+":count)}function updateUnreadChatCount(count){components.get("chat/icon").toggleClass("unread-count",count>0).attr("data-content",count>99?"99+":count)}function initUnreadTopics(){var unreadTopics={};function onNewPost(data){if(data&&data.posts&&data.posts.length){var post=data.posts[0];if(parseInt(post.uid,10)!==parseInt(app.user.uid,10)&&!unreadTopics[post.topic.tid]){increaseUnreadCount();markTopicsUnread(post.topic.tid);unreadTopics[post.topic.tid]=true}}}function increaseUnreadCount(){var count=parseInt($("#unread-count i").attr("data-content"),10)+1;updateUnreadTopicCount(count)}function markTopicsUnread(tid){$('[data-tid="'+tid+'"]').addClass("unread")}$(window).on("action:ajaxify.end",function(ev,data){if(data.url){var tid=data.url.match(/^topic\/(\d+)/);if(tid&&tid[1]){delete unreadTopics[tid[1]]}}});socket.on("event:new_post",onNewPost)}if(app.user.uid){socket.emit("user.getUnreadCounts",function(err,data){if(err){return app.alert(err.message)}updateUnreadTopicCount(data.unreadTopicCount);updateUnreadNewTopicCount(data.unreadNewTopicCount);updateUnreadChatCount(data.unreadChatCount);Notifications.updateNotifCount(data.unreadNotificationCount)})}socket.on("event:unread.updateCount",updateUnreadTopicCount);socket.on("event:unread.updateChatCount",updateUnreadChatCount);initUnreadTopics()});"use strict";define("forum/chats",["components","translator","mousetrap","forum/chats/recent","forum/chats/search","forum/chats/messages"],function(components,translator,mousetrap,recentChats,search,messages){var Chats={initialised:false};var newMessage=false;Chats.init=function(){var env=utils.findBootstrapEnvironment();if(!Chats.initialised){Chats.addSocketListeners();Chats.addGlobalEventListeners()}Chats.addEventListeners();Chats.createTagsInput($('[component="chat/messages"] .users-tag-input'),ajaxify.data);Chats.createAutoComplete($('[component="chat/input"]'));components.get("expanded-chat/controlsToggle").on("click",function(){components.get("expanded-chat/controls").toggleClass("hide")});if(env==="md"||env==="lg"){Chats.resizeMainWindow();Chats.addHotkeys()}messages.scrollToBottom($(".expanded-chat ul"));Chats.initialised=true;search.init();if(ajaxify.data.hasOwnProperty("roomId")){components.get("chat/input").focus()}};Chats.addEventListeners=function(){$('[component="chat/recent"]').on("click",'[component="chat/leave"]',function(){Chats.leave($(this).parents("[data-roomid]"));return false});$('[component="chat/recent"]').on("click",'[component="chat/recent/room"]',function(){Chats.switchChat($(this).attr("data-roomid"))});Chats.addSendHandlers(ajaxify.data.roomId,$(".chat-input"),$('.expanded-chat button[data-action="send"]'));$('[data-action="pop-out"]').on("click",function(){var text=components.get("chat/input").val();var roomId=ajaxify.data.roomId;if(app.previousUrl&&app.previousUrl.match(/chats/)){ajaxify.go("user/"+ajaxify.data.userslug+"/chats",function(){app.openChat(roomId,ajaxify.data.uid)},true)}else{window.history.go(-1);app.openChat(roomId,ajaxify.data.uid)}$(window).one("action:chat.loaded",function(){components.get("chat/input").val(text)})});Chats.addEditDeleteHandler(components.get("chat/messages"),ajaxify.data.roomId);recentChats.init();Chats.addRenameHandler(ajaxify.data.roomId,$('[component="chat/room/name"]'));Chats.addScrollHandler(ajaxify.data.roomId,ajaxify.data.uid,$(".chat-content"))};Chats.addScrollHandler=function(roomId,uid,el){var loading=false;el.off("scroll").on("scroll",function(){if(loading){return}var top=(el[0].scrollHeight-el.height())*.1;if(el.scrollTop()>=top){return}loading=true;var start=parseInt($(".chat-content").children("[data-index]").first().attr("data-index"),10)+1;socket.emit("modules.chats.getMessages",{roomId:roomId,uid:uid,start:start},function(err,data){if(err){return app.alertError(err.message)}if(!data){return}messages.parseMessage(data,function(html){var currentScrollTop=el.scrollTop();var previousHeight=el[0].scrollHeight;html=$(html);el.prepend(html);html.find(".timeago").timeago();html.find("img:not(.not-responsive)").addClass("img-responsive");el.scrollTop(el[0].scrollHeight-previousHeight+currentScrollTop);loading=false})})})};Chats.addEditDeleteHandler=function(element,roomId){element.on("click",'[data-action="edit"]',function(){var messageId=$(this).parents("[data-mid]").attr("data-mid");var inputEl=components.get("chat/input");messages.prepEdit(inputEl,messageId,roomId)}).on("click",'[data-action="delete"]',function(){var messageId=$(this).parents("[data-mid]").attr("data-mid");messages.delete(messageId,roomId)})};Chats.addHotkeys=function(){mousetrap.bind("ctrl+up",function(){var activeContact=$(".chats-list .bg-primary"),prev=activeContact.prev();if(prev.length){Chats.switchChat(prev.attr("data-roomid"))}});mousetrap.bind("ctrl+down",function(){var activeContact=$(".chats-list .bg-primary"),next=activeContact.next();if(next.length){Chats.switchChat(next.attr("data-roomid"))}});mousetrap.bind("up",function(e){if(e.target===components.get("chat/input").get(0)){var message=components.get("chat/messages").find('.chat-message[data-self="1"]').last();var lastMid=message.attr("data-mid");var inputEl=components.get("chat/input");messages.prepEdit(inputEl,lastMid,ajaxify.data.roomId)}})};Chats.addRenameHandler=function(roomId,inputEl){var oldName=inputEl.val();inputEl.on("blur keypress",function(ev){if(ev.type==="keypress"&&ev.keyCode!==13){return}var newName=inputEl.val();if(oldName===newName){return}socket.emit("modules.chats.renameRoom",{roomId:roomId,newName:newName},function(err){if(err){return app.alertError(err.message)}oldName=newName;inputEl.blur()})})};Chats.addSendHandlers=function(roomId,inputEl,sendEl){inputEl.off("keypress").on("keypress",function(e){if(e.which===13&&!e.shiftKey){messages.sendMessage(roomId,inputEl);return false}});sendEl.off("click").on("click",function(){messages.sendMessage(roomId,inputEl);inputEl.focus();return false})};Chats.createAutoComplete=function(element){var data={element:element,strategies:[],options:{zIndex:2e4,listPosition:function(position){this.$el.css(this._applyPlacement(position));this.$el.css("position","absolute");return this}}};$(window).trigger("chat:autocomplete:init",data);if(data.strategies.length){data.element.textcomplete(data.strategies,data.options)}};Chats.createTagsInput=function(tagEl,data){tagEl.tagsinput({confirmKeys:[13,44],trimValue:true});if(data.users&&data.users.length){data.users.forEach(function(user){tagEl.tagsinput("add",$("<div/>").html(user.username).text())})}tagEl.on("beforeItemAdd",function(event){event.cancel=event.item===app.user.username});tagEl.on("itemAdded",function(event){if(event.item===app.user.username){return}socket.emit("modules.chats.addUserToRoom",{roomId:data.roomId,username:event.item},function(err){if(err){app.alertError(err.message);tagEl.tagsinput("remove",event.item,{nouser:true})}})});tagEl.on("beforeItemRemove",function(event){if(event.options&&event.options.nouser){return}event.cancel=!data.isOwner||tagEl.tagsinput("items").length<2;if(!data.owner){return app.alertError("[[error:not-allowed]]")}if(tagEl.tagsinput("items").length<2){return app.alertError("[[error:cant-remove-last-user]]")}});tagEl.on("itemRemoved",function(event){if(event.options&&event.options.nouser){return}socket.emit("modules.chats.removeUserFromRoom",{roomId:data.roomId,username:event.item},function(err){if(err){return app.alertError(err.message)}})});var input=$(".users-tag-container").find(".bootstrap-tagsinput input");require(["autocomplete"],function(autocomplete){autocomplete.user(input)})};Chats.leave=function(el){var roomId=el.attr("data-roomid");socket.emit("modules.chats.leave",roomId,function(err){if(err){return app.alertError(err.message)}if(parseInt(roomId,10)===ajaxify.data.roomId){ajaxify.go("user/"+ajaxify.data.userslug+"/chats")}else{el.remove()}})};Chats.switchChat=function(roomid){ajaxify.go("user/"+ajaxify.data.userslug+"/chats/"+roomid)};Chats.addGlobalEventListeners=function(){$(window).on("resize",Chats.resizeMainWindow);$(window).on("mousemove keypress click",function(){if(newMessage&&ajaxify.data.roomId){socket.emit("modules.chats.markRead",ajaxify.data.roomId);newMessage=false}})};Chats.addSocketListeners=function(){socket.on("event:chats.receive",function(data){if(parseInt(data.roomId,10)===parseInt(ajaxify.data.roomId,10)){newMessage=data.self===0;data.message.self=data.self;messages.appendChatMessage($(".expanded-chat .chat-content"),data.message)}else{if(ajaxify.currentPage.startsWith("chats")){var roomEl=$("[data-roomid="+data.roomId+"]");if(roomEl.length>0){roomEl.addClass("unread")}else{var recentEl=components.get("chat/recent");templates.parse("partials/chats/recent_room",{rooms:{roomId:data.roomId,lastUser:data.message.fromUser,usernames:data.message.fromUser.username,unread:true}},function(html){translator.translate(html,function(translated){recentEl.prepend(translated)})})}}}});socket.on("event:user_status_change",function(data){app.updateUserStatus($('.chats-list [data-uid="'+data.uid+'"] [component="user/status"]'),data.status)});messages.onChatMessageEdit();socket.on("event:chats.roomRename",function(data){$('[component="chat/room/name"]').val($("<div/>").html(data.newName).text())})};Chats.resizeMainWindow=function(){var messagesList=$(".expanded-chat .chat-content");if(messagesList.length){var margin=$(".expanded-chat ul").outerHeight(true)-$(".expanded-chat ul").height();var inputHeight=$(".chat-input").outerHeight(true);var fromTop=messagesList.offset().top;var searchHeight=$(".chat-search").height();var searchListHeight=$('[component="chat/search/list"]').outerHeight(true)-$('[component="chat/search/list"]').height();messagesList.height($(window).height()-(fromTop+inputHeight+margin*4));components.get("chat/recent").height($(".expanded-chat").height()-(searchHeight+searchListHeight));$('[component="chat/search/list"]').css("max-height",components.get("chat/recent").height()/2+"px")}Chats.setActive()};Chats.setActive=function(){if(ajaxify.data.roomId){socket.emit("modules.chats.markRead",ajaxify.data.roomId);$(".expanded-chat input").focus()}$(".chats-list li").removeClass("bg-primary");$('.chats-list li[data-roomid="'+ajaxify.data.roomId+'"]').addClass("bg-primary")};return Chats});"use strict";define("forum/infinitescroll",function(){var scroll={};var callback;var previousScrollTop=0;var loadingMore=false;var container;scroll.init=function(el,cb){if(typeof el==="function"){callback=el;container=$("body")}else{callback=cb;container=el||$("body")}$(window).off("scroll",onScroll).on("scroll",onScroll)};function onScroll(){var bsEnv=utils.findBootstrapEnvironment();var mobileComposerOpen=(bsEnv==="xs"||bsEnv==="sm")&&$("html").hasClass("composing");if(loadingMore||mobileComposerOpen){return}var currentScrollTop=$(window).scrollTop();var wh=$(window).height();var viewportHeight=container.height()-wh;var offsetTop=container.offset()?container.offset().top:0;var scrollPercent=100*(currentScrollTop-offsetTop)/(viewportHeight<=0?wh:viewportHeight);var top=20,bottom=80;var direction=currentScrollTop>previousScrollTop?1:-1;if(scrollPercent<top&&currentScrollTop<previousScrollTop){callback(direction)}else if(scrollPercent>bottom&&currentScrollTop>previousScrollTop){callback(direction)}else if(scrollPercent<0&&direction>0&&viewportHeight<0){callback(direction)}previousScrollTop=currentScrollTop}scroll.loadMore=function(method,data,callback){if(loadingMore){return}loadingMore=true;var hookData={method:method,data:data};$(window).trigger("action:infinitescroll.loadmore",hookData);socket.emit(hookData.method,hookData.data,function(err,data){if(err){loadingMore=false;return app.alertError(err.message)}callback(data,function(){loadingMore=false})})};scroll.removeExtra=function(els,direction,count){if(els.length<=count){return}var removeCount=els.length-count;if(direction>0){var height=$(document).height(),scrollTop=$(window).scrollTop();els.slice(0,removeCount).remove();$(window).scrollTop(scrollTop+($(document).height()-height))}else{els.slice(els.length-removeCount).remove()}};return scroll});"use strict";define("forum/pagination",function(){var pagination={};pagination.init=function(){$("body").on("click",'[component="pagination/select-page"]',function(){bootbox.prompt("[[global:enter_page_number]]",function(pageNum){pagination.loadPage(pageNum)});return false})};pagination.loadPage=function(page,callback){callback=callback||function(){};page=parseInt(page,10);if(!utils.isNumber(page)||page<1||page>ajaxify.data.pagination.pageCount){return}var query=utils.params();query.page=page;var url=window.location.pathname+"?"+$.param(query);ajaxify.go(url,callback)};return pagination});"use strict";define("forum/recent",["forum/infinitescroll","components"],function(infinitescroll,components){var Recent={};var newTopicCount=0;var newPostCount=0;$(window).on("action:ajaxify.start",function(ev,data){if(ajaxify.currentPage!==data.url){Recent.removeListeners()}});Recent.init=function(){app.enterRoom("recent_topics");Recent.watchForNewPosts();$("#new-topics-alert").on("click",function(){$(this).addClass("hide")});if(!config.usePagination){infinitescroll.init(Recent.loadMoreTopics)}$(window).trigger("action:topics.loaded",{topics:ajaxify.data.topics})};Recent.watchForNewPosts=function(){newPostCount=0;newTopicCount=0;Recent.removeListeners();socket.on("event:new_topic",onNewTopic);socket.on("event:new_post",onNewPost)};function onNewTopic(data){if(ajaxify.data.selectedCategory&&parseInt(ajaxify.data.selectedCategory.cid,10)!==parseInt(data.cid,10)){return}if(ajaxify.data.selectedFilter&&ajaxify.data.selectedFilter.filter==="watched"){return}++newTopicCount;Recent.updateAlertText()}function onNewPost(data){function showAlert(){++newPostCount;Recent.updateAlertText()}var post=data.posts[0];if(!post||!post.topic){return}if(parseInt(post.topic.mainPid,10)===parseInt(post.pid,10)){return}if(ajaxify.data.selectedCategory&&parseInt(ajaxify.data.selectedCategory.cid,10)!==parseInt(post.topic.cid,10)){return}if(ajaxify.data.selectedFilter&&ajaxify.data.selectedFilter.filter==="new"){return}if(ajaxify.data.selectedFilter&&ajaxify.data.selectedFilter.filter==="watched"){socket.emit("topics.isFollowed",post.tid,function(err,isFollowed){if(err){app.alertError(err.message)}if(isFollowed){showAlert()}});return}showAlert()}Recent.removeListeners=function(){socket.removeListener("event:new_topic",onNewTopic);socket.removeListener("event:new_post",onNewPost)};Recent.updateAlertText=function(){var text="";if(newTopicCount===0){if(newPostCount===1){text="[[recent:there-is-a-new-post]]"}else if(newPostCount>1){text="[[recent:there-are-new-posts, "+newPostCount+"]]"}}else if(newTopicCount===1){if(newPostCount===0){text="[[recent:there-is-a-new-topic]]"}else if(newPostCount===1){text="[[recent:there-is-a-new-topic-and-a-new-post]]"}else if(newPostCount>1){text="[[recent:there-is-a-new-topic-and-new-posts, "+newPostCount+"]]"}}else if(newTopicCount>1){if(newPostCount===0){text="[[recent:there-are-new-topics, "+newTopicCount+"]]"}else if(newPostCount===1){text="[[recent:there-are-new-topics-and-a-new-post, "+newTopicCount+"]]"}else if(newPostCount>1){text="[[recent:there-are-new-topics-and-new-posts, "+newTopicCount+", "+newPostCount+"]]"}}text+=" [[recent:click-here-to-reload]]";$("#new-topics-alert").translateText(text).removeClass("hide").fadeIn("slow");$("#category-no-topics").addClass("hide")};Recent.loadMoreTopics=function(direction){if(direction<0||!$('[component="category"]').length){return}infinitescroll.loadMore("topics.loadMoreRecentTopics",{after:$('[component="category"]').attr("data-nextstart"),cid:utils.params().cid,filter:ajaxify.data.selectedFilter.filter,set:$('[component="category"]').attr("data-set")?$('[component="category"]').attr("data-set"):"topics:recent"},function(data,done){if(data.topics&&data.topics.length){Recent.onTopicsLoaded("recent",data.topics,false,done)}else{done()}$('[component="category"]').attr("data-nextstart",data.nextStart)})};Recent.onTopicsLoaded=function(templateName,topics,showSelect,callback){topics=topics.filter(function(topic){return!components.get("category/topic","tid",topic.tid).length});if(!topics.length){return callback()}app.parseAndTranslate(templateName,"topics",{topics:topics,showSelect:showSelect},function(html){$("#category-no-topics").remove();$('[component="category"]').append(html);html.find(".timeago").timeago();app.createUserTooltips();utils.makeNumbersHumanReadable(html.find(".human-readable-number"));$(window).trigger("action:topics.loaded",{topics:topics});callback()})};return Recent});"use strict";define("forum/unread",["forum/recent","topicSelect","forum/infinitescroll","components"],function(recent,topicSelect,infinitescroll,components){var Unread={};$(window).on("action:ajaxify.start",function(ev,data){if(ajaxify.currentPage!==data.url){recent.removeListeners()}});Unread.init=function(){app.enterRoom("unread_topics");$("#new-topics-alert").on("click",function(){$(this).addClass("hide")});recent.watchForNewPosts();$(window).trigger("action:topics.loaded",{topics:ajaxify.data.topics});$("#markSelectedRead").on("click",function(){var tids=topicSelect.getSelectedTids();if(!tids.length){return}socket.emit("topics.markAsRead",tids,function(err){if(err){return app.alertError(err.message)}doneRemovingTids(tids)})});$("#markAllRead").on("click",function(){socket.emit("topics.markAllRead",function(err){if(err){return app.alertError(err.message)}app.alertSuccess("[[unread:topics_marked_as_read.success]]");$('[component="category"]').empty();$('[component="pagination"]').addClass("hidden");$("#category-no-topics").removeClass("hidden");$(".markread").addClass("hidden")})});$(".markread").on("click",".category",function(){function getCategoryTids(cid){var tids=[];components.get("category/topic","cid",cid).each(function(){tids.push($(this).attr("data-tid"))});return tids}var cid=$(this).attr("data-cid");var tids=getCategoryTids(cid);socket.emit("topics.markCategoryTopicsRead",cid,function(err){if(err){return app.alertError(err.message)}doneRemovingTids(tids)})});topicSelect.init();if($("body").height()<=$(window).height()&&$('[component="category"]').children().length>=20){$("#load-more-btn").show()}$("#load-more-btn").on("click",function(){loadMoreTopics()});if(!config.usePagination){infinitescroll.init(loadMoreTopics)}function loadMoreTopics(direction){if(direction<0||!$('[component="category"]').length){return}var params=utils.params();var cid=params.cid;infinitescroll.loadMore("topics.loadMoreUnreadTopics",{after:$('[component="category"]').attr("data-nextstart"),cid:cid,filter:ajaxify.data.selectedFilter.filter},function(data,done){if(data.topics&&data.topics.length){recent.onTopicsLoaded("unread",data.topics,true,done);$('[component="category"]').attr("data-nextstart",data.nextStart)}else{done();$("#load-more-btn").hide()}})}};function doneRemovingTids(tids){removeTids(tids);app.alertSuccess("[[unread:topics_marked_as_read.success]]");if(!$('[component="category"]').children().length){$("#category-no-topics").removeClass("hidden");$(".markread").addClass("hidden")}}function removeTids(tids){for(var i=0;i<tids.length;++i){components.get("category/topic","tid",tids[i]).remove()}}return Unread});"use strict";define("forum/topic",["forum/infinitescroll","forum/topic/threadTools","forum/topic/postTools","forum/topic/events","forum/topic/posts","forum/topic/replies","navigator","sort","components"],function(infinitescroll,threadTools,postTools,events,posts,replies,navigator,sort,components){var Topic={},currentUrl="";$(window).on("action:ajaxify.start",function(ev,data){if(Topic.replaceURLTimeout){clearTimeout(Topic.replaceURLTimeout);
Topic.replaceURLTimeout=0}if(ajaxify.currentPage!==data.url){navigator.disable();components.get("navbar/title").find("span").text("").hide();app.removeAlert("bookmark");events.removeListeners();$(window).off("keydown",onKeyDown)}if(data.url&&!data.url.startsWith("topic/")){require(["search"],function(search){if(search.topicDOM.active){search.topicDOM.end()}})}});Topic.init=function(){var tid=ajaxify.data.tid;$(window).trigger("action:topic.loading");app.enterRoom("topic_"+tid);posts.processPage(components.get("post"));postTools.init(tid);threadTools.init(tid);replies.init(tid);events.init();sort.handleSort("topicPostSort","user.setTopicSort","topic/"+ajaxify.data.slug);if(!config.usePagination){infinitescroll.init($('[component="topic"]'),posts.loadMorePosts)}addBlockQuoteHandler();addParentHandler();handleKeys();navigator.init('[component="post"]',ajaxify.data.postcount,Topic.toTop,Topic.toBottom,Topic.navigatorCallback,Topic.calculateIndex);handleBookmark(tid);$(window).on("scroll",updateTopicTitle);handleTopicSearch();$(window).trigger("action:topic.loaded",ajaxify.data)};function handleKeys(){if(!config.usePagination){$(window).off("keydown",onKeyDown).on("keydown",onKeyDown)}}function onKeyDown(ev){if(ev.target.nodeName==="BODY"){if(ev.shiftKey||ev.ctrlKey||ev.altKey){return}if(ev.which===36){Topic.toTop();return false}else if(ev.which===35){Topic.toBottom();return false}}}function handleTopicSearch(){require(["search","mousetrap"],function(search,mousetrap){$(".topic-search").on("click",".prev",function(){search.topicDOM.prev()}).on("click",".next",function(){search.topicDOM.next()});mousetrap.bind("ctrl+f",function(e){if(config.topicSearchEnabled){var match=ajaxify.currentPage.match(/^topic\/([\d]+)/),tid;if(match){e.preventDefault();tid=match[1];$("#search-fields input").val("in:topic-"+tid+" ");app.prepareSearch()}}})})}Topic.toTop=function(){navigator.scrollTop(0)};Topic.toBottom=function(){socket.emit("topics.postcount",ajaxify.data.tid,function(err,postCount){if(err){return app.alertError(err.message)}if(config.topicPostSort!=="oldest_to_newest"){postCount=2}navigator.scrollBottom(postCount-1)})};function handleBookmark(tid){var bookmark=ajaxify.data.bookmark||localStorage.getItem("topic:"+tid+":bookmark");var postIndex=getPostIndex();if(postIndex&&window.location.search.indexOf("page=")===-1){if(components.get("post/anchor",postIndex).length){return navigator.scrollToPostIndex(postIndex,true,0)}}else if(bookmark&&(!config.usePagination||config.usePagination&&ajaxify.data.pagination.currentPage===1)&&ajaxify.data.postcount>ajaxify.data.bookmarkThreshold){navigator.update(0);app.alert({alert_id:"bookmark",message:"[[topic:bookmark_instructions]]",timeout:0,type:"info",clickfn:function(){navigator.scrollToPost(parseInt(bookmark-1,10),true)},closefn:function(){localStorage.removeItem("topic:"+tid+":bookmark")}});setTimeout(function(){app.removeAlert("bookmark")},1e4)}else{navigator.update(0)}}function getPostIndex(){var parts=window.location.pathname.split("/");var lastPart=parts[parts.length-1];if(lastPart&&utils.isNumber(lastPart)){lastPart=Math.max(0,parseInt(lastPart,10)-1)}else{return 0}if(lastPart>0&&!components.get("post/anchor",lastPart).length){return components.get("post/anchor").last().attr("name")}return lastPart}function addBlockQuoteHandler(){components.get("topic").on("click","blockquote .toggle",function(){var blockQuote=$(this).parent("blockquote");var toggle=$(this);blockQuote.toggleClass("uncollapsed");var collapsed=!blockQuote.hasClass("uncollapsed");toggle.toggleClass("fa-angle-down",collapsed).toggleClass("fa-angle-up",!collapsed)})}function addParentHandler(){components.get("topic").on("click",'[component="post/parent"]',function(e){var toPid=$(this).attr("data-topid");var toPost=$('[component="post"][data-pid="'+toPid+'"]');if(toPost.length){e.preventDefault();navigator.scrollToPost(toPost.attr("data-index"),true);return false}})}function updateTopicTitle(){var span=components.get("navbar/title").find("span");if($(window).scrollTop()>50&&span.hasClass("hidden")){span.html(ajaxify.data.title).removeClass("hidden")}else if($(window).scrollTop()<=50&&!span.hasClass("hidden")){span.html("").addClass("hidden")}if($(window).scrollTop()>300){app.removeAlert("bookmark")}}Topic.calculateIndex=function(index,elementCount){if(index!==1&&config.topicPostSort!=="oldest_to_newest"){return elementCount-index+2}return index};Topic.navigatorCallback=function(index,elementCount,threshold){var path=ajaxify.removeRelativePath(window.location.pathname.slice(1));if(!path.startsWith("topic")){return}if(navigator.scrollActive){return}posts.loadImages(threshold);var newUrl="topic/"+ajaxify.data.slug+(index>1?"/"+index:"");if(newUrl!==currentUrl){if(Topic.replaceURLTimeout){clearTimeout(Topic.replaceURLTimeout)}Topic.replaceURLTimeout=setTimeout(function(){if(index>=elementCount&&app.user.uid){socket.emit("topics.markAsRead",[ajaxify.data.tid])}updateUserBookmark(index);Topic.replaceURLTimeout=0;if(history.replaceState){var search=window.location.search||"";if(!config.usePagination){search=search&&!/^\?page=\d+$/.test(search)?search:""}history.replaceState({url:newUrl+search},null,window.location.protocol+"//"+window.location.host+RELATIVE_PATH+"/"+newUrl+search)}currentUrl=newUrl},500)}};function updateUserBookmark(index){var bookmarkKey="topic:"+ajaxify.data.tid+":bookmark";var currentBookmark=ajaxify.data.bookmark||localStorage.getItem(bookmarkKey);if(ajaxify.data.postcount>ajaxify.data.bookmarkThreshold&&(!currentBookmark||parseInt(index,10)>parseInt(currentBookmark,10))){if(app.user.uid){socket.emit("topics.bookmark",{tid:ajaxify.data.tid,index:index},function(err){if(err){return app.alertError(err.message)}ajaxify.data.bookmark=index})}else{localStorage.setItem(bookmarkKey,index)}}if(!currentBookmark||parseInt(index,10)>=parseInt(currentBookmark,10)){app.removeAlert("bookmark")}}return Topic});"use strict";define("forum/topic/events",["forum/topic/postTools","forum/topic/threadTools","forum/topic/posts","components","translator"],function(postTools,threadTools,posts,components,translator){var Events={};var events={"event:user_status_change":onUserStatusChange,"event:voted":updatePostVotesAndUserReputation,"event:bookmarked":updateBookmarkCount,"event:topic_deleted":threadTools.setDeleteState,"event:topic_restored":threadTools.setDeleteState,"event:topic_purged":onTopicPurged,"event:topic_locked":threadTools.setLockedState,"event:topic_unlocked":threadTools.setLockedState,"event:topic_pinned":threadTools.setPinnedState,"event:topic_unpinned":threadTools.setPinnedState,"event:topic_moved":onTopicMoved,"event:post_edited":onPostEdited,"event:post_purged":onPostPurged,"event:post_deleted":togglePostDeleteState,"event:post_restored":togglePostDeleteState,"posts.bookmark":togglePostBookmark,"posts.unbookmark":togglePostBookmark,"posts.upvote":togglePostVote,"posts.downvote":togglePostVote,"posts.unvote":togglePostVote,"event:new_notification":onNewNotification,"event:new_post":posts.onNewPost};Events.init=function(){Events.removeListeners();for(var eventName in events){if(events.hasOwnProperty(eventName)){socket.on(eventName,events[eventName])}}};Events.removeListeners=function(){for(var eventName in events){if(events.hasOwnProperty(eventName)){socket.removeListener(eventName,events[eventName])}}};function onUserStatusChange(data){app.updateUserStatus($('[data-uid="'+data.uid+'"] [component="user/status"]'),data.status)}function updatePostVotesAndUserReputation(data){var votes=$('[data-pid="'+data.post.pid+'"] [component="post/vote-count"]').filter(function(index,el){return parseInt($(el).closest("[data-pid]").attr("data-pid"),10)===parseInt(data.post.pid,10)});var reputationElements=$('.reputation[data-uid="'+data.post.uid+'"]');votes.html(data.post.votes).attr("data-votes",data.post.votes);reputationElements.html(data.user.reputation).attr("data-reputation",data.user.reputation)}function updateBookmarkCount(data){$('[data-pid="'+data.post.pid+'"] .bookmarkCount').filter(function(index,el){return parseInt($(el).closest("[data-pid]").attr("data-pid"),10)===parseInt(data.post.pid,10)}).html(data.post.bookmarks).attr("data-bookmarks",data.post.bookmarks)}function onTopicPurged(){if(ajaxify.data.category&&ajaxify.data.category.slug){ajaxify.go("category/"+ajaxify.data.category.slug,null,true)}}function onTopicMoved(data){if(data&&data.slug){ajaxify.go("topic/"+data.slug,null,true)}}function onPostEdited(data){if(!data||!data.post){return}var editedPostEl=components.get("post/content",data.post.pid).filter(function(index,el){return parseInt($(el).closest("[data-pid]").attr("data-pid"),10)===parseInt(data.post.pid,10)});var editorEl=$('[data-pid="'+data.post.pid+'"] [component="post/editor"]').filter(function(index,el){return parseInt($(el).closest("[data-pid]").attr("data-pid"),10)===parseInt(data.post.pid,10)});var topicTitle=components.get("topic/title");var navbarTitle=components.get("navbar/title").find("span");var breadCrumb=components.get("breadcrumb/current");if(topicTitle.length&&data.topic.title&&topicTitle.html()!==data.topic.title){ajaxify.data.title=data.topic.title;var newUrl="topic/"+data.topic.slug+(window.location.search?window.location.search:"");history.replaceState({url:newUrl},null,window.location.protocol+"//"+window.location.host+config.relative_path+"/"+newUrl);topicTitle.fadeOut(250,function(){topicTitle.html(data.topic.title).fadeIn(250)});breadCrumb.fadeOut(250,function(){breadCrumb.html(data.topic.title).fadeIn(250)});navbarTitle.fadeOut(250,function(){navbarTitle.html(data.topic.title).fadeIn(250)})}editedPostEl.fadeOut(250,function(){editedPostEl.html(translator.unescape(data.post.content));editedPostEl.find("img:not(.not-responsive)").addClass("img-responsive");app.replaceSelfLinks(editedPostEl.find("a"));posts.wrapImagesInLinks(editedPostEl.parent());posts.unloadImages(editedPostEl.parent());posts.loadImages();editedPostEl.fadeIn(250);var editData={editor:data.editor,editedISO:utils.toISOString(data.post.edited)};templates.parse("partials/topic/post-editor",editData,function(html){translator.translate(html,function(translated){html=$(translated);editorEl.replaceWith(html);$('[data-pid="'+data.post.pid+'"] [component="post/editor"] .timeago').timeago();$(window).trigger("action:posts.edited",data)})})});if(data.topic.tags&&tagsUpdated(data.topic.tags)){templates.parse("partials/post_bar","tags",{tags:data.topic.tags},function(html){var tags=$(".tags");tags.fadeOut(250,function(){tags.html(html).fadeIn(250)})})}}function tagsUpdated(tags){if(tags.length!==$(".tags").first().children().length){return true}for(var i=0;i<tags.length;++i){if(!$('.tags .tag-item[data-tag="'+tags[i].value+'"]').length){return true}}return false}function onPostPurged(postData){components.get("post","pid",postData.pid).fadeOut(500,function(){$(this).remove();posts.showBottomPostBar()});ajaxify.data.postcount--;postTools.updatePostCount(ajaxify.data.postcount);require(["forum/topic/replies"],function(replies){replies.onPostPurged(postData)})}function togglePostDeleteState(data){var postEl=components.get("post","pid",data.pid);if(!postEl.length){return}postEl.toggleClass("deleted");var isDeleted=postEl.hasClass("deleted");postTools.toggle(data.pid,isDeleted);if(!ajaxify.data.privileges.isAdminOrMod&&parseInt(data.uid,10)!==parseInt(app.user.uid,10)){postEl.find('[component="post/tools"]').toggleClass("hidden",isDeleted);if(isDeleted){postEl.find('[component="post/content"]').translateHtml("[[topic:post_is_deleted]]")}else{postEl.find('[component="post/content"]').html(translator.unescape(data.content))}}}function togglePostBookmark(data){var el=$('[data-pid="'+data.post.pid+'"] [component="post/bookmark"]').filter(function(index,el){return parseInt($(el).closest("[data-pid]").attr("data-pid"),10)===parseInt(data.post.pid,10)});if(!el.length){return}el.attr("data-bookmarked",data.isBookmarked);el.find('[component="post/bookmark/on"]').toggleClass("hidden",!data.isBookmarked);el.find('[component="post/bookmark/off"]').toggleClass("hidden",data.isBookmarked)}function togglePostVote(data){var post=$('[data-pid="'+data.post.pid+'"]');post.find('[component="post/upvote"]').filter(function(index,el){return parseInt($(el).closest("[data-pid]").attr("data-pid"),10)===parseInt(data.post.pid,10)}).toggleClass("upvoted",data.upvote);post.find('[component="post/downvote"]').filter(function(index,el){return parseInt($(el).closest("[data-pid]").attr("data-pid"),10)===parseInt(data.post.pid,10)}).toggleClass("downvoted",data.downvote)}function onNewNotification(data){var tid=ajaxify.data.tid;if(data&&data.tid&&parseInt(data.tid,10)===parseInt(tid,10)){socket.emit("topics.markTopicNotificationsRead",[tid])}}return Events});"use strict";define("forum/topic/flag",[],function(){var Flag={},flagModal,flagCommit;Flag.showFlagModal=function(pid,username,userslug){parseModal({pid:pid,username:username,userslug:userslug},function(html){flagModal=$(html);flagModal.on("hidden.bs.modal",function(){flagModal.remove()});flagCommit=flagModal.find("#flag-post-commit");flagModal.on("click",".flag-reason",function(){flagPost(pid,$(this).text())});flagCommit.on("click",function(){flagPost(pid,flagModal.find("#flag-reason-custom").val())});flagModal.modal("show");flagModal.find("#flag-reason-custom").on("keyup blur change",checkFlagButtonEnable)})};function parseModal(tplData,callback){templates.parse("partials/modals/flag_post_modal",tplData,function(html){require(["translator"],function(translator){translator.translate(html,callback)})})}function flagPost(pid,reason){if(!pid||!reason){return}socket.emit("posts.flag",{pid:pid,reason:reason},function(err){if(err){return app.alertError(err.message)}flagModal.modal("hide");app.alertSuccess("[[topic:flag_success]]")})}function checkFlagButtonEnable(){if(flagModal.find("#flag-reason-custom").val()){flagCommit.removeAttr("disabled")}else{flagCommit.attr("disabled",true)}}return Flag});"use strict";define("forum/topic/fork",["components","postSelect"],function(components,postSelect){var Fork={};var forkModal;var forkCommit;Fork.init=function(){$(".topic").on("click",'[component="topic/fork"]',onForkThreadClicked);$(window).on("action:ajaxify.start",onAjaxifyStart)};function onAjaxifyStart(){closeForkModal();$(window).off("action:ajaxify.start",onAjaxifyStart)}function onForkThreadClicked(){app.parseAndTranslate("partials/fork_thread_modal",{},function(html){forkModal=html;forkCommit=forkModal.find("#fork_thread_commit");$(document.body).append(forkModal);forkModal.find(".close,#fork_thread_cancel").on("click",closeForkModal);forkModal.find("#fork-title").on("keyup",checkForkButtonEnable);postSelect.init(function(){checkForkButtonEnable();showPostsSelected()});showPostsSelected();forkCommit.on("click",createTopicFromPosts)})}function createTopicFromPosts(){forkCommit.attr("disabled",true);socket.emit("topics.createTopicFromPosts",{title:forkModal.find("#fork-title").val(),pids:postSelect.pids,fromTid:ajaxify.data.tid},function(err,newTopic){function fadeOutAndRemove(pid){components.get("post","pid",pid).fadeOut(500,function(){$(this).remove()})}forkCommit.removeAttr("disabled");if(err){return app.alertError(err.message)}app.alert({timeout:5e3,title:"[[global:alert.success]]",message:"[[topic:fork_success]]",type:"success",clickfn:function(){ajaxify.go("topic/"+newTopic.slug)}});postSelect.pids.forEach(function(pid){fadeOutAndRemove(pid)});closeForkModal()})}function showPostsSelected(){if(postSelect.pids.length){forkModal.find("#fork-pids").translateHtml("[[topic:fork_pid_count, "+postSelect.pids.length+"]]")}else{forkModal.find("#fork-pids").translateHtml("[[topic:fork_no_pids]]")}}function checkForkButtonEnable(){if(forkModal.find("#fork-title").val().length&&postSelect.pids.length){forkCommit.removeAttr("disabled")}else{forkCommit.attr("disabled",true)}}function closeForkModal(){postSelect.pids.forEach(function(pid){components.get("post","pid",pid).toggleClass("bg-success",false)});if(forkModal){forkModal.remove();forkModal=null}components.get("topic").off("click","[data-pid]");postSelect.enableClicksOnPosts()}return Fork});"use strict";define("forum/topic/move",function(){var Move={},modal,selectedEl;Move.init=function(tids,currentCid,onComplete){Move.tids=tids;Move.currentCid=currentCid;Move.onComplete=onComplete;Move.moveAll=tids?false:true;socket.emit("categories.getMoveCategories",onCategoriesLoaded)};function onCategoriesLoaded(err,categories){if(err){return app.alertError(err.message)}parseModal(categories,function(){modal.on("hidden.bs.modal",function(){modal.remove()});modal.find("#move-confirm").addClass("hide");if(Move.moveAll||Move.tids&&Move.tids.length>1){modal.find(".modal-header h3").translateText("[[topic:move_topics]]")}modal.on("click",".category-list li[data-cid]",function(){selectCategory($(this))});modal.find("#move_thread_commit").on("click",onCommitClicked);modal.modal("show")})}function parseModal(categories,callback){templates.parse("partials/move_thread_modal",{categories:[]},function(html){require(["translator"],function(translator){translator.translate(html,function(html){modal=$(html);categories.forEach(function(category){if(!category.link){buildRecursive(modal.find(".category-list"),category,"")}});callback()})})})}function buildRecursive(parentEl,category,level){var categoryEl=$("<li/>");if(category.bgColor){categoryEl.css("background-color",category.bgColor)}if(category.color){categoryEl.css("color",category.color)}categoryEl.toggleClass("disabled",!!category.disabled);categoryEl.attr("data-cid",category.cid);categoryEl.attr("data-icon",category.icon);categoryEl.attr("data-name",category.name);categoryEl.html('<i class="fa fa-fw '+category.icon+'"></i> '+category.name);parentEl.append(level);parentEl.append(categoryEl);parentEl.append("<br/>");var indent="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";category.children.forEach(function(childCategory){if(!childCategory.link){buildRecursive(parentEl,childCategory,indent+level)}})}function selectCategory(category){modal.find("#confirm-category-name").html(category.html());modal.find("#move-confirm").removeClass("hide");selectedEl=category;modal.find("#move_thread_commit").prop("disabled",false)}function onCommitClicked(){var commitEl=modal.find("#move_thread_commit");if(!commitEl.prop("disabled")&&selectedEl.attr("data-cid")){commitEl.prop("disabled",true);moveTopics()}}function moveTopics(){socket.emit(Move.moveAll?"topics.moveAll":"topics.move",{tids:Move.tids,cid:selectedEl.attr("data-cid"),currentCid:Move.currentCid},function(err){modal.modal("hide");if(err){return app.alertError(err.message)}app.alertSuccess("[[topic:topic_move_success, "+selectedEl.attr("data-name")+']] <i class="fa fa-fw '+selectedEl.attr("data-icon")+'"></i>');if(typeof Move.onComplete==="function"){Move.onComplete()}})}return Move});"use strict";define("forum/topic/posts",["forum/pagination","forum/infinitescroll","forum/topic/postTools","navigator","components"],function(pagination,infinitescroll,postTools,navigator,components){var Posts={_imageLoaderTimeout:undefined};Posts.onNewPost=function(data){if(!data||!data.posts||!data.posts.length){return}if(parseInt(data.posts[0].tid,10)!==parseInt(ajaxify.data.tid,10)){return}data.loggedIn=app.user.uid?true:false;data.privileges=ajaxify.data.privileges;Posts.modifyPostsByPrivileges(data.posts);updatePostCounts(data.posts);ajaxify.data.postcount++;postTools.updatePostCount(ajaxify.data.postcount);if(config.usePagination){onNewPostPagination(data)}else{onNewPostInfiniteScroll(data)}require(["forum/topic/replies"],function(replies){replies.onNewPost(data)})};Posts.modifyPostsByPrivileges=function(posts){posts.forEach(function(post){post.selfPost=!!app.user.uid&&parseInt(post.uid,10)===parseInt(app.user.uid,10);post.display_edit_tools=ajaxify.data.privileges["posts:edit"]&&post.selfPost||ajaxify.data.privileges.isAdminOrMod;post.display_delete_tools=ajaxify.data.privileges["posts:delete"]&&post.selfPost||ajaxify.data.privileges.isAdminOrMod;post.display_moderator_tools=post.display_edit_tools||post.display_delete_tools;post.display_move_tools=ajaxify.data.privileges.isAdminOrMod;post.display_post_menu=ajaxify.data.privileges.isAdminOrMod||post.selfPost&&!ajaxify.data.locked||(app.user.uid||ajaxify.data.postSharing.length)&&!post.deleted})};function updatePostCounts(posts){for(var i=0;i<posts.length;++i){var cmp=components.get("user/postcount",posts[i].uid);cmp.html(parseInt(cmp.attr("data-postcount"),10)+1);utils.addCommasToNumbers(cmp)}}function onNewPostPagination(data){function scrollToPost(){scrollToPostIfSelf(data.posts[0]);Posts.loadImages()}var posts=data.posts;ajaxify.data.pagination.pageCount=Math.max(1,Math.ceil((posts[0].topic.postcount-1)/config.postsPerPage));var direction=config.topicPostSort==="oldest_to_newest"||config.topicPostSort==="most_votes"?1:-1;var isPostVisible=ajaxify.data.pagination.currentPage===ajaxify.data.pagination.pageCount&&direction===1||ajaxify.data.pagination.currentPage===1&&direction===-1;if(isPostVisible){createNewPosts(data,components.get("post").not("[data-index=0]"),direction,scrollToPost)}else if(ajaxify.data.scrollToMyPost&&parseInt(posts[0].uid,10)===parseInt(app.user.uid,10)){setTimeout(function(){pagination.loadPage(ajaxify.data.pagination.pageCount,scrollToPost)},250)}else{updatePagination()}}function updatePagination(){$.get(config.relative_path+"/api/topic/pagination/"+ajaxify.data.tid,{page:ajaxify.data.pagination.currentPage},function(paginationData){app.parseAndTranslate("partials/paginator",{pagination:paginationData},function(html){$('[component="pagination"]').after(html).remove()})})}function onNewPostInfiniteScroll(data){var direction=config.topicPostSort==="oldest_to_newest"||config.topicPostSort==="most_votes"?1:-1;createNewPosts(data,components.get("post").not("[data-index=0]"),direction,function(html){if(html){html.addClass("new")}scrollToPostIfSelf(data.posts[0]);Posts.loadImages()})}function scrollToPostIfSelf(post){if(!ajaxify.data.scrollToMyPost){return}var isSelfPost=parseInt(post.uid,10)===parseInt(app.user.uid,10);if(isSelfPost){navigator.scrollBottom(post.index)}}function createNewPosts(data,repliesSelector,direction,callback){callback=callback||function(){};if(!data||data.posts&&!data.posts.length){return callback()}function removeAlreadyAddedPosts(){var newPosts=$('[component="post"].new');if(newPosts.length===data.posts.length){var allSamePids=true;newPosts.each(function(index,el){if(parseInt($(el).attr("data-pid"),10)!==parseInt(data.posts[index].pid,10)){allSamePids=false}});if(allSamePids){newPosts.each(function(){$(this).removeClass("new")});data.posts.length=0;return}}if(newPosts.length&&data.posts.length>1){data.posts.forEach(function(post){var p=components.get("post","pid",post.pid);if(p.hasClass("new")){p.remove()}})}data.posts=data.posts.filter(function(post){return $('[component="post"][data-pid="'+post.pid+'"]').length===0})}removeAlreadyAddedPosts();if(!data.posts.length){return callback()}var after,before;if(direction>0&&repliesSelector.length){after=repliesSelector.last()}else if(direction<0&&repliesSelector.length){before=repliesSelector.first()}data.slug=ajaxify.data.slug;$(window).trigger("action:posts.loading",{posts:data.posts,after:after,before:before});app.parseAndTranslate("topic","posts",data,function(html){html=html.filter(function(){var pid=$(this).attr("data-pid");return pid&&$('[component="post"][data-pid="'+pid+'"]').length===0});if(after){html.insertAfter(after)}else if(before){var height=$(document).height(),scrollTop=$(window).scrollTop();html.insertBefore(before);$(window).scrollTop(scrollTop+($(document).height()-height))}else{components.get("topic").append(html)}infinitescroll.removeExtra($('[component="post"]'),direction,40);$(window).trigger("action:posts.loaded",{posts:data.posts});Posts.processPage(html);callback(html)})}Posts.loadMorePosts=function(direction){if(!components.get("topic").length||navigator.scrollActive||Posts._infiniteScrollTimeout){return}Posts._infiniteScrollTimeout=setTimeout(function(){delete Posts._infiniteScrollTimeout},1e3);var replies=components.get("post").not("[data-index=0]").not(".new");var afterEl=direction>0?replies.last():replies.first();var after=parseInt(afterEl.attr("data-index"),10)||0;var tid=ajaxify.data.tid;if(!utils.isNumber(tid)||!utils.isNumber(after)||direction<0&&components.get("post","index",0).length){return}var indicatorEl=$(".loading-indicator");if(!indicatorEl.is(":animated")){indicatorEl.fadeIn()}infinitescroll.loadMore("topics.loadMore",{tid:tid,after:after,direction:direction,topicPostSort:config.topicPostSort},function(data,done){indicatorEl.fadeOut();if(data&&data.posts&&data.posts.length){createNewPosts(data,replies,direction,done)}else{navigator.update();done()}})};Posts.processPage=function(posts){Posts.unloadImages(posts);Posts.showBottomPostBar();posts.find('[component="post/content"] img:not(.not-responsive)').addClass("img-responsive");app.createUserTooltips(posts);app.replaceSelfLinks(posts.find("a"));utils.addCommasToNumbers(posts.find(".formatted-number"));utils.makeNumbersHumanReadable(posts.find(".human-readable-number"));posts.find(".timeago").timeago();addBlockquoteEllipses(posts.find('[component="post/content"] > blockquote > blockquote'));hidePostToolsForDeletedPosts(posts)};Posts.unloadImages=function(posts){var images=posts.find('[component="post/content"] img:not(.not-responsive)');if(config.delayImageLoading){images.each(function(){$(this).attr("data-src",$(this).attr("src"))}).attr("data-state","unloaded").attr("src","about:blank")}else{images.attr("data-state","loaded");Posts.wrapImagesInLinks(posts)}};Posts.loadImages=function(threshold){if(Posts._imageLoaderTimeout){clearTimeout(Posts._imageLoaderTimeout)}Posts._imageLoaderTimeout=setTimeout(function(){var images=components.get("post/content").find('img[data-state="unloaded"]'),visible=images.filter(function(){return utils.isElementInViewport(this)}),posts=$.unique(visible.map(function(){return $(this).parents('[component="post"]').get(0)})),scrollTop=$(window).scrollTop(),adjusting=false,adjustQueue=[],adjustPosition=function(){adjusting=true;oldHeight=document.body.clientHeight;$(this).attr("data-state","loaded");newHeight=document.body.clientHeight;var imageRect=this.getBoundingClientRect();if(imageRect.top<threshold){scrollTop=scrollTop+(newHeight-oldHeight);$(window).scrollTop(scrollTop)}if(adjustQueue.length){adjustQueue.pop()()}else{adjusting=false;Posts.wrapImagesInLinks(posts);posts.length=0}},oldHeight,newHeight;visible.attr("data-state","loading");visible.each(function(index,image){image=$(image);image.on("load",function(){if(!adjusting){adjustPosition.call(this)}else{adjustQueue.push(adjustPosition.bind(this))}});image.attr("src",image.attr("data-src"));image.removeAttr("data-src")})},250)};Posts.wrapImagesInLinks=function(posts){posts.find('[component="post/content"] img:not(.emoji)').each(function(){var $this=$(this),src=$this.attr("src"),suffixRegex=/-resized(\.[\w]+)?$/;if(src==="about:blank"){return}if(utils.isRelativeUrl(src)&&suffixRegex.test(src)){src=src.replace(suffixRegex,"$1")}if(!$this.parent().is("a")){$this.wrap('<a href="'+src+'" target="_blank">')}})};Posts.showBottomPostBar=function(){var mainPost=components.get("post","index",0);var placeHolder=$(".post-bar-placeholder");var posts=$('[component="post"]');if(!!mainPost.length&&posts.length>1&&$(".post-bar").length<2&&placeHolder.length){$(".post-bar").clone().insertAfter(placeHolder);placeHolder.remove()}else if(mainPost.length&&posts.length<2){mainPost.find(".post-bar").remove()}};function hidePostToolsForDeletedPosts(posts){posts.each(function(){if($(this).hasClass("deleted")){postTools.toggle($(this).attr("data-pid"),true)}})}function addBlockquoteEllipses(blockquotes){blockquotes.each(function(){var $this=$(this);if($this.find(":hidden:not(br)").length&&!$this.find(".toggle").length){$this.append('<i class="fa fa-angle-down pointer toggle"></i>')}})}return Posts});"use strict";define("forum/topic/postTools",["share","navigator","components","translator","forum/topic/votes","forum/topic/move-post"],function(share,navigator,components,translator,votes,movePost){var PostTools={};var staleReplyAnyway=false;PostTools.init=function(tid){staleReplyAnyway=false;renderMenu();addPostHandlers(tid);share.addShareHandlers(ajaxify.data.titleRaw);votes.addVoteHandler();PostTools.updatePostCount(ajaxify.data.postcount)};function renderMenu(){$('[component="topic"]').on("show.bs.dropdown",".moderator-tools",function(){var $this=$(this);var dropdownMenu=$this.find(".dropdown-menu");if(dropdownMenu.html()){return}var postEl=$this.parents("[data-pid]");var pid=postEl.attr("data-pid");var index=parseInt(postEl.attr("data-index"),10);socket.emit("posts.loadPostTools",{pid:pid,cid:ajaxify.data.cid},function(err,data){if(err){return app.alertError(err.message)}data.posts.display_move_tools=data.posts.display_move_tools&&index!==0;templates.parse("partials/topic/post-menu-list",data,function(html){translator.translate(html,function(html){dropdownMenu.html(html);$(window).trigger("action:post.tools.load")})})})})}PostTools.toggle=function(pid,isDeleted){var postEl=components.get("post","pid",pid);postEl.find('[component="post/quote"], [component="post/bookmark"], [component="post/reply"], [component="post/flag"], [component="user/chat"]').toggleClass("hidden",isDeleted);postEl.find('[component="post/delete"]').toggleClass("hidden",isDeleted);postEl.find('[component="post/restore"]').toggleClass("hidden",!isDeleted);postEl.find('[component="post/purge"]').toggleClass("hidden",!isDeleted);postEl.find('[component="post/tools"] .dropdown-menu').html("")};PostTools.updatePostCount=function(postCount){var postCountEl=components.get("topic/post-count");postCountEl.html(postCount).attr("title",postCount);utils.makeNumbersHumanReadable(postCountEl);navigator.setCount(postCount)};function addPostHandlers(tid){var postContainer=components.get("topic");postContainer.on("click",'[component="post/quote"]',function(){onQuoteClicked($(this),tid)});postContainer.on("click",'[component="post/reply"]',function(){onReplyClicked($(this),tid)});$(".topic").on("click",'[component="topic/reply"]',function(){onReplyClicked($(this),tid)});$(".topic").on("click",'[component="topic/reply-as-topic"]',function(){translator.translate("[[topic:link_back, "+ajaxify.data.titleRaw+", "+config.relative_path+"/topic/"+ajaxify.data.slug+"]]",function(body){$(window).trigger("action:composer.topic.new",{cid:ajaxify.data.cid,body:body})})});postContainer.on("click",'[component="post/bookmark"]',function(){return bookmarkPost($(this),getData($(this),"data-pid"))});postContainer.on("click",'[component="post/upvote"]',function(){return votes.toggleVote($(this),".upvoted","posts.upvote")});postContainer.on("click",'[component="post/downvote"]',function(){return votes.toggleVote($(this),".downvoted","posts.downvote")});postContainer.on("click",'[component="post/vote-count"]',function(){votes.showVotes(getData($(this),"data-pid"))});postContainer.on("click",'[component="post/flag"]',function(){var pid=getData($(this),"data-pid");var username=getData($(this),"data-username");var userslug=getData($(this),"data-userslug");require(["forum/topic/flag"],function(flag){flag.showFlagModal(pid,username,userslug)})});postContainer.on("click",'[component="post/edit"]',function(){var btn=$(this);var timestamp=parseInt(getData(btn,"data-timestamp"),10);var postEditDuration=parseInt(ajaxify.data.postEditDuration,10);if(checkDuration(postEditDuration,timestamp,"post-edit-duration-expired")){$(window).trigger("action:composer.post.edit",{pid:getData(btn,"data-pid")})}});postContainer.on("click",'[component="post/delete"]',function(){var btn=$(this);var timestamp=parseInt(getData(btn,"data-timestamp"),10);var postDeleteDuration=parseInt(ajaxify.data.postDeleteDuration,10);if(checkDuration(postDeleteDuration,timestamp,"post-delete-duration-expired")){
togglePostDelete($(this),tid)}});function checkDuration(duration,postTimestamp,languageKey){if(!ajaxify.data.privileges.isAdminOrMod&&duration&&Date.now()-postTimestamp>duration*1e3){var numDays=Math.floor(duration/86400);var numHours=Math.floor(duration%86400/3600);var numMinutes=Math.floor(duration%86400%3600/60);var numSeconds=duration%86400%3600%60;var msg="[[error:"+languageKey+", "+duration+"]]";if(numDays){if(numHours){msg="[[error:"+languageKey+"-days-hours, "+numDays+", "+numHours+"]]"}else{msg="[[error:"+languageKey+"-days, "+numDays+"]]"}}else if(numHours){if(numMinutes){msg="[[error:"+languageKey+"-hours-minutes, "+numHours+", "+numMinutes+"]]"}else{msg="[[error:"+languageKey+"-hours, "+numHours+"]]"}}else if(numMinutes){if(numSeconds){msg="[[error:"+languageKey+"-minutes-seconds, "+numMinutes+", "+numSeconds+"]]"}else{msg="[[error:"+languageKey+"-minutes, "+numMinutes+"]]"}}app.alertError(msg);return false}return true}postContainer.on("click",'[component="post/restore"]',function(){togglePostDelete($(this),tid)});postContainer.on("click",'[component="post/purge"]',function(){purgePost($(this),tid)});postContainer.on("click",'[component="post/move"]',function(){movePost.openMovePostModal($(this))});postContainer.on("click",'[component="post/chat"]',function(){openChat($(this))})}function onReplyClicked(button,tid){var selectedText=getSelectedText(button);showStaleWarning(function(){var username=getUserName(button);if(getData(button,"data-uid")==="0"||!getData(button,"data-userslug")){username=""}var toPid=button.is('[component="post/reply"]')?getData(button,"data-pid"):null;if(selectedText){$(window).trigger("action:composer.addQuote",{tid:tid,slug:ajaxify.data.slug,index:getData(button,"data-index"),pid:toPid,topicName:ajaxify.data.titleRaw,username:username,text:selectedText})}else{$(window).trigger("action:composer.post.new",{tid:tid,pid:toPid,topicName:ajaxify.data.titleRaw,text:username?username+" ":""})}})}function onQuoteClicked(button,tid){var selectedText=getSelectedText(button);showStaleWarning(function(){function quote(text){$(window).trigger("action:composer.addQuote",{tid:tid,slug:ajaxify.data.slug,index:getData(button,"data-index"),pid:pid,username:username,topicName:ajaxify.data.titleRaw,text:text})}var username=getUserName(button);var pid=getData(button,"data-pid");if(selectedText){return quote(selectedText)}socket.emit("posts.getRawPost",pid,function(err,post){if(err){return app.alertError(err.message)}quote(post)})})}function getSelectedText(button){var selectionText="";var selection=window.getSelection?window.getSelection():document.selection.createRange();var content=button.parents('[component="post"]').find('[component="post/content"]').get(0);if(selection&&selection.containsNode&&content&&selection.containsNode(content,true)){var bounds=document.createRange();bounds.selectNodeContents(content);var range=selection.getRangeAt(0).cloneRange();if(range.compareBoundaryPoints(Range.START_TO_START,bounds)<0){range.setStart(bounds.startContainer,bounds.startOffset)}if(range.compareBoundaryPoints(Range.END_TO_END,bounds)>0){range.setEnd(bounds.endContainer,bounds.endOffset)}bounds.detach();selectionText=range.toString();range.detach()}return selectionText}function bookmarkPost(button,pid){var method=button.attr("data-bookmarked")==="false"?"posts.bookmark":"posts.unbookmark";socket.emit(method,{pid:pid,room_id:app.currentRoom},function(err){if(err){app.alertError(err.message)}});return false}function getData(button,data){return button.parents("[data-pid]").attr(data)}function getUserName(button){var username="";var post=button.parents("[data-pid]");if(button.attr("component")==="topic/reply"){return username}if(post.length){username=post.attr("data-username").replace(/\s/g,"-")}if(post.length&&post.attr("data-uid")!=="0"){username="@"+username}return username}function togglePostDelete(button,tid){var pid=getData(button,"data-pid");var postEl=components.get("post","pid",pid);var action=!postEl.hasClass("deleted")?"delete":"restore";postAction(action,pid,tid)}function purgePost(button,tid){postAction("purge",getData(button,"data-pid"),tid)}function postAction(action,pid,tid){translator.translate("[[topic:post_"+action+"_confirm]]",function(msg){bootbox.confirm(msg,function(confirm){if(!confirm){return}socket.emit("posts."+action,{pid:pid,tid:tid},function(err){if(err){app.alertError(err.message)}})})})}function openChat(button){var post=button.parents("[data-pid]");app.newChat(post.attr("data-uid"));button.parents(".btn-group").find(".dropdown-toggle").click();return false}function showStaleWarning(callback){if(staleReplyAnyway||ajaxify.data.lastposttime>=Date.now()-1e3*60*60*24*ajaxify.data.topicStaleDays){return callback()}translator.translate("[[topic:stale.warning]]",function(translated){var warning=bootbox.dialog({title:"[[topic:stale.title]]",message:translated,buttons:{reply:{label:"[[topic:stale.reply_anyway]]",className:"btn-link",callback:function(){staleReplyAnyway=true;callback()}},create:{label:"[[topic:stale.create]]",className:"btn-primary",callback:function(){translator.translate("[[topic:link_back, "+ajaxify.data.title+", "+config.relative_path+"/topic/"+ajaxify.data.slug+"]]",function(body){$(window).trigger("action:composer.topic.new",{cid:ajaxify.data.cid,body:body})})}}}});warning.modal()})}return PostTools});"use strict";define("forum/topic/threadTools",["forum/topic/fork","forum/topic/move","forum/topic/delete-posts","components","translator"],function(fork,move,deletePosts,components,translator){var ThreadTools={};ThreadTools.init=function(tid){renderMenu();var topicContainer=$(".topic");topicContainer.on("click",'[component="topic/delete"]',function(){topicCommand("delete",tid);return false});topicContainer.on("click",'[component="topic/restore"]',function(){topicCommand("restore",tid);return false});topicContainer.on("click",'[component="topic/purge"]',function(){topicCommand("purge",tid);return false});topicContainer.on("click",'[component="topic/lock"]',function(){socket.emit("topics.lock",{tids:[tid],cid:ajaxify.data.cid});return false});topicContainer.on("click",'[component="topic/unlock"]',function(){socket.emit("topics.unlock",{tids:[tid],cid:ajaxify.data.cid});return false});topicContainer.on("click",'[component="topic/pin"]',function(){socket.emit("topics.pin",{tids:[tid],cid:ajaxify.data.cid});return false});topicContainer.on("click",'[component="topic/unpin"]',function(){socket.emit("topics.unpin",{tids:[tid],cid:ajaxify.data.cid});return false});topicContainer.on("click",'[component="topic/mark-unread"]',function(){socket.emit("topics.markUnread",tid,function(err){if(err){return app.alertError(err)}app.alertSuccess("[[topic:mark_unread.success]]")});return false});topicContainer.on("click",'[component="topic/mark-unread-for-all"]',function(){var btn=$(this);socket.emit("topics.markAsUnreadForAll",[tid],function(err){if(err){return app.alertError(err.message)}app.alertSuccess("[[topic:markAsUnreadForAll.success]]");btn.parents(".thread-tools.open").find(".dropdown-toggle").trigger("click")});return false});topicContainer.on("click",'[component="topic/move"]',function(){move.init([tid],ajaxify.data.cid);return false});deletePosts.init();fork.init();$(".topic").on("click",'[component="topic/following"]',function(){changeWatching("follow")});$(".topic").on("click",'[component="topic/not-following"]',function(){changeWatching("unfollow")});$(".topic").on("click",'[component="topic/ignoring"]',function(){changeWatching("ignore")});function changeWatching(type){socket.emit("topics.changeWatching",{tid:tid,type:type},function(err){if(err){return app.alert({type:"danger",alert_id:"topic_follow",title:"[[global:please_log_in]]",message:"[[topic:login_to_subscribe]]",timeout:5e3})}var message="";if(type==="follow"){message="[[topic:following_topic.message]]"}else if(type==="unfollow"){message="[[topic:not_following_topic.message]]"}else if(type==="ignore"){message="[[topic:ignoring_topic.message]]"}setFollowState(type);app.alert({alert_id:"follow_thread",message:message,type:"success",timeout:5e3});$(window).trigger("action:topics.changeWatching",{tid:tid,type:type})});return false}};function renderMenu(){$(".topic").on("show.bs.dropdown",".thread-tools",function(){var $this=$(this);var dropdownMenu=$this.find(".dropdown-menu");if(dropdownMenu.html()){return}socket.emit("topics.loadTopicTools",{tid:ajaxify.data.tid,cid:ajaxify.data.cid},function(err,data){if(err){return app.alertError(err)}templates.parse("partials/topic/topic-menu-list",data,function(html){translator.translate(html,function(html){dropdownMenu.html(html);$(window).trigger("action:topic.tools.load")})})})})}function topicCommand(command,tid){translator.translate("[[topic:thread_tools."+command+"_confirm]]",function(msg){bootbox.confirm(msg,function(confirm){if(!confirm){return}socket.emit("topics."+command,{tids:[tid],cid:ajaxify.data.cid},function(err){if(err){app.alertError(err.message)}})})})}ThreadTools.setLockedState=function(data){var threadEl=components.get("topic");if(parseInt(data.tid,10)!==parseInt(threadEl.attr("data-tid"),10)){return}var isLocked=data.isLocked&&!ajaxify.data.privileges.isAdminOrMod;components.get("topic/lock").toggleClass("hidden",data.isLocked);components.get("topic/unlock").toggleClass("hidden",!data.isLocked);var hideReply=(data.isLocked||ajaxify.data.deleted)&&!ajaxify.data.privileges.isAdminOrMod;components.get("topic/reply/container").toggleClass("hidden",hideReply);components.get("topic/reply/locked").toggleClass("hidden",ajaxify.data.privileges.isAdminOrMod||!data.isLocked||ajaxify.data.deleted);threadEl.find('[component="post"]:not(.deleted) [component="post/reply"], [component="post"]:not(.deleted) [component="post/quote"]').toggleClass("hidden",hideReply);threadEl.find('[component="post/edit"], [component="post/delete"]').toggleClass("hidden",isLocked);threadEl.find('[component="post"][data-uid="'+app.user.uid+'"].deleted [component="post/tools"]').toggleClass("hidden",isLocked);$('[component="post/header"] i.fa-lock').toggleClass("hidden",!data.isLocked);$('[component="post/tools"] .dropdown-menu').html("");ajaxify.data.locked=data.isLocked};ThreadTools.setDeleteState=function(data){var threadEl=components.get("topic");if(parseInt(data.tid,10)!==parseInt(threadEl.attr("data-tid"),10)){return}components.get("topic/delete").toggleClass("hidden",data.isDelete);components.get("topic/restore").toggleClass("hidden",!data.isDelete);components.get("topic/purge").toggleClass("hidden",!data.isDelete);components.get("topic/deleted/message").toggleClass("hidden",!data.isDelete);var hideReply=data.isDelete&&!ajaxify.data.privileges.isAdminOrMod;components.get("topic/reply/container").toggleClass("hidden",hideReply);components.get("topic/reply/locked").toggleClass("hidden",ajaxify.data.privileges.isAdminOrMod||!ajaxify.data.locked||data.isDelete);threadEl.find('[component="post"]:not(.deleted) [component="post/reply"], [component="post"]:not(.deleted) [component="post/quote"]').toggleClass("hidden",hideReply);threadEl.toggleClass("deleted",data.isDelete);ajaxify.data.deleted=data.isDelete};ThreadTools.setPinnedState=function(data){var threadEl=components.get("topic");if(parseInt(data.tid,10)!==parseInt(threadEl.attr("data-tid"),10)){return}components.get("topic/pin").toggleClass("hidden",data.isPinned);components.get("topic/unpin").toggleClass("hidden",!data.isPinned);$('[component="post/header"] i.fa-thumb-tack').toggleClass("hidden",!data.isPinned);ajaxify.data.pinned=data.isPinned};function setFollowState(state){var menu=components.get("topic/following/menu");menu.toggleClass("hidden",state!=="follow");components.get("topic/following/check").toggleClass("fa-check",state==="follow");menu=components.get("topic/not-following/menu");menu.toggleClass("hidden",state!=="unfollow");components.get("topic/not-following/check").toggleClass("fa-check",state==="unfollow");menu=components.get("topic/ignoring/menu");menu.toggleClass("hidden",state!=="ignore");components.get("topic/ignoring/check").toggleClass("fa-check",state==="ignore")}return ThreadTools});"use strict";define("forum/categories",["components","translator"],function(components,translator){var categories={};$(window).on("action:ajaxify.start",function(ev,data){if(ajaxify.currentPage!==data.url){socket.removeListener("event:new_post",categories.onNewPost)}});categories.init=function(){app.enterRoom("categories");socket.removeListener("event:new_post",categories.onNewPost);socket.on("event:new_post",categories.onNewPost);$(".category-header").tooltip({placement:"bottom"})};categories.onNewPost=function(data){if(data&&data.posts&&data.posts.length&&data.posts[0].topic){renderNewPost(data.posts[0].topic.cid,data.posts[0])}};function renderNewPost(cid,post){var category=components.get("categories/category","cid",cid);var numRecentReplies=category.attr("data-numRecentReplies");if(!numRecentReplies||!parseInt(numRecentReplies,10)){return}var recentPosts=category.find('[component="category/posts"]');var insertBefore=recentPosts.first();parseAndTranslate([post],function(html){html.hide();if(recentPosts.length===0){html.appendTo(category)}else{html.insertBefore(recentPosts.first())}html.fadeIn();app.createUserTooltips();html.find(".timeago").timeago();if(category.find('[component="category/posts"]').length>parseInt(numRecentReplies,10)){recentPosts.last().remove()}$(window).trigger("action:posts.loaded",{posts:[post]})})}function parseAndTranslate(posts,callback){templates.parse("categories","(categories.)?posts",{categories:{posts:posts}},function(html){translator.translate(html,function(translatedHTML){translatedHTML=$(translatedHTML);translatedHTML.find(".post-content img:not(.not-responsive)").addClass("img-responsive");callback(translatedHTML)})})}return categories});"use strict";define("forum/category",["forum/infinitescroll","share","navigator","forum/category/tools","sort","components","translator","topicSelect","forum/pagination"],function(infinitescroll,share,navigator,categoryTools,sort,components,translator,topicSelect,pagination){var Category={};$(window).on("action:ajaxify.start",function(ev,data){if(ajaxify.currentPage!==data.url){navigator.disable();removeListeners()}});function removeListeners(){socket.removeListener("event:new_topic",Category.onNewTopic);categoryTools.removeListeners()}Category.init=function(){var cid=ajaxify.data.cid;app.enterRoom("category_"+cid);share.addShareHandlers(ajaxify.data.name);socket.removeListener("event:new_topic",Category.onNewTopic);socket.on("event:new_topic",Category.onNewTopic);categoryTools.init(cid);sort.handleSort("categoryTopicSort","user.setCategorySort","category/"+ajaxify.data.slug);if(!config.usePagination){navigator.init('[component="category/topic"]',ajaxify.data.topic_count,Category.toTop,Category.toBottom,Category.navigatorCallback)}enableInfiniteLoadingOrPagination();$('[component="category"]').on("click",'[component="topic/header"]',function(){var clickedIndex=$(this).parents("[data-index]").attr("data-index");$('[component="category/topic"]').each(function(index,el){if($(el).offset().top-$(window).scrollTop()>0){localStorage.setItem("category:"+cid+":bookmark",$(el).attr("data-index"));localStorage.setItem("category:"+cid+":bookmark:clicked",clickedIndex);return false}})});handleIgnoreWatch(cid);$(window).trigger("action:topics.loaded",{topics:ajaxify.data.topics});$(window).trigger("action:category.loaded",{cid:ajaxify.data.cid})};function handleIgnoreWatch(cid){$('[component="category/watching"], [component="category/ignoring"]').on("click",function(){var $this=$(this);var command=$this.attr("component")==="category/watching"?"watch":"ignore";socket.emit("categories."+command,cid,function(err){if(err){return app.alertError(err.message)}$('[component="category/watching/menu"]').toggleClass("hidden",command!=="watch");$('[component="category/watching/check"]').toggleClass("fa-check",command==="watch");$('[component="category/ignoring/menu"]').toggleClass("hidden",command!=="ignore");$('[component="category/ignoring/check"]').toggleClass("fa-check",command==="ignore");app.alertSuccess("[[category:"+command+".message]]")})})}Category.toTop=function(){navigator.scrollTop(0)};Category.toBottom=function(){socket.emit("categories.getTopicCount",ajaxify.data.cid,function(err,count){if(err){return app.alertError(err.message)}navigator.scrollBottom(count-1)})};Category.navigatorCallback=function(topIndex,bottomIndex,elementCount){return bottomIndex};$(window).on("action:ajaxify.contentLoaded",function(ev,data){if(ajaxify.data.template.category){var cid=ajaxify.data.cid;if(!cid){return}var bookmarkIndex=localStorage.getItem("category:"+cid+":bookmark");var clickedIndex=localStorage.getItem("category:"+cid+":bookmark:clicked");bookmarkIndex=Math.max(0,parseInt(bookmarkIndex,10)||0);clickedIndex=Math.max(0,parseInt(clickedIndex,10)||0);if(!parseInt(bookmarkIndex,10)){return}if(config.usePagination){var page=Math.ceil((parseInt(bookmarkIndex,10)+1)/config.topicsPerPage);if(parseInt(page,10)!==ajaxify.data.pagination.currentPage){pagination.loadPage(page,function(){Category.scrollToTopic(bookmarkIndex,clickedIndex,400)})}else{Category.scrollToTopic(bookmarkIndex,clickedIndex,400)}}else{if(bookmarkIndex===0){Category.highlightTopic(clickedIndex);return}$('[component="category"]').empty();loadTopicsAfter(Math.max(0,bookmarkIndex-1)+1,1,function(){$(window).one("action:topics.loaded",function(){Category.scrollToTopic(bookmarkIndex,clickedIndex,0)})})}}});Category.highlightTopic=function(topicIndex){var highlight=components.get("category/topic","index",topicIndex);if(highlight.length&&!highlight.hasClass("highlight")){highlight.addClass("highlight");setTimeout(function(){highlight.removeClass("highlight")},5e3)}};Category.scrollToTopic=function(bookmarkIndex,clickedIndex,duration,offset){if(!bookmarkIndex){return}if(!offset){offset=0}var scrollTo=components.get("category/topic","index",bookmarkIndex);if(scrollTo.length){$("html, body").animate({scrollTop:scrollTo.offset().top-offset+"px"},duration!==undefined?duration:400,function(){Category.highlightTopic(clickedIndex);navigator.update()})}};function enableInfiniteLoadingOrPagination(){if(!config.usePagination){infinitescroll.init($('[component="category"]'),Category.loadMoreTopics)}else{navigator.disable()}}Category.onNewTopic=function(topic){var cid=ajaxify.data.cid;if(!topic||parseInt(topic.cid,10)!==parseInt(cid,10)){return}$(window).trigger("filter:categories.new_topic",topic);var editable=!!$(".thread-tools").length;templates.parse("category","topics",{privileges:{editable:editable},showSelect:editable,topics:[topic],template:{category:true}},function(html){translator.translate(html,function(translatedHTML){var topic=$(translatedHTML),container=$('[component="category"]'),topics=$('[component="category/topic"]'),numTopics=topics.length;$('[component="category"]').removeClass("hidden");$(".category-sidebar").removeClass("hidden");var noTopicsWarning=$("#category-no-topics");if(noTopicsWarning.length){noTopicsWarning.remove();ajaxify.widgets.render("category",window.location.pathname.slice(1))}if(numTopics>0){for(var x=0;x<numTopics;x++){var pinned=$(topics[x]).hasClass("pinned");if(pinned){if(x===numTopics-1){topic.insertAfter(topics[x])}continue}topic.insertBefore(topics[x]);break}}else{container.append(topic)}topic.hide().fadeIn("slow");topic.find(".timeago").timeago();app.createUserTooltips();updateTopicCount();$(window).trigger("action:categories.new_topic.loaded")})})};function updateTopicCount(){socket.emit("categories.getTopicCount",ajaxify.data.cid,function(err,topicCount){if(err){return app.alertError(err.message)}navigator.setCount(topicCount)})}Category.loadMoreTopics=function(direction){if(!$('[component="category"]').length||!$('[component="category"]').children().length){return}var topics=$('[component="category/topic"]');var afterEl=direction>0?topics.last():topics.first();var after=(parseInt(afterEl.attr("data-index"),10)||0)+1;loadTopicsAfter(after,direction)};function loadTopicsAfter(after,direction,callback){callback=callback||function(){};if(!utils.isNumber(after)||after===0&&components.get("category/topic","index",0).length){return callback()}$(window).trigger("action:category.loading");var params=utils.params();infinitescroll.loadMore("categories.loadMore",{cid:ajaxify.data.cid,after:after,direction:direction,author:params.author,tag:params.tag,categoryTopicSort:config.categoryTopicSort},function(data,done){if(data.topics&&data.topics.length){Category.onTopicsLoaded(data,direction,done)}else{done()}$(window).trigger("action:category.loaded");callback()})}Category.onTopicsLoaded=function(data,direction,callback){if(!data||!data.topics.length){return callback()}function removeAlreadyAddedTopics(topics){return topics.filter(function(topic){return components.get("category/topic","tid",topic.tid).length===0})}data.topics=removeAlreadyAddedTopics(data.topics);if(!data.topics.length){return callback()}data.showSelect=data.privileges.editable;var after,before;var topics=$('[component="category/topic"]');if(direction>0&&topics.length){after=topics.last()}else if(direction<0&&topics.length){before=topics.first()}app.parseAndTranslate("category","topics",data,function(html){$('[component="category"]').removeClass("hidden");$(".category-sidebar").removeClass("hidden");$("#category-no-topics").remove();if(after){html.insertAfter(after)}else if(before){var height=$(document).height(),scrollTop=$(window).scrollTop();html.insertBefore(before);$(window).scrollTop(scrollTop+($(document).height()-height))}else{$('[component="category"]').append(html)}if(!topicSelect.getSelectedTids().length){infinitescroll.removeExtra($('[component="category/topic"]'),direction,60)}html.find(".timeago").timeago();app.createUserTooltips();utils.makeNumbersHumanReadable(html.find(".human-readable-number"));$(window).trigger("action:topics.loaded",{topics:data.topics});callback()})};return Category});"use strict";define("forum/category/tools",["forum/topic/move","topicSelect","components","translator"],function(move,topicSelect,components,translator){var CategoryTools={};CategoryTools.init=function(cid){CategoryTools.cid=cid;topicSelect.init(updateDropdownOptions);handlePinnedTopicSort();components.get("topic/delete").on("click",function(){categoryCommand("delete",topicSelect.getSelectedTids());return false});components.get("topic/restore").on("click",function(){categoryCommand("restore",topicSelect.getSelectedTids());return false});components.get("topic/purge").on("click",function(){categoryCommand("purge",topicSelect.getSelectedTids());return false});components.get("topic/lock").on("click",function(){var tids=topicSelect.getSelectedTids();if(tids.length){socket.emit("topics.lock",{tids:tids,cid:CategoryTools.cid},onCommandComplete)}return false});components.get("topic/unlock").on("click",function(){var tids=topicSelect.getSelectedTids();if(tids.length){socket.emit("topics.unlock",{tids:tids,cid:CategoryTools.cid},onCommandComplete)}return false});components.get("topic/pin").on("click",function(){var tids=topicSelect.getSelectedTids();if(tids.length){socket.emit("topics.pin",{tids:tids,cid:CategoryTools.cid},onCommandComplete)}return false});components.get("topic/unpin").on("click",function(){var tids=topicSelect.getSelectedTids();if(tids.length){socket.emit("topics.unpin",{tids:tids,cid:CategoryTools.cid},onCommandComplete)}return false});components.get("topic/mark-unread-for-all").on("click",function(){var tids=topicSelect.getSelectedTids();if(tids.length){socket.emit("topics.markAsUnreadForAll",tids,function(err){if(err){return app.alertError(err.message)}app.alertSuccess("[[topic:markAsUnreadForAll.success]]");tids.forEach(function(tid){$('[component="category/topic"][data-tid="'+tid+'"]').addClass("unread")});onCommandComplete()})}return false});components.get("topic/move").on("click",function(){var tids=topicSelect.getSelectedTids();if(tids.length){move.init(tids,cid,onCommandComplete)}return false});components.get("topic/move-all").on("click",function(){move.init(null,cid,function(err){if(err){return app.alertError(err.message)}ajaxify.refresh()})});CategoryTools.removeListeners();socket.on("event:topic_deleted",setDeleteState);socket.on("event:topic_restored",setDeleteState);socket.on("event:topic_purged",onTopicPurged);socket.on("event:topic_locked",setLockedState);socket.on("event:topic_unlocked",setLockedState);socket.on("event:topic_pinned",setPinnedState);socket.on("event:topic_unpinned",setPinnedState);socket.on("event:topic_moved",onTopicMoved)};function categoryCommand(command,tids){if(!tids.length){return}translator.translate("[[topic:thread_tools."+command+"_confirm]]",function(msg){bootbox.confirm(msg,function(confirm){if(!confirm){return}socket.emit("topics."+command,{tids:tids,cid:CategoryTools.cid},onDeletePurgeComplete)})})}CategoryTools.removeListeners=function(){socket.removeListener("event:topic_deleted",setDeleteState);socket.removeListener("event:topic_restored",setDeleteState);socket.removeListener("event:topic_purged",onTopicPurged);socket.removeListener("event:topic_locked",setLockedState);socket.removeListener("event:topic_unlocked",setLockedState);socket.removeListener("event:topic_pinned",setPinnedState);socket.removeListener("event:topic_unpinned",setPinnedState);socket.removeListener("event:topic_moved",onTopicMoved)};function closeDropDown(){$(".thread-tools.open").find(".dropdown-toggle").trigger("click")}function onCommandComplete(err){if(err){return app.alertError(err.message)}closeDropDown();topicSelect.unselectAll()}function onDeletePurgeComplete(err){if(err){return app.alertError(err.message)}closeDropDown();updateDropdownOptions()}function updateDropdownOptions(){var tids=topicSelect.getSelectedTids();var isAnyDeleted=isAny(isTopicDeleted,tids);var areAllDeleted=areAll(isTopicDeleted,tids);var isAnyPinned=isAny(isTopicPinned,tids);var isAnyLocked=isAny(isTopicLocked,tids);components.get("topic/delete").toggleClass("hidden",isAnyDeleted);components.get("topic/restore").toggleClass("hidden",!isAnyDeleted);components.get("topic/purge").toggleClass("hidden",!areAllDeleted);components.get("topic/lock").toggleClass("hidden",isAnyLocked);components.get("topic/unlock").toggleClass("hidden",!isAnyLocked);components.get("topic/pin").toggleClass("hidden",isAnyPinned);components.get("topic/unpin").toggleClass("hidden",!isAnyPinned)}function isAny(method,tids){for(var i=0;i<tids.length;++i){if(method(tids[i])){return true}}return false}function areAll(method,tids){for(var i=0;i<tids.length;++i){if(!method(tids[i])){return false}}return true}function isTopicDeleted(tid){return getTopicEl(tid).hasClass("deleted")}function isTopicLocked(tid){return getTopicEl(tid).hasClass("locked")}function isTopicPinned(tid){return getTopicEl(tid).hasClass("pinned")}function getTopicEl(tid){return components.get("category/topic","tid",tid)}function setDeleteState(data){var topic=getTopicEl(data.tid);topic.toggleClass("deleted",data.isDeleted);topic.find('[component="topic/locked"]').toggleClass("hide",!data.isDeleted)}function setPinnedState(data){var topic=getTopicEl(data.tid);topic.toggleClass("pinned",data.isPinned);topic.find('[component="topic/pinned"]').toggleClass("hide",!data.isPinned);ajaxify.refresh()}function setLockedState(data){var topic=getTopicEl(data.tid);topic.toggleClass("locked",data.isLocked);topic.find('[component="topic/locked"]').toggleClass("hide",!data.isLocked)}function onTopicMoved(data){getTopicEl(data.tid).remove()}function onTopicPurged(data){getTopicEl(data.tid).remove()}function handlePinnedTopicSort(){if(!ajaxify.data.privileges.isAdminOrMod){return}app.loadJQueryUI(function(){$('[component="category"]').sortable({items:'[component="category/topic"].pinned',update:function(){var data=[];var pinnedTopics=$('[component="category/topic"].pinned');pinnedTopics.each(function(index,element){data.push({tid:$(element).attr("data-tid"),order:pinnedTopics.length-index-1})});socket.emit("topics.orderPinnedTopics",data,function(err){if(err){return app.alertError(err.message)}})}})})}return CategoryTools});(function(factory){"use strict";function loadClient(language,namespace){return Promise.resolve(jQuery.getJSON(config.relative_path+"/assets/language/"+language+"/"+namespace+".json?"+config["cache-buster"]))}var warn=function(){};if(typeof config==="object"&&config.environment==="development"){warn=console.warn.bind(console)}if(typeof define==="function"&&define.amd){define("translator",["string"],function(string){return factory(string,loadClient,warn)})}else if(typeof module==="object"&&module.exports){(function(){var languages=require("../../../src/languages");if(global.env==="development"){var winston=require("winston");warn=function(a){winston.warn(a)}}function loadServer(language,namespace){return new Promise(function(resolve,reject){languages.get(language,namespace,function(err,data){if(err){reject(err)}else{resolve(data)}})})}module.exports=factory(require("string"),loadServer,warn)})()}else{window.translator=factory(window.string,loadClient,warn)}})(function(string,load,warn){"use strict";var assign=Object.assign||jQuery.extend;function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Translator=function(){function Translator(language){var self=this;classCallCheck(self,Translator);if(!language){throw new TypeError("Parameter `language` must be a language string. Received "+language+(language===""?"(empty string)":""))}self.modules=Object.keys(Translator.moduleFactories).map(function(namespace){var factory=Translator.moduleFactories[namespace];return[namespace,factory(language)]}).reduce(function(prev,elem){var namespace=elem[0];var module=elem[1];prev[namespace]=module;return prev},{});self.lang=language;self.translations={}}Translator.prototype.load=load;Translator.prototype.translate=function translate(str){var validText="a-zA-Z0-9\\-_.\\/";var validTextRegex=new RegExp("["+validText+"]");var invalidTextRegex=new RegExp("[^"+validText+"\\]]");var cursor=0;var lastBreak=0;var len=str.length;var toTranslate=[];function split(text){var len=text.length;var arr=[];var i=0;var brk=0;var level=0;while(i+2<=len){if(text.slice(i,i+2)==="[["){level+=1;i+=1}else if(text.slice(i,i+2)==="]]"){level-=1;i+=1}else if(level===0&&text[i]===","&&text[i-1]!=="\\"){arr.push(text.slice(brk,i).trim());i+=1;brk=i}i+=1}arr.push(text.slice(brk,i+1).trim());return arr}while(cursor+2<=len){if(str.slice(cursor,cursor+2)==="[["){toTranslate.push(str.slice(lastBreak,cursor));cursor+=2;lastBreak=cursor;var level=0;var sliced;var textBeforeColonFound=false;var colonFound=false;var textAfterColonFound=false;var commaAfterNameFound=false;while(cursor+2<=len){sliced=str.slice(cursor,cursor+2);if(!textBeforeColonFound&&validTextRegex.test(sliced[0])){textBeforeColonFound=true;cursor+=1}else if(textBeforeColonFound&&!colonFound&&sliced[0]===":"){colonFound=true;cursor+=1}else if(colonFound&&!textAfterColonFound&&validTextRegex.test(sliced[0])){textAfterColonFound=true;cursor+=1}else if(textAfterColonFound&&!commaAfterNameFound&&sliced[0]===","){commaAfterNameFound=true;cursor+=1}else if(!(textBeforeColonFound&&colonFound&&textAfterColonFound&&commaAfterNameFound)&&invalidTextRegex.test(sliced[0])){cursor+=1;lastBreak-=2;if(level>0){level-=1}else{break}}else if(sliced==="[["){level+=1;cursor+=2}else if(sliced==="]]"){if(level===0){var result=split(str.slice(lastBreak,cursor));var name=result[0];var args=result.slice(1);toTranslate.push(this.translateKey(name,args));cursor+=2;lastBreak=cursor;break}level-=1;cursor+=2}else{cursor+=1}}}cursor+=1}toTranslate.push(str.slice(lastBreak,cursor+2));return Promise.all(toTranslate).then(function(translated){return translated.join("")})};Translator.prototype.translateKey=function translateKey(name,args){var self=this;var result=name.split(":",2);var namespace=result[0];var key=result[1];
if(self.modules[namespace]){return Promise.resolve(self.modules[namespace](key,args))}if(namespace&&!key){warn('Missing key in translation token "'+name+'"');return Promise.resolve("[["+namespace+"]]")}var translation=this.getTranslation(namespace,key);var argsToTranslate=args.map(function(arg){return string(arg).collapseWhitespace().decodeHTMLEntities().escapeHTML().s}).map(function(arg){return self.translate(arg)});argsToTranslate.unshift(translation);return Promise.all(argsToTranslate).then(function(result){var translated=result[0];var translatedArgs=result.slice(1);if(!translated){warn('Missing translation "'+name+'"');return key}var out=translated;translatedArgs.forEach(function(arg,i){var escaped=arg.replace(/%/g,"&#37;").replace(/\\,/g,"&#44;");out=out.replace(new RegExp("%"+(i+1),"g"),escaped)});return out})};Translator.prototype.getTranslation=function getTranslation(namespace,key){var translation;if(!namespace){warn("[translator] Parameter `namespace` is "+namespace+(namespace===""?"(empty string)":""));translation=Promise.resolve({})}else{translation=this.translations[namespace]=this.translations[namespace]||this.load(this.lang,namespace).catch(function(){return{}})}if(key){return translation.then(function(x){return x[key]})}return translation};Translator.getLanguage=function getLanguage(){var lang;if(typeof window==="object"&&window.config&&window.utils){lang=utils.params().lang||config.userLang||config.defaultLang||"en-GB"}else{var meta=require("../../../src/meta");lang=meta.config.defaultLang||"en-GB"}return lang};Translator.create=function create(language){if(!language){language=Translator.getLanguage()}Translator.cache[language]=Translator.cache[language]||new Translator(language);return Translator.cache[language]};Translator.cache={};Translator.registerModule=function registerModule(namespace,factory){Translator.moduleFactories[namespace]=factory;Object.keys(Translator.cache).forEach(function(key){var translator=Translator.cache[key];translator.modules[namespace]=factory(translator.lang)})};Translator.moduleFactories={};Translator.removePatterns=function removePatterns(text){var len=text.length;var cursor=0;var lastBreak=0;var level=0;var out="";var sub;while(cursor<len){sub=text.slice(cursor,cursor+2);if(sub==="[["){if(level===0){out+=text.slice(lastBreak,cursor)}level+=1;cursor+=2}else if(sub==="]]"){level-=1;cursor+=2;if(level===0){lastBreak=cursor}}else{cursor+=1}}out+=text.slice(lastBreak,cursor);return out};Translator.escape=function escape(text){return typeof text==="string"?text.replace(/\[\[([\S]*?)\]\]/g,"\\[\\[$1\\]\\]"):text};Translator.unescape=function unescape(text){return typeof text==="string"?text.replace(/\\\[\\\[([\S]*?)\\\]\\\]/g,"[[$1]]"):text};Translator.compile=function compile(){var args=Array.prototype.slice.call(arguments,0).map(function(text){return text.replace(/%/g,"&#37;").replace(/,/g,"&#44;")});return"[["+args.join(", ")+"]]"};return Translator}();var adaptor={Translator:Translator,compile:Translator.compile,escape:Translator.escape,unescape:Translator.unescape,getLanguage:Translator.getLanguage,translate:function translate(text,language,callback){var cb=callback;var lang=language;if(typeof language==="function"){cb=language;lang=null}if(!(typeof text==="string"||text instanceof String)||text===""){return cb("")}Translator.create(lang).translate(text).catch(function(err){warn("Translation failed: "+err.stack)}).then(function(output){cb(output)}).catch(function(err){console.error(err)})},addTranslation:function addTranslation(language,namespace,translation){Translator.create(language).getTranslation(namespace).then(function(translations){assign(translations,translation)})},getTranslations:function getTranslations(language,namespace,callback){callback=callback||function(){};Translator.create(language).getTranslation(namespace).then(callback)},load:function load(language,namespace,callback){adaptor.getTranslations(language,namespace,callback)},toggleTimeagoShorthand:function toggleTimeagoShorthand(){var tmp=assign({},jQuery.timeago.settings.strings);jQuery.timeago.settings.strings=assign({},adaptor.timeagoShort);adaptor.timeagoShort=assign({},tmp)},prepareDOM:function prepareDOM(){var languageCode=void 0;switch(config.userLang){case"en-GB":case"en-US":languageCode="en";break;case"fa-IR":languageCode="fa";break;case"pt-BR":languageCode="pt-br";break;case"nb":languageCode="no";break;default:languageCode=config.userLang;break}jQuery.getScript(config.relative_path+"/vendor/jquery/timeago/locales/jquery.timeago."+languageCode+".js").done(function(){jQuery(".timeago").timeago();adaptor.timeagoShort=assign({},jQuery.timeago.settings.strings);jQuery.getScript(config.relative_path+"/vendor/jquery/timeago/locales/jquery.timeago."+languageCode+"-short.js").done(function(){adaptor.toggleTimeagoShorthand()})});adaptor.translate("[[language:dir]]",function(value){if(value){jQuery("html").css("direction",value).attr("data-dir",value)}})}};return adaptor});"use strict";define("notifications",["sounds","translator","components"],function(sound,translator,components){var Notifications={};var unreadNotifs={};Notifications.prepareDOM=function(){var notifContainer=components.get("notifications"),notifTrigger=notifContainer.children("a"),notifList=components.get("notifications/list"),notifIcon=components.get("notifications/icon");notifTrigger.on("click",function(e){e.preventDefault();if(notifContainer.hasClass("open")){return}Notifications.loadNotifications(notifList)});notifList.on("click","[data-nid]",function(){var unread=$(this).hasClass("unread");var nid=$(this).attr("data-nid");if(!unread){return}socket.emit("notifications.markRead",nid,function(err){if(err){return app.alertError(err.message)}incrementNotifCount(-1);if(unreadNotifs[nid]){delete unreadNotifs[nid]}})});notifContainer.on("click",".mark-all-read",Notifications.markAllRead);notifList.on("click",".mark-read",function(){var liEl=$(this).parent();var unread=liEl.hasClass("unread");var nid=liEl.attr("data-nid");socket.emit("notifications.mark"+(unread?"Read":"Unread"),nid,function(err){if(err){return app.alertError(err.message)}liEl.toggleClass("unread");incrementNotifCount(unread?-1:1);if(unread&&unreadNotifs[nid]){delete unreadNotifs[nid]}});return false});function incrementNotifCount(delta){var count=parseInt(notifIcon.attr("data-content"),10)+delta;Notifications.updateNotifCount(count)}socket.on("event:new_notification",function(notifData){var payload={alert_id:"new_notif",title:"[[notifications:new_notification]]",timeout:2e3};if(notifData.path){payload.message=notifData.bodyShort;payload.type="info";payload.clickfn=function(){if(notifData.path.startsWith("http")&&notifData.path.startsWith("https")){window.location.href=notifData.path}else{window.location.href=window.location.protocol+"//"+window.location.host+config.relative_path+notifData.path}}}else{payload.message="[[notifications:you_have_unread_notifications]]";payload.type="warning"}app.alert(payload);app.refreshTitle();if(ajaxify.currentPage==="notifications"){ajaxify.refresh()}socket.emit("notifications.getCount",function(err,count){if(err){return app.alertError(err.message)}Notifications.updateNotifCount(count)});if(!unreadNotifs[notifData.nid]){sound.play("notification");unreadNotifs[notifData.nid]=true}});socket.on("event:notifications.updateCount",function(count){Notifications.updateNotifCount(count)})};Notifications.loadNotifications=function(notifList){socket.emit("notifications.get",null,function(err,data){if(err){return app.alertError(err.message)}var notifs=data.unread.concat(data.read).sort(function(a,b){return parseInt(a.datetime,10)>parseInt(b.datetime,10)?-1:1});translator.toggleTimeagoShorthand();for(var i=0;i<notifs.length;++i){notifs[i].timeago=$.timeago(new Date(parseInt(notifs[i].datetime,10)))}translator.toggleTimeagoShorthand();templates.parse("partials/notifications_list",{notifications:notifs},function(html){notifList.translateHtml(html);console.log("+-+-=-=-=---=-=-=-=-=-=-=");console.log(html)})})};Notifications.updateNotifCount=function(count){var notifIcon=components.get("notifications/icon");count=Math.max(0,count);if(count>0){notifIcon.removeClass("fa-bell-o").addClass("fa-bell")}else{notifIcon.removeClass("fa-bell").addClass("fa-bell-o")}notifIcon.toggleClass("unread-count",count>0);notifIcon.attr("data-content",count>99?"99+":count);var payload={count:count,updateFavicon:true};$(window).trigger("action:notification.updateCount",payload);if(payload.updateFavicon){Tinycon.setBubble(count>99?"99+":count)}};Notifications.markAllRead=function(){socket.emit("notifications.markAllRead",function(err){if(err){app.alertError(err.message)}Notifications.updateNotifCount(0);unreadNotifs={}})};return Notifications});"use strict";define("chat",["components","taskbar","string","sounds","forum/chats","forum/chats/messages","translator","scrollStop"],function(components,taskbar,S,sounds,Chats,ChatsMessages,translator,scrollStop){var module={};var newMessage=false;module.prepareDOM=function(){var chatsToggleEl=components.get("chat/dropdown");var chatsListEl=components.get("chat/list");chatsToggleEl.on("click",function(){if(chatsToggleEl.parent().hasClass("open")){return}module.loadChatsDropdown(chatsListEl)});chatsListEl.on("click","[data-roomid]",function(ev){if($(ev.target).parents(".user-link").length){return}var roomId=$(this).attr("data-roomid");if(!ajaxify.currentPage.match(/^chats\//)){app.openChat(roomId)}else{ajaxify.go("user/"+app.user.userslug+"/chats/"+roomId)}});$('[component="chats/mark-all-read"]').on("click",function(){socket.emit("modules.chats.markAllRead",function(err){if(err){return app.alertError(err)}})});socket.on("event:chats.receive",function(data){var username=data.message.fromUser.username;var isSelf=data.self===1;data.message.self=data.self;newMessage=data.self===0;if(module.modalExists(data.roomId)){var modal=module.getModal(data.roomId);ChatsMessages.appendChatMessage(modal.find(".chat-content"),data.message);if(modal.is(":visible")){taskbar.updateActive(modal.attr("UUID"));ChatsMessages.scrollToBottom(modal.find(".chat-content"))}else{module.toggleNew(modal.attr("UUID"),true,true)}if(!isSelf&&(!modal.is(":visible")||!app.isFocused)){app.alternatingTitle("[[modules:chat.user_has_messaged_you, "+username+"]]");sounds.play("chat-incoming");taskbar.push("chat",modal.attr("UUID"),{title:username,touid:data.message.fromUser.uid,roomId:data.roomId})}}else{socket.emit("modules.chats.loadRoom",{roomId:data.roomId},function(err,roomData){if(err){return app.alertError(err.message)}roomData.users=roomData.users.filter(function(user){return user&&parseInt(user.uid,10)!==parseInt(app.user.uid,10)});roomData.silent=true;roomData.uid=app.user.uid;module.createModal(roomData,function(modal){module.toggleNew(modal.attr("UUID"),!isSelf,true);if(!isSelf){app.alternatingTitle("[[modules:chat.user_has_messaged_you, "+username+"]]");sounds.play("chat-incoming")}})})}});socket.on("event:user_status_change",function(data){var modal=module.getModal(data.uid);app.updateUserStatus(modal.find('[component="user/status"]'),data.status)});socket.on("event:chats.roomRename",function(data){module.getModal(data.roomId).find('[component="chat/room/name"]').val($("<div/>").html(data.newName).text())});ChatsMessages.onChatMessageEdit()};module.loadChatsDropdown=function(chatsListEl){socket.emit("modules.chats.getRecentChats",{uid:app.user.uid,after:0},function(err,data){if(err){return app.alertError(err.message)}var rooms=data.rooms.filter(function(room){return room.teaser});templates.parse("partials/chats/dropdown",{rooms:rooms},function(html){translator.translate(html,function(translated){chatsListEl.empty().html(translated);app.createUserTooltips(chatsListEl,"right")})})})};module.bringModalToTop=function(chatModal){var topZ=0;taskbar.updateActive(chatModal.attr("UUID"));if($(".chat-modal").length===1){return}$(".chat-modal").each(function(){var thisZ=parseInt($(this).css("zIndex"),10);if(thisZ>topZ){topZ=thisZ}});chatModal.css("zIndex",topZ+1)};module.getModal=function(roomId){return $("#chat-modal-"+roomId)};module.modalExists=function(roomId){return $("#chat-modal-"+roomId).length!==0};module.createModal=function(data,callback){app.parseAndTranslate("chat",data,function(chatModal){var uuid=utils.generateUUID();var dragged=false;chatModal.attr("id","chat-modal-"+data.roomId);chatModal.attr("roomId",data.roomId);chatModal.attr("intervalId",0);chatModal.attr("UUID",uuid);chatModal.css("position","fixed");chatModal.css("zIndex",100);chatModal.appendTo($("body"));chatModal.find(".timeago").timeago();module.center(chatModal);app.loadJQueryUI(function(){chatModal.find(".modal-content").resizable({handles:"n, e, s, w, se",minHeight:250,minWidth:400});chatModal.find(".modal-content").on("resize",function(event,ui){if(ui.originalSize.height===ui.size.height){return}chatModal.find(".chat-content").css("height",module.calculateChatListHeight(chatModal))});chatModal.draggable({start:function(){module.bringModalToTop(chatModal)},stop:function(){chatModal.find("#chat-message-input").focus()},distance:10,handle:".modal-header"})});scrollStop.apply(chatModal.find('[component="chat/messages"]'));chatModal.find("#chat-close-btn").on("click",function(){module.close(chatModal)});function gotoChats(){var text=components.get("chat/input").val();$(window).one("action:ajaxify.end",function(){components.get("chat/input").val(text)});ajaxify.go("user/"+app.user.userslug+"/chats/"+chatModal.attr("roomId"));module.close(chatModal)}chatModal.find(".modal-header").on("dblclick",gotoChats);chatModal.find('button[data-action="maximize"]').on("click",gotoChats);chatModal.find('button[data-action="minimize"]').on("click",function(){var uuid=chatModal.attr("uuid");module.minimize(uuid)});chatModal.on("click",function(){module.bringModalToTop(chatModal);if(dragged){dragged=false}});chatModal.on("mousemove",function(e){if(e.which===1){dragged=true}});chatModal.on("mousemove keypress click",function(){if(newMessage){socket.emit("modules.chats.markRead",data.roomId);newMessage=false}});Chats.addEditDeleteHandler(chatModal.find('[component="chat/messages"]'),data.roomId);chatModal.find('[component="chat/controlsToggle"]').on("click",function(){var messagesEl=chatModal.find('[component="chat/messages"]');chatModal.find('[component="chat/controls"]').toggle();messagesEl.css("height",module.calculateChatListHeight(chatModal))});Chats.addRenameHandler(chatModal.attr("roomId"),chatModal.find('[component="chat/room/name"]'));Chats.addSendHandlers(chatModal.attr("roomId"),chatModal.find("#chat-message-input"),chatModal.find("#chat-message-send-btn"));Chats.createTagsInput(chatModal.find(".users-tag-input"),data);Chats.createAutoComplete(chatModal.find('[component="chat/input"]'));Chats.addScrollHandler(chatModal.attr("roomId"),data.uid,chatModal.find(".chat-content"));taskbar.push("chat",chatModal.attr("UUID"),{title:data.roomName||(data.users.length?data.users[0].username:""),roomId:data.roomId,icon:"fa-comment",state:""});$(window).trigger("action:chat.loaded",chatModal);if(typeof callback==="function"){callback(chatModal)}})};module.focusInput=function(chatModal){chatModal.find("#chat-message-input").focus()};module.close=function(chatModal){clearInterval(chatModal.attr("intervalId"));chatModal.attr("intervalId",0);chatModal.remove();chatModal.data("modal",null);taskbar.discard("chat",chatModal.attr("UUID"));if(chatModal.attr("data-mobile")){module.disableMobileBehaviour(chatModal)}};module.center=function(chatModal){var hideAfter=false;if(chatModal.hasClass("hide")){chatModal.removeClass("hide");hideAfter=true}chatModal.css("left",Math.max(0,($(window).width()-$(chatModal).outerWidth())/2+$(window).scrollLeft())+"px");chatModal.css("top",Math.max(0,$(window).height()/2-$(chatModal).outerHeight()/2)+"px");if(hideAfter){chatModal.addClass("hide")}return chatModal};module.load=function(uuid){var chatModal=$('div[UUID="'+uuid+'"]');chatModal.removeClass("hide");taskbar.updateActive(uuid);ChatsMessages.scrollToBottom(chatModal.find(".chat-content"));module.bringModalToTop(chatModal);module.focusInput(chatModal);socket.emit("modules.chats.markRead",chatModal.attr("roomId"));var env=utils.findBootstrapEnvironment();if(env==="xs"||env==="sm"){module.enableMobileBehaviour(chatModal)}};module.enableMobileBehaviour=function(modalEl){app.toggleNavbar(false);modalEl.attr("data-mobile","1");var messagesEl=modalEl.find(".chat-content");messagesEl.css("height",module.calculateChatListHeight(modalEl));$(window).on("resize",function(){messagesEl.css("height",module.calculateChatListHeight(modalEl))})};module.disableMobileBehaviour=function(){app.toggleNavbar(true)};module.calculateChatListHeight=function(modalEl){var totalHeight=modalEl.find(".modal-content").outerHeight()-modalEl.find(".modal-header").outerHeight();var padding=parseInt(modalEl.find(".modal-body").css("padding-top"),10)+parseInt(modalEl.find(".modal-body").css("padding-bottom"),10);var contentMargin=parseInt(modalEl.find(".chat-content").css("margin-top"),10)+parseInt(modalEl.find(".chat-content").css("margin-bottom"),10);var inputGroupHeight=modalEl.find(".input-group").outerHeight();return totalHeight-padding-contentMargin-inputGroupHeight};module.minimize=function(uuid){var chatModal=$('div[UUID="'+uuid+'"]');chatModal.addClass("hide");taskbar.minimize("chat",uuid);clearInterval(chatModal.attr("intervalId"));chatModal.attr("intervalId",0)};module.toggleNew=taskbar.toggleNew;return module});"use strict";define("components",function(){var components={};components.core={"topic/teaser":function(tid){if(tid){return $('[component="category/topic"][data-tid="'+tid+'"] [component="topic/teaser"]')}else{return $('[component="topic/teaser"]')}},topic:function(name,value){return $('[component="topic"][data-'+name+'="'+value+'"]')},post:function(name,value){return $('[component="post"][data-'+name+'="'+value+'"]')},"post/content":function(pid){return components.core.post("pid",pid).find('[component="post/content"]')},"post/header":function(pid){return components.core.post("pid",pid).find('[component="post/header"]')},"post/anchor":function(index){return components.core.post("index",index).find('[component="post/anchor"]')},"post/vote-count":function(pid){return components.core.post("pid",pid).find('[component="post/vote-count"]')},"post/bookmark-count":function(pid){return components.core.post("pid",pid).find('[component="post/bookmark-count"]')},"user/postcount":function(uid){return $('[component="user/postcount"][data-uid="'+uid+'"]')},"user/reputation":function(uid){return $('[component="user/reputation"][data-uid="'+uid+'"]')},"category/topic":function(name,value){return $('[component="category/topic"][data-'+name+'="'+value+'"]')},"categories/category":function(name,value){return $('[component="categories/category"][data-'+name+'="'+value+'"]')},"chat/message":function(messageId){return $('[component="chat/message"][data-mid="'+messageId+'"]')},"chat/message/body":function(messageId){return $('[component="chat/message"][data-mid="'+messageId+'"] [component="chat/message/body"]')}};components.get=function(){var args=Array.prototype.slice.call(arguments,1);if(components.core[arguments[0]]&&args.length){return components.core[arguments[0]].apply(this,args)}else{return $('[component="'+arguments[0]+'"]')}};return components});"use strict";define("sort",["components"],function(components){var module={};module.handleSort=function(field,method,gotoOnSave){var threadSort=components.get("thread/sort");threadSort.find("i").removeClass("fa-check");var currentSetting=threadSort.find('a[data-sort="'+config[field]+'"]');currentSetting.find("i").addClass("fa-check");$(".category, .topic").on("click",'[component="thread/sort"] a',function(){var newSetting=$(this).attr("data-sort");socket.emit(method,newSetting,function(err){if(err){return app.alertError(err.message)}config[field]=newSetting;ajaxify.go(gotoOnSave)})})};return module});"use strict";define("navigator",["forum/pagination","components"],function(pagination,components){var navigator={};var index=1;var count=0;var navigatorUpdateTimeoutId=0;navigator.scrollActive=false;navigator.init=function(selector,count,toTop,toBottom,callback,calculateIndex){index=1;navigator.selector=selector;navigator.callback=callback;toTop=toTop||function(){};toBottom=toBottom||function(){};$(window).off("scroll",navigator.delayedUpdate).on("scroll",navigator.delayedUpdate);$(".pagination-block .dropdown-menu").off("click").on("click",function(e){e.stopPropagation()});$(".pagination-block").off("shown.bs.dropdown",".dropdown").on("shown.bs.dropdown",".dropdown",function(){setTimeout(function(){$(".pagination-block input").focus()},100)});$(".pagination-block .pageup").off("click").on("click",navigator.scrollUp);$(".pagination-block .pagedown").off("click").on("click",navigator.scrollDown);$(".pagination-block .pagetop").off("click").on("click",toTop);$(".pagination-block .pagebottom").off("click").on("click",toBottom);$(".pagination-block input").on("keydown",function(e){if(e.which===13){var input=$(this);if(!utils.isNumber(input.val())){input.val("");return}var index=parseInt(input.val(),10);if(typeof calculateIndex==="function"){index=calculateIndex(index,count)}var url=generateUrl(index);input.val("");$(".pagination-block .dropdown-toggle").trigger("click");ajaxify.go(url)}});navigator.setCount(count)};function generateUrl(index){var pathname=window.location.pathname.replace(config.relative_path,"");var parts=pathname.split("/");return parts[1]+"/"+parts[2]+"/"+parts[3]+(index?"/"+index:"")}navigator.setCount=function(value){count=parseInt(value,10);navigator.updateTextAndProgressBar()};navigator.show=function(){toggle(true)};navigator.disable=function(){count=0;index=1;navigator.selector=navigator.callback=null;$(window).off("scroll",navigator.update);toggle(false)};function toggle(flag){var path=ajaxify.removeRelativePath(window.location.pathname.slice(1));if(flag&&(!path.startsWith("topic")&&!path.startsWith("category"))){return}$(".pagination-block").toggleClass("ready",flag)}navigator.delayedUpdate=function(){if(navigatorUpdateTimeoutId){clearTimeout(navigatorUpdateTimeoutId);navigatorUpdateTimeoutId=0}navigatorUpdateTimeoutId=setTimeout(navigator.update,100)};navigator.update=function(threshold){threshold=typeof threshold==="number"?threshold:undefined;var els=$(navigator.selector);if(els.length){index=parseInt(els.first().attr("data-index"),10)+1}var scrollTop=$(window).scrollTop();var windowHeight=$(window).height();var documentHeight=$(document).height();var middleOfViewport=scrollTop+windowHeight/2;var previousDistance=Number.MAX_VALUE;els.each(function(){var distanceToMiddle=Math.abs(middleOfViewport-$(this).offset().top);if(distanceToMiddle>previousDistance){return false}if(distanceToMiddle<previousDistance){index=parseInt($(this).attr("data-index"),10)+1;previousDistance=distanceToMiddle}});var atTop=scrollTop===0&&parseInt(els.first().attr("data-index"),10)===0;var nearBottom=scrollTop+windowHeight>documentHeight-100&&parseInt(els.last().attr("data-index"),10)===count-1;if(atTop){index=1}else if(nearBottom){index=count}if(threshold===undefined&&ajaxify.data.template.topic===true){if(atTop){threshold=0}else{var anchorEl=components.get("post/anchor",index-1);if(anchorEl.length){var anchorRect=anchorEl.get(0).getBoundingClientRect();threshold=anchorRect.top}}}if(typeof navigator.callback==="function"){navigator.callback(index,count,threshold)}navigator.updateTextAndProgressBar();toggle(!!count)};navigator.updateTextAndProgressBar=function(){if(!utils.isNumber(index)){return}index=index>count?count:index;$(".pagination-block .pagination-text").translateHtml("[[global:pagination.out_of, "+index+", "+count+"]]");$(".pagination-block .progress-bar").width(index/count*100+"%")};navigator.scrollUp=function(){$("body,html").animate({scrollTop:$(window).scrollTop()-$(window).height()})};navigator.scrollDown=function(){$("body,html").animate({scrollTop:$(window).scrollTop()+$(window).height()})};navigator.scrollTop=function(index){if($(navigator.selector+'[data-index="'+index+'"]').length){navigator.scrollToPost(index,true)}else{ajaxify.go(generateUrl())}};navigator.scrollBottom=function(index){if(parseInt(index,10)<0){return}if($(navigator.selector+'[data-index="'+index+'"]').length){navigator.scrollToPost(index,true)}else{index=parseInt(index,10)+1;ajaxify.go(generateUrl(index))}};navigator.scrollToPost=function(postIndex,highlight,duration){if(!utils.isNumber(postIndex)||!components.get("topic").length){return}duration=duration!==undefined?duration:400;navigator.scrollActive=true;if(components.get("post/anchor",postIndex).length){return navigator.scrollToPostIndex(postIndex,highlight,duration)}if(config.usePagination){var index=postIndex;if(config.topicPostSort==="most_votes"||config.topicPostSort==="newest_to_oldest"){index=ajaxify.data.postcount-index}var page=Math.max(1,Math.ceil(index/config.postsPerPage));if(parseInt(page,10)!==ajaxify.data.pagination.currentPage){pagination.loadPage(page,function(){navigator.scrollToPostIndex(postIndex,highlight,duration)})}else{navigator.scrollToPostIndex(postIndex,highlight,duration)}}else{navigator.scrollActive=false;postIndex=parseInt(postIndex,10)+1;ajaxify.go(generateUrl(postIndex))}};navigator.scrollToPostIndex=function(postIndex,highlight,duration){var scrollTo=components.get("post","index",postIndex);var postHeight=scrollTo.height();var viewportHeight=$(window).height();var navbarHeight=components.get("navbar").height();if(!scrollTo.length){navigator.scrollActive=false;return}$(window).off("scroll",navigator.update);duration=duration!==undefined?duration:400;navigator.scrollActive=true;var done=false;function animateScroll(){var scrollTop=0;if(postHeight<viewportHeight){scrollTop=scrollTo.offset().top-viewportHeight/2+postHeight/2}else{scrollTop=scrollTo.offset().top-navbarHeight}$("html, body").animate({scrollTop:scrollTop+"px"},duration,function(){if(done){$(window).on("scroll",navigator.update);var scrollToRect=scrollTo.get(0).getBoundingClientRect();navigator.update(scrollToRect.top);return}done=true;navigator.scrollActive=false;highlightPost();$("body").scrollTop($("body").scrollTop()-1);$("html").scrollTop($("html").scrollTop()-1)})}function highlightPost(){if(highlight){scrollTo.addClass("highlight");setTimeout(function(){scrollTo.removeClass("highlight")},1e4)}}if(components.get("topic").length){animateScroll()}else{navigator.scrollActive=false}};return navigator});"use strict";define("topicSelect",["components"],function(components){var TopicSelect={};var lastSelected;var topicsContainer;TopicSelect.init=function(onSelect){topicsContainer=$('[component="category"]');topicsContainer.on("selectstart",'[component="topic/select"]',function(ev){ev.preventDefault()});topicsContainer.on("click",'[component="topic/select"]',function(ev){var select=$(this);if(ev.shiftKey){selectRange($(this).parents('[component="category/topic"]').attr("data-tid"));lastSelected=select;return false}var isSelected=select.parents("[data-tid]").hasClass("selected");toggleSelect(select,!isSelected);lastSelected=select;if(typeof onSelect==="function"){onSelect()}})};function toggleSelect(select,isSelected){select.toggleClass("fa-check-square-o",isSelected);select.toggleClass("fa-square-o",!isSelected);select.parents('[component="category/topic"]').toggleClass("selected",isSelected)}TopicSelect.getSelectedTids=function(){var tids=[];topicsContainer.find('[component="category/topic"].selected').each(function(){tids.push($(this).attr("data-tid"))});return tids};TopicSelect.unselectAll=function(){topicsContainer.find('[component="category/topic"].selected').removeClass("selected");topicsContainer.find('[component="topic/select"]').toggleClass("fa-check-square-o",false).toggleClass("fa-square-o",true)};function selectRange(clickedTid){if(!lastSelected){lastSelected=$('[component="category/topic"]').first().find('[component="topic/select"]')}var isClickedSelected=components.get("category/topic","tid",clickedTid).hasClass("selected");var clickedIndex=getIndex(clickedTid);var lastIndex=getIndex(lastSelected.parents('[component="category/topic"]').attr("data-tid"));selectIndexRange(clickedIndex,lastIndex,!isClickedSelected)}function selectIndexRange(start,end,isSelected){if(start>end){var tmp=start;start=end;end=tmp}for(var i=start;i<=end;++i){var topic=$('[component="category/topic"]').eq(i);toggleSelect(topic.find('[component="topic/select"]'),isSelected)}}function getIndex(tid){return components.get("category/topic","tid",tid).index('[component="category/topic"]')}return TopicSelect});"use strict";define("share",function(){var module={};module.addShareHandlers=function(name){var baseUrl=window.location.protocol+"//"+window.location.host;function openShare(url,urlToPost,width,height){window.open(url+encodeURIComponent(baseUrl+config.relative_path+urlToPost),"_blank","width="+width+",height="+height+",scrollbars=no,status=no");return false}$("#content").off("shown.bs.dropdown",".share-dropdown").on("shown.bs.dropdown",".share-dropdown",function(){var postLink=$(this).find(".post-link");postLink.val(baseUrl+getPostUrl($(this)));setTimeout(function(){postLink.putCursorAtEnd().select()},50)});addHandler(".post-link",function(e){e.preventDefault();return false});addHandler('[component="share/twitter"]',function(){return openShare("https://twitter.com/intent/tweet?text="+encodeURIComponent(name)+"&url=",getPostUrl($(this)),550,420)});addHandler('[component="share/facebook"]',function(){return openShare("https://www.facebook.com/sharer/sharer.php?u=",getPostUrl($(this)),626,436)});addHandler('[component="share/google"]',function(){return openShare("https://plus.google.com/share?url=",getPostUrl($(this)),500,570)});$(window).trigger("action:share.addHandlers",{openShare:openShare})};function addHandler(selector,callback){$("#content").off("click",selector).on("click",selector,callback)}function getPostUrl(clickedElement){var pid=parseInt(clickedElement.parents("[data-pid]").attr("data-pid"),10);return"/post"+(pid?"/"+pid:"")}return module});"use strict";define("search",["navigator","translator"],function(nav,translator){var Search={current:{}};Search.query=function(data,callback){var term=data.term;var topicSearch=term.match(/^in:topic-([\d]+) /);if(!topicSearch){term=term.replace(/^[ ?#]*/,"");try{term=encodeURIComponent(term)}catch(e){return app.alertError("[[error:invalid-search-term]]")}ajaxify.go("search?"+createQueryString(data));callback()}else{var cleanedTerm=term.replace(topicSearch[0],"");var tid=topicSearch[1];if(cleanedTerm.length>0){Search.queryTopic(tid,cleanedTerm,callback)}}};function createQueryString(data){var searchIn=data["in"]||"titlesposts";var postedBy=data.by||"";var query={term:data.term,in:searchIn};if(postedBy&&(searchIn==="posts"||searchIn==="titles"||searchIn==="titlesposts")){query.by=postedBy}if(data.categories&&data.categories.length){query.categories=data.categories;if(data.searchChildren){query.searchChildren=data.searchChildren}}if(data.hasTags&&data.hasTags.length){query.hasTags=data.hasTags}if(parseInt(data.replies,10)>0){query.replies=data.replies;query.repliesFilter=data.repliesFilter||"atleast"}if(data.timeRange){query.timeRange=data.timeRange;query.timeFilter=data.timeFilter||"newer"}if(data.sortBy){query.sortBy=data.sortBy;query.sortDirection=data.sortDirection}if(data.showAs){query.showAs=data.showAs}return decodeURIComponent($.param(query))}Search.getSearchPreferences=function(){try{return JSON.parse(localStorage.getItem("search-preferences")||"{}")}catch(e){return{}}};Search.queryTopic=function(tid,term,callback){socket.emit("topics.search",{tid:tid,term:term},function(err,pids){if(err){return app.alertError(err.message)}if(Array.isArray(pids)){Search.current={results:pids.sort(function(a,b){return a-b}),tid:tid,term:term};Search.checkPagePresence(tid,function(){Search.topicDOM.update(0)})}})};Search.checkPagePresence=function(tid,callback){
if(parseInt(ajaxify.data.tid,10)!==parseInt(tid,10)){ajaxify.go("topic/"+tid,callback)}else{callback()}};Search.topicDOM={active:false};Search.topicDOM.prev=function(){Search.topicDOM.update(Search.current.index===0?Search.current.results.length-1:Search.current.index-1)};Search.topicDOM.next=function(){Search.topicDOM.update(Search.current.index===Search.current.results.length-1?0:Search.current.index+1)};Search.topicDOM.update=function(index){var topicSearchEl=$(".topic-search");Search.current.index=index;Search.topicDOM.start();if(Search.current.results.length>0){topicSearchEl.find(".count").html(index+1+" / "+Search.current.results.length);topicSearchEl.find(".prev, .next").removeAttr("disabled");var data={pid:Search.current.results[index],tid:Search.current.tid,topicPostSort:config.topicPostSort};socket.emit("posts.getPidIndex",data,function(err,postIndex){if(err){return app.alertError(err.message)}nav.scrollToPost(postIndex,true)})}else{translator.translate("[[search:no-matches]]",function(text){topicSearchEl.find(".count").html(text)});topicSearchEl.removeClass("hidden").find(".prev, .next").attr("disabled","disabled")}};Search.topicDOM.start=function(){$(".topic-search").removeClass("hidden");if(!Search.topicDOM.active){Search.topicDOM.active=true;require(["mousetrap"],function(mousetrap){mousetrap.bind("esc",Search.topicDOM.end)})}};Search.topicDOM.end=function(){$(".topic-search").addClass("hidden").find(".prev, .next").attr("disabled","disabled");Search.topicDOM.active=false;require(["mousetrap"],function(mousetrap){mousetrap.unbind("esc",Search.topicDOM.end)})};return Search});"use strict";define("alerts",["translator","components"],function(translator,components){var module={};module.alert=function(params){params.alert_id="alert_button_"+(params.alert_id?params.alert_id:(new Date).getTime());params.title=params.title?params.title.trim()||"":"";params.message=params.message?params.message.trim():"";params.type=params.type||"info";var alert=$("#"+params.alert_id);if(alert.length){updateAlert(alert,params)}else{createNew(params)}};function createNew(params){templates.parse("alert",params,function(alertTpl){translator.translate(alertTpl,function(translatedHTML){var alert=$("#"+params.alert_id);if(alert.length){return updateAlert(alert,params)}alert=$(translatedHTML);alert.fadeIn(200);components.get("toaster/tray").prepend(alert);if(typeof params.closefn==="function"){alert.find("button").on("click",function(){params.closefn();fadeOut(alert);return false})}if(params.timeout){startTimeout(alert,params.timeout)}if(typeof params.clickfn==="function"){alert.addClass("pointer").on("click",function(e){if(!$(e.target).is(".close")){params.clickfn()}fadeOut(alert)})}})})}module.remove=function(id){$("#alert_button_"+id).remove()};function updateAlert(alert,params){alert.find("strong").html(params.title);alert.find("p").html(params.message);alert.attr("class","alert alert-dismissable alert-"+params.type);clearTimeout(parseInt(alert.attr("timeoutId"),10));if(params.timeout){startTimeout(alert,params.timeout)}alert.children().fadeOut(100);translator.translate(alert.html(),function(translatedHTML){alert.children().fadeIn(100);alert.html(translatedHTML)});alert.off("click").removeClass("pointer");if(typeof params.clickfn==="function"){alert.addClass("pointer").on("click",function(e){if(!$(e.target).is(".close")){params.clickfn()}fadeOut(alert)})}}function fadeOut(alert){alert.fadeOut(500,function(){$(this).remove()})}function startTimeout(alert,timeout){var timeoutId=setTimeout(function(){fadeOut(alert)},timeout);alert.attr("timeoutId",timeoutId)}return module});"use strict";define("taskbar",function(){var taskbar={};taskbar.init=function(){var self=this;templates.parse("modules/taskbar",{},function(html){self.taskbar=$(html);self.tasklist=self.taskbar.find("ul");$(document.body).append(self.taskbar);self.taskbar.on("click","li",function(){var $btn=$(this),module=$btn.attr("data-module"),uuid=$btn.attr("data-uuid");require([module],function(module){if(!$btn.hasClass("active")){minimizeAll();module.load(uuid);taskbar.toggleNew(uuid,false);app.alternatingTitle("");taskbar.tasklist.removeClass("active");$btn.addClass("active")}else{module.minimize(uuid)}});return false})})};taskbar.discard=function(module,uuid){var btnEl=taskbar.tasklist.find('[data-module="'+module+'"][data-uuid="'+uuid+'"]');btnEl.remove();update()};taskbar.push=function(module,uuid,options){var element=taskbar.tasklist.find('li[data-uuid="'+uuid+'"]');var data={module:module,uuid:uuid,options:options,element:element};$(window).trigger("filter:taskbar.push",data);if(!element.length&&data.module){createTaskbar(data)}};taskbar.get=function(module){var items=$('[data-module="'+module+'"]').map(function(idx,el){return $(el).data()});return items};taskbar.minimize=function(module,uuid){var btnEl=taskbar.tasklist.find('[data-module="'+module+'"][data-uuid="'+uuid+'"]');btnEl.toggleClass("active",false)};taskbar.toggleNew=function(uuid,state,silent){var btnEl=taskbar.tasklist.find('[data-uuid="'+uuid+'"]');btnEl.toggleClass("new",state);if(!silent){$(window).trigger("action:taskbar.toggleNew",uuid)}};taskbar.updateActive=function(uuid){var tasks=taskbar.tasklist.find("li");tasks.removeClass("active");tasks.filter('[data-uuid="'+uuid+'"]').addClass("active")};taskbar.isActive=function(uuid){var taskBtn=taskbar.tasklist.find('li[data-uuid="'+uuid+'"]');return taskBtn.hasClass("active")};function update(){var tasks=taskbar.tasklist.find("li");if(tasks.length>0){taskbar.taskbar.attr("data-active","1")}else{taskbar.taskbar.removeAttr("data-active")}}function minimizeAll(){taskbar.tasklist.find(".active").removeClass("active")}function createTaskbar(data){var title=$("<div></div>").text(data.options.title||"NodeBB Task").html();var taskbarEl=$("<li />").addClass(data.options.className).html('<a href="#">'+(data.options.icon?'<i class="fa '+data.options.icon+'"></i> ':"")+(data.options.image?'<img src="'+data.options.image+'"/> ':"")+"<span>"+title+"</span>"+"</a>").attr({"data-module":data.module,"data-uuid":data.uuid}).addClass(data.options.state!==undefined?data.options.state:"active");if(!data.options.state||data.options.state==="active"){minimizeAll()}taskbar.tasklist.append(taskbarEl);update();data.element=taskbarEl;taskbarEl.data(data);$(window).trigger("action:taskbar.pushed",data)}return taskbar});(function(exports){"use strict";if(typeof module==="object"&&module.exports===exports){exports=module.exports}var helpers={};helpers.displayMenuItem=function(data,index){var item=data.navigation[index];if(!item){return false}var properties=item.properties;if(properties){if(properties.loggedIn&&!data.config.loggedIn||properties.globalMod&&!data.isGlobalMod&&!data.isAdmin||properties.adminOnly&&!data.isAdmin||properties.searchInstalled&&!data.searchEnabled){return false}}if(item.route.match("/users")&&data.privateUserInfo&&!data.config.loggedIn){return false}if(item.route.match("/tags")&&data.privateTagListing&&!data.config.loggedIn){return false}return true};helpers.buildMetaTag=function(tag){var name=tag.name?'name="'+tag.name+'" ':"",property=tag.property?'property="'+tag.property+'" ':"",content=tag.content?'content="'+tag.content.replace(/\n/g," ")+'" ':"";return"<meta "+name+property+content+"/>\n\t"};helpers.buildLinkTag=function(tag){var link=tag.link?'link="'+tag.link+'" ':"",rel=tag.rel?'rel="'+tag.rel+'" ':"",type=tag.type?'type="'+tag.type+'" ':"",href=tag.href?'href="'+tag.href+'" ':"",sizes=tag.sizes?'sizes="'+tag.sizes+'" ':"";return"<link "+link+rel+type+sizes+href+"/>\n\t"};helpers.stringify=function(obj){return JSON.stringify(obj).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")};helpers.escape=function(str){if(typeof utils!=="undefined"){return utils.escapeHTML(str)}else{return require("../utils").escapeHTML(str)}};helpers.stripTags=function(str){if(typeof S!=="undefined"){return S(String(str)).stripTags().s}else{var S=require("string");return S(String(str)).stripTags().s}};helpers.generateCategoryBackground=function(category){if(!category){return""}var style=[];if(category.bgColor){style.push("background-color: "+category.bgColor)}if(category.color){style.push("color: "+category.color)}if(category.backgroundImage){style.push("background-image: url("+category.backgroundImage+")");if(category.imageClass){style.push("background-size: "+category.imageClass)}}return style.join("; ")+";"};helpers.generateChildrenCategories=function(category){var html="";var relative_path=typeof config!=="undefined"?config.relative_path:require("nconf").get("relative_path");if(!category||!category.children){return html}category.children.forEach(function(child){if(!child){return}var link=child.link?child.link:relative_path+"/category/"+child.slug;html+='<a href="'+link+'">'+'<span class="fa-stack fa-lg">'+'<i style="color:'+child.bgColor+';" class="fa fa-circle fa-stack-2x"></i>'+'<i style="color:'+child.color+';" class="fa fa-stack-1x '+child.icon+'"></i>'+"</span><small>"+child.name+"</small></a> "});html=html?'<span class="category-children">'+html+"</span>":html;return html};helpers.generateTopicClass=function(topic){var style=[];if(topic.locked){style.push("locked")}if(topic.pinned){style.push("pinned")}if(topic.deleted){style.push("deleted")}if(topic.unread){style.push("unread")}return style.join(" ")};helpers.getBookmarkFromIndex=function(topic){return(topic.index||0)+1};helpers.displayUserSearch=function(data,allowGuestUserSearching){return data.loggedIn||allowGuestUserSearching==="true"};helpers.membershipBtn=function(groupObj){if(groupObj.isMember&&groupObj.name!=="administrators"){return'<button class="btn btn-danger" data-action="leave" data-group="'+groupObj.displayName+'"><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>'}if(groupObj.isPending&&groupObj.name!=="administrators"){return'<button class="btn btn-warning disabled"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>'}else if(groupObj.isInvited){return'<button class="btn btn-link" data-action="rejectInvite" data-group="'+groupObj.displayName+'">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="'+groupObj.name+'"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>'}else if(!groupObj.disableJoinRequests&&groupObj.name!=="administrators"){return'<button class="btn btn-success" data-action="join" data-group="'+groupObj.displayName+'"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>'}else{return""}};helpers.spawnPrivilegeStates=function(member,privileges){var states=[];for(var priv in privileges){if(privileges.hasOwnProperty(priv)){states.push({name:priv,state:privileges[priv]})}}return states.map(function(priv){return'<td class="text-center" data-privilege="'+priv.name+'"><input type="checkbox"'+(priv.state?" checked":"")+(member==="guests"&&priv.name==="groups:moderate"?' disabled="disabled"':"")+" /></td>"}).join("")};helpers.localeToHTML=function(locale){return locale.replace("_","-")};helpers.renderTopicImage=function(topicObj){if(topicObj.thumb){return'<img src="'+topicObj.thumb+'" class="img-circle user-img" title="'+topicObj.user.username+'" />'}else{return'<img component="user/picture" data-uid="'+topicObj.user.uid+'" src="'+topicObj.user.picture+'" class="user-img" title="'+topicObj.user.username+'" />'}};helpers.renderDigestAvatar=function(block){if(block.teaser){if(block.teaser.user.picture){return'<img style="vertical-align: middle; width: 16px; height: 16px; padding-right: 1em;" src="'+block.teaser.user.picture+'" title="'+block.teaser.user.username+'" />'}else{return'<div style="width: 16px; height: 16px; line-height: 16px; font-size: 10px; margin-right: 1em; background-color: '+block.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block;">'+block.teaser.user["icon:text"]+"</div>"}}else{if(block.user.picture){return'<img style="vertical-align: middle; width: 16px; height: 16px; padding-right: 1em;" src="'+block.user.picture+'" title="'+block.user.username+'" />'}else{return'<div style="width: 16px; height: 16px; line-height: 16px; font-size: 10px; margin-right: 1em; background-color: '+block.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block;">'+block.user["icon:text"]+"</div>"}}};helpers.userAgentIcons=function(data){var icons="";switch(data.platform){case"Linux":icons+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":icons+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":icons+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":icons+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":icons+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":icons+='<i class="fa fa-fw fa-mobile"></i>';break;default:icons+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(data.browser){case"Chrome":icons+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":icons+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":icons+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":icons+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":icons+='<i class="fa fa-fw fa-edge"></i>';break;default:icons+='<i class="fa fa-fw fa-question-circle"></i>';break}return icons};exports.register=function(){var templates;if(typeof module==="object"){templates=require("templates.js")}else{templates=window.templates}Object.keys(helpers).forEach(function(helperName){templates.registerHelper(helperName,helpers[helperName])})};if(typeof define==="function"&&define.amd){define("helpers",exports)}})(typeof exports==="object"?exports:typeof define==="function"&&define.amd?{}:helpers={});"use strict";define("sounds",["buzz"],function(buzz){var Sounds={};var loadedSounds={};var eventSoundMapping;var files;socket.on("event:sounds.reloadMapping",function(){Sounds.reloadMapping()});Sounds.reloadMapping=function(){socket.emit("modules.sounds.getMapping",function(err,mapping){if(err){return app.alertError(err.message)}eventSoundMapping=mapping})};function loadData(callback){socket.emit("modules.sounds.getData",function(err,data){if(err){return app.alertError("[sounds] Could not load sound mapping!")}eventSoundMapping=data.mapping;files=data.files;callback()})}function isSoundLoaded(fileName){return loadedSounds[fileName]}function loadFile(fileName,callback){function createSound(){if(files&&files[fileName]){loadedSounds[fileName]=new buzz.sound(files[fileName])}callback()}if(isSoundLoaded(fileName)){return callback()}if(!files||!files[fileName]){return loadData(createSound)}createSound()}Sounds.play=function(name){function play(){Sounds.playFile(eventSoundMapping[name])}if(!eventSoundMapping){return loadData(play)}play()};Sounds.playFile=function(fileName){if(!fileName){return}function play(){if(loadedSounds[fileName]){loadedSounds[fileName].play()}else{app.alertError("[sounds] Not found: "+fileName)}}if(isSoundLoaded(fileName)){play()}else{loadFile(fileName,play)}};return Sounds});!function(){"use strict";function n(e,t){t!==null&&t!==undefined?typeof t=="string"?e.s=t:e.s=t.toString():e.s=t,e.orig=t,t!==null&&t!==undefined?e.__defineGetter__?e.__defineGetter__("length",function(){return e.s.length}):e.length=t.length:e.length=-1}function r(e){n(this,e)}function u(){for(var e in s)(function(e){var t=s[e];i.hasOwnProperty(e)||(o.push(e),i[e]=function(){return String.prototype.s=this,t.apply(this,arguments)})})(e)}function a(){for(var e=0;e<o.length;++e)delete String.prototype[o[e]];o.length=0}function c(){var e=h(),t={};for(var n=0;n<e.length;++n){var r=e[n],s=i[r];try{var o=typeof s.apply("teststring",[]);t[r]=o}catch(u){}}return t}function h(){var e=[];if(Object.getOwnPropertyNames)return e=Object.getOwnPropertyNames(i),e.splice(e.indexOf("valueOf"),1),e.splice(e.indexOf("toString"),1),e;var t={},n=[];for(var r in String.prototype)t[r]=r;for(var r in Object.prototype)delete t[r];for(var r in t)e.push(r);return e}function p(e){return new r(e)}function d(e,t){var n=[],r;for(r=0;r<e.length;r++)n.push(e[r]),t&&t.call(e,e[r],r);return n}var e="1.7.0",t={},i=String.prototype,s=r.prototype={between:function(e,t){var n=this.s,r=n.indexOf(e),i=n.indexOf(t),s=r+e.length;return new this.constructor(i>r?n.slice(s,i):"")},camelize:function(){var e=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""});return new this.constructor(e)},capitalize:function(){return new this.constructor(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(e){return this.s.charAt(e)},chompLeft:function(e){var t=this.s;return t.indexOf(e)===0?(t=t.slice(e.length),new this.constructor(t)):this},chompRight:function(e){if(this.endsWith(e)){var t=this.s;return t=t.slice(0,t.length-e.length),new this.constructor(t)}return this},collapseWhitespace:function(){var e=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new this.constructor(e)},contains:function(e){return this.s.indexOf(e)>=0},count:function(e){var t=0,n=this.s.indexOf(e);while(n>=0)t+=1,n=this.s.indexOf(e,n+1);return t},dasherize:function(){var e=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new this.constructor(e)},decodeHtmlEntities:function(){var e=this.s;return e=e.replace(/&#(\d+);?/g,function(e,t){return String.fromCharCode(t)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/&([^;\W]+;?)/g,function(e,n){var r=n.replace(/;$/,""),i=t[n]||n.match(/;$/)&&t[r];return typeof i=="number"?String.fromCharCode(i):typeof i=="string"?i:e}),new this.constructor(e)},endsWith:function(e){var t=this.s.length-e.length;return t>=0&&this.s.indexOf(e,t)===t},escapeHTML:function(){return new this.constructor(this.s.replace(/[&<>"']/g,function(e){return"&"+m[e]+";"}))},ensureLeft:function(e){var t=this.s;return t.indexOf(e)===0?this:new this.constructor(e+t)},ensureRight:function(e){var t=this.s;return this.endsWith(e)?this:new this.constructor(t+e)},humanize:function(){if(this.s===null||this.s===undefined)return new this.constructor("");var e=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new this.constructor(e)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return this.s===null||this.s===undefined?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(e){if(e>=0){var t=this.s.substr(0,e);return new this.constructor(t)}return this.right(-e)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(e,t){t==null&&(t=" ");if(this.s.length>=e)return new this.constructor(this.s);e-=this.s.length;var n=Array(Math.ceil(e/2)+1).join(t),r=Array(Math.floor(e/2)+1).join(t);return new this.constructor(n+this.s+r)},padLeft:function(e,t){return t==null&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(Array(e-this.s.length+1).join(t)+this.s)},padRight:function(e,t){return t==null&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(this.s+Array(e-this.s.length+1).join(t))},parseCSV:function(e,t,n,r){e=e||",",n=n||"\\",typeof t=="undefined"&&(t='"');var i=0,s=[],o=[],u=this.s.length,a=!1,f=this,l=function(e){return f.s.charAt(e)};if(typeof r!="undefined")var c=[];t||(a=!0);while(i<u){var h=l(i);switch(h){case n:if(a&&(n!==t||l(i+1)===t)){i+=1,s.push(l(i));break}if(n!==t)break;case t:a=!a;break;case e:a&&t?s.push(h):(o.push(s.join("")),s.length=0);break;case r:a?s.push(h):c&&(o.push(s.join("")),c.push(o),o=[],s.length=0);break;default:a&&s.push(h)}i+=1}return o.push(s.join("")),c?(c.push(o),c):o},replaceAll:function(e,t){var n=this.s.split(e).join(t);return new this.constructor(n)},right:function(e){if(e>=0){var t=this.s.substr(this.s.length-e,e);return new this.constructor(t)}return this.left(-e)},setValue:function(e){return n(this,e),this},slugify:function(){var e=new r(this.s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return e.charAt(0)==="-"&&(e=e.substr(1)),new this.constructor(e)},startsWith:function(e){return this.s.lastIndexOf(e,0)===0},stripPunctuation:function(){return new this.constructor(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var e=this.s,t=arguments.length>0?arguments:[""];return d(t,function(t){e=e.replace(RegExp("</?"+t+"[^<>]*>","gi"),"")}),new this.constructor(e)},template:function(e,t,n){var r=this.s,t=t||p.TMPL_OPEN,n=n||p.TMPL_CLOSE,i=t.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),s=n.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),o=new RegExp(i+"(.+?)"+s,"g"),u=r.match(o)||[];return u.forEach(function(i){var s=i.substring(t.length,i.length-n.length);typeof e[s]!="undefined"&&(r=r.replace(i,e[s]))}),new this.constructor(r)},times:function(e){return new this.constructor(new Array(e+1).join(this.s))},toBoolean:function(){if(typeof this.orig=="string"){var e=this.s.toLowerCase();return e==="true"||e==="yes"||e==="on"}return this.orig===!0||this.orig===1},toFloat:function(e){var t=parseFloat(this.s);return e?parseFloat(t.toFixed(e)):t},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var e;return typeof i.trim=="undefined"?e=this.s.replace(/(^\s*|\s*$)/g,""):e=this.s.trim(),new this.constructor(e)},trimLeft:function(){var e;return i.trimLeft?e=this.s.trimLeft():e=this.s.replace(/(^\s*)/g,""),new this.constructor(e)},trimRight:function(){var e;return i.trimRight?e=this.s.trimRight():e=this.s.replace(/\s+$/,""),new this.constructor(e)},truncate:function(e,t){var n=this.s;e=~~e,t=t||"...";if(n.length<=e)return new this.constructor(n);var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=n.slice(0,e+1).replace(/.(?=\W*\w*$)/g,i);return s.slice(s.length-2).match(/\w\w/)?s=s.replace(/\s*\S+$/,""):s=new r(s.slice(0,s.length-1)).trimRight().s,(s+t).length>n.length?new r(n):new r(n.slice(0,s.length)+t)},toCSV:function(){function u(e){return e!==null&&e!==""}var e=",",t='"',n="\\",i=!0,s=!1,o=[];typeof arguments[0]=="object"?(e=arguments[0].delimiter||e,e=arguments[0].separator||e,t=arguments[0].qualifier||t,i=!!arguments[0].encloseNumbers,n=arguments[0].escape||n,s=!!arguments[0].keys):typeof arguments[0]=="string"&&(e=arguments[0]),typeof arguments[1]=="string"&&(t=arguments[1]),arguments[1]===null&&(t=null);if(this.orig instanceof Array)o=this.orig;else for(var a in this.orig)this.orig.hasOwnProperty(a)&&(s?o.push(a):o.push(this.orig[a]));var f=n+t,l=[];for(var c=0;c<o.length;++c){var h=u(t);typeof o[c]=="number"&&(h&=i),h&&l.push(t);if(o[c]!==null&&o[c]!==undefined){var p=new r(o[c]).replaceAll(t,f).s;l.push(p)}else l.push("");h&&l.push(t),e&&l.push(e)}return l.length=l.length-1,new this.constructor(l.join(""))},toString:function(){return this.s},underscore:function(){var e=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new r(this.s.charAt(0)).isUpper()&&(e="_"+e),new this.constructor(e)},unescapeHTML:function(){return new this.constructor(this.s.replace(/\&([^;]+);/g,function(e,t){var n;return t in v?v[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))},valueOf:function(){return this.s.valueOf()}},o=[],f=c();for(var l in f)(function(e){var t=i[e];typeof t=="function"&&(s[e]||(f[e]==="string"?s[e]=function(){return new this.constructor(t.apply(this,arguments))}:s[e]=t))})(l);s.repeat=s.times,s.include=s.contains,s.toInteger=s.toInt,s.toBool=s.toBoolean,s.decodeHTMLEntities=s.decodeHtmlEntities,s.constructor=r,p.extendPrototype=u,p.restorePrototype=a,p.VERSION=e,p.TMPL_OPEN="{{",p.TMPL_CLOSE="}}",p.ENTITIES=t,typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=p:typeof define=="function"&&define.amd?define("string",[],function(){return p}):window.S=p;var v={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},m={};for(var g in v)m[v[g]]=g;t={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this);